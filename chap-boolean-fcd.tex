\chapter{Boolean funcoids}

\section{Definitions}

I call \emph{boolean funcoids} pointfree funcoids between boolean lattices.

\begin{prop}
  Every boolean funcoid is complete and co-complete.
\end{prop}

\begin{proof}
  It's enough to prove $\supfun{f} \bigsqcup S = \bigsqcup \langle
  \supfun{f} \rangle^{\ast} S$ for a boolean funcoid $f$ for every $S
  \in \subsets \Src f$ whenever both $\bigsqcup S$ and $\bigsqcup
  \langle \supfun{f} \rangle^{\ast} S$ are defined.
  
  Really, $Y \nasymp \supfun{f} \bigsqcup S \Leftrightarrow \bigsqcup S
  \nasymp \supfun{f^{- 1}} Y \Leftrightarrow \exists X \in S : X
  \nasymp \supfun{f^{- 1}} Y \Leftrightarrow \exists X \in S : Y
  \nasymp \supfun{f} X \Leftrightarrow Y \nasymp \bigsqcup \langle
  \supfun{f} \rangle^{\ast} S$ for every $Y \in \Dst f$ and thus
  by proposition~\bookref{bool-sep} we have $\supfun{f} \bigsqcup S = \bigsqcup
  \langle \supfun{f} \rangle^{\ast} S$.
\end{proof}

\begin{thm}\label{bfunc-is-adj}
  Let $\mathfrak{A}$, $\mathfrak{B}$ be complete boolean lattices.
  \fxnote{Generalize for complete (separable?) join infinite distributive lattices.}
  
  A function $\alpha \in \mathfrak{B}^{\mathfrak{A}}$ is equal to the
  component $\supfun{f}$ of a pointree funcoid $f \in \mathsf{pFCD}
  (\mathfrak{A}; \mathfrak{B})$ iff $\alpha$ is preserving all joins (= lower
  adjoint).
\end{thm}

\begin{proof}
  Let $\alpha \in \mathfrak{B}^{\mathfrak{A}}$ and preserves all joins. Then
  $\alpha \in \mathscr{F} (\mathfrak{B})^{\mathfrak{A}}$ (We equate principal
  filters of the set $\mathscr{F} \mathfrak{A}$ of filters on $\mathfrak{A}$
  with elements of $\mathfrak{A}$). Thus $\alpha = \rsupfun{g}$
  for some $g \in \mathsf{pFCD} \left( \mathscr{F} \mathfrak{A}; \mathscr{F}
  \mathfrak{B} \right)$.
  
  $\langle g^{- 1} \rangle \in \mathscr{F} (\mathfrak{A})^{\mathscr{F}
  (\mathfrak{B})}$.
  
  Let $y \in \mathfrak{B}$. We need to prove $\langle g^{- 1} \rangle y \in
  \mathfrak{A}$ that is $\bigsqcup S \nasymp \langle g^{- 1} \rangle y
  \Leftrightarrow \exists x \in S : \langle g^{- 1} \rangle y \nasymp x$ for
  every $S \in \subsets \mathfrak{A}$.
  
  Really, $\bigsqcup S \nasymp \langle g^{- 1} \rangle y \Leftrightarrow y
  \nasymp \supfun{g} \bigsqcup S \Leftrightarrow y \nasymp \bigsqcup
  \langle \supfun{g} \rangle^{\ast} S \Leftrightarrow \exists x \in S :
  y \nasymp \supfun{g} x \Leftrightarrow \exists x \in S : \langle g^{-
  1} \rangle y \nasymp x$.
  
  Take $\beta = \langle g^{- 1} \rangle^{\ast}$. We have $\beta \in
  \mathfrak{A}^{\mathfrak{B}}$.
  
  $x \nasymp \beta y \Leftrightarrow x \nasymp \langle g^{- 1} \rangle y
  \Leftrightarrow y \nasymp \supfun{g} x \Leftrightarrow y \nasymp
  \alpha x$.
  
  So $(\mathfrak{A}; \mathfrak{B}; \alpha ; \beta)$ is a pointfree funcoid.
  
  The other direction: Let now $f \in \mathsf{pFCD} (\mathfrak{A};
  \mathfrak{B})$. We need to prove that it preserves all joins. But it was
  proved above.
\end{proof}

\begin{conjecture}
  Let $\mathfrak{A}$, $\mathfrak{B}$ be boolean lattices.
  
  A function $\alpha \in \mathfrak{B}^{\mathfrak{A}}$ is equal to the
  component $\supfun{f}$ of a pointree funcoid $f \in \mathsf{pFCD}
  (\mathfrak{A}; \mathfrak{B})$ iff $\alpha$ is a lower adjoint.
\end{conjecture}

It is tempting to conclude that $\supfun{f}$ is a lower adjoint to
$\supfun{f^{- 1}}$. But that's false:

We should disprove that $Y \sqsubseteq \supfun{f} X \Leftrightarrow X
\sqsubseteq \supfun{f^{- 1}} Y$.

For a counter-example, take $f = \{ 0 \} \times \mathbb{N}$. Then our
condition takes form $1 \Leftrightarrow X \sqsubseteq \{ 0 \}$ for $Y \ni 0$
what obviously does not hold.

Let $p$ be a Galois connection between complete boolean lattices. Then
there exists a funcoid~$f$ such that $p^\ast = \supfun{f}$ and thus there exists
a Galois connection~$q$ such that $q^\ast = \supfun{f^{-1}}$. We have found that
to every Galois connection between two complete boolean lattices corresponds
another Galois connection. TODO: Research it in details.

Galois connections (particularly between boolean lattices) are studied in~\cite{tprod-dist-lat}
and~\cite{shmuely1974}. We should study them in details.

\section{One-element boolean lattice}

Let $\mathfrak{A}$ be a boolean lattice and $\mathfrak{B}= \subsets 0$.
It's sole element is $\bot$.

$f \in \mathsf{pFCD} (\mathfrak{A}; \mathfrak{B}) \Leftrightarrow \forall X \in
\mathfrak{A}: (\supfun{f} X \nasymp \bot \Leftrightarrow \langle f^{-
1} \rangle \bot \nasymp X) \Leftrightarrow \forall X \in \mathfrak{A}: (0
\Leftrightarrow \supfun{f^{- 1}} \bot \nasymp X) \Leftrightarrow
\forall X \in \mathfrak{A}: \supfun{f^{- 1}} \bot \asymp X
\Leftrightarrow \forall X \in \mathfrak{A}: \supfun{f^{- 1}} \bot =
\bot^{\mathfrak{A}} \Leftrightarrow \supfun{f^{- 1}} \bot =
\bot^{\mathfrak{A}} \Leftrightarrow \supfun{f^{- 1}} = \{ (\bot ;
\bot^{\mathfrak{A}}) \}$.

Thus $\card \mathsf{pFCD} (\mathfrak{A}; \subsets 0) = 1$.

\section{Two-element boolean lattice}

Consider the two-element boolean lattice $\mathfrak{B}= \subsets 1$.

Let $f$ be a pointfree protofuncoid from $\mathfrak{A}$ to $\mathfrak{B}$
(that is $(\mathfrak{A};\mathfrak{B};\alpha;\beta)$ where $\alpha\in\mathfrak{B}^{\mathfrak{A}}$, $\beta\in\mathfrak{A}^{\mathfrak{B}}$).

$f \in \mathsf{pFCD} (\mathfrak{A}; \mathfrak{B}) \Leftrightarrow \forall X \in
\mathfrak{A}, Y \in \mathfrak{B}: (\supfun{f} X \nasymp Y
\Leftrightarrow \supfun{f^{- 1}} Y \nasymp X) \Leftrightarrow \forall X
\in \mathfrak{A}, Y \in \mathfrak{B}: ((0 \in \supfun{f} X \wedge 0 \in
Y) \vee (1 \in \supfun{f} X \wedge 1 \in Y) \Leftrightarrow \langle
f^{- 1} \rangle Y \nasymp X)$.

$T = \setcond{ X \in \mathfrak{A} }{ 0 \in \langle f
\rangle X }$ is an ideal. Really: That it's an upper set is obvious.
Let $P \cup Q \in \setcond{ X \in \mathfrak{A} }{ 0 \in
\supfun{f} X }$. Then $0 \in \supfun{f} (P \cup Q) =
\supfun{f} P \cup \supfun{f} Q$; $0 \in \supfun{f} P \vee
0 \in \supfun{f} Q$.

Similarly $S = \setcond{ X \in \mathfrak{A} }{ 1 \in
\supfun{f} X }$ is an ideal.

Let now $T, S \in \subsets \mathfrak{A}$ be ideals. Can we restore $\langle
f \rangle$? Yes, because we know $0 \in \supfun{f} X$ and $1 \in
\supfun{f} X$ for every $X \in \mathfrak{A}$.

So it is equivalent to $\forall X \in \mathfrak{A}, Y \in \mathfrak{B}: ((X
\in T \wedge 0 \in Y) \vee (X \in S \wedge 1 \in Y) \Leftrightarrow \langle
f^{- 1} \rangle Y \nasymp X)$.

$f \in \mathsf{pFCD} (\mathfrak{A}; \mathfrak{B})$ is equivalent to conjunction
of all rows of this table:

\begin{tabular}{|l|l|}
  \hline
  $Y$ & equality \\ \hline\hline
  $\emptyset$ & $\supfun{f^{- 1}} \emptyset = \emptyset$\\
  \{0\} & $X \in T \Leftrightarrow \supfun{f^{- 1}} \{ 0 \} \nasymp
  X$\\ \hline
  \{1\} & $X \in S \Leftrightarrow \supfun{f^{- 1}} \{ 1 \} \nasymp
  X$\\ \hline
  \{0,1\} & $X \in T \vee X \in S \Leftrightarrow \supfun{f^{- 1}} \{
  0, 1 \} \nasymp X$ \\
  \hline
\end{tabular}

Simplified:

\begin{tabular}{|l|l|}
  \hline
  $Y$ & equality \\ \hline\hline
  $\emptyset$ & $\supfun{f^{- 1}} \emptyset = \emptyset$\\ \hline
  \{0\} & $T = \corestar \supfun{f^{- 1}} \{ 0 \}$\\ \hline
  \{1\} & $S = \corestar \supfun{f^{- 1}} \{ 1 \}$\\ \hline
  \{0,1\} & $T \cup S = \corestar \supfun{f^{- 1}} \{ 0, 1 \}$ \\
  \hline
\end{tabular}

From the last table it follows that $T$ and $S$ are principal ideals.

So we can take arbitrary either $\supfun{f^{- 1}} \{ 0 \}$, $\langle
f^{- 1} \rangle \{ 1 \}$ or principal ideals $T$ and $S$.

In other words, we take $\supfun{f^{- 1}} \{ 0 \}$, $\langle f^{- 1}
\rangle \{ 1 \}$ arbitrary and indepently. So we have $\mathsf{pFCD}
(\mathfrak{A}; \mathfrak{B})$ equivalent to disjoint union of two instances of
$\mathfrak{A}$. So it a boolean lattice.

\section{Finite boolean lattices}

We can assume $\mathfrak{B}= \subsets B$ for a set $B$, $\card B =
n$. Then

$f \in \mathsf{pFCD} (\mathfrak{A}; \mathfrak{B}) \Leftrightarrow \forall X \in
\mathfrak{A}, Y \in \mathfrak{B}: (\supfun{f} X \nasymp Y
\Leftrightarrow \supfun{f^{- 1}} Y \nasymp X) \Leftrightarrow \forall X
\in \mathfrak{A}, Y \in \mathfrak{B}: (\exists i \in Y : i \in \langle f
\rangle X \Leftrightarrow \supfun{f^{- 1}} Y \nasymp X)$.

Having values of $\supfun{f^{- 1}} \{ i \}$ we can restore all $\langle
f^{- 1} \rangle Y$. [need this paragraph?]

Let $T_i = \setcond{ X \in \mathfrak{A} }{ i \in
\supfun{f} X }$.

Let now $T_i \in \subsets \mathfrak{A}$ be ideals. Can we restore $\langle
f \rangle$? Yes, because we know $i \in \supfun{f} X$ for every $X \in
\mathfrak{A}$.

So, it is equivalent to:
\begin{equation}
  \label{pfcond-x} \forall X \in \mathfrak{A}, Y \in \mathfrak{B}: (\exists i
  \in Y : X \in T_i \Leftrightarrow \supfun{f^{- 1}} Y \nasymp X) .
\end{equation}
\begin{lem}
  The formula (\ref{pfcond-x}) is equivalent to:
  \begin{equation}
    \label{pfcond-i} \forall X \in \mathfrak{A}, i \in B : (X \in T_i
    \Leftrightarrow \supfun{f^{- 1}} \{ i \} \nasymp X) .
  \end{equation}
\end{lem}

\begin{proof}
  
  \begin{description}
    \item[(\ref{pfcond-x})$\Rightarrow$(\ref{pfcond-i})] Just take $Y = \{ i
    \}$.
    
    \item[(\ref{pfcond-i})$\Rightarrow$(\ref{pfcond-x})] Let (\ref{pfcond-i})
    holds. Let also $X \in \mathfrak{A}, Y \in \mathfrak{B}$. Then $\langle
    f^{- 1} \rangle Y \nasymp X \Leftrightarrow \bigcup_{i \in Y} \langle f^{-
    1} \rangle \{ i \} \nasymp X \Leftrightarrow \exists i \in Y : \langle
    f^{- 1} \rangle \{ i \} \nasymp X \Leftrightarrow \exists i \in Y : X \in
    T_i$.
  \end{description}
\end{proof}

Further transforming: $\forall i \in B : T_i = \corestar \langle f^{- 1}
\rangle \{ i \}$.

So $\supfun{f^{- 1}} \{ i \}$ are arbitary elements of $\mathfrak{B}$
and $T_i$ are corresponding arbitrary principal ideals.

In other words, $\mathsf{pFCD} (\mathfrak{A}; \mathfrak{B}) \cong \mathfrak{A}
\amalg \ldots \amalg \mathfrak{A}$ ($\card B$ times). Thus $\mathsf{pFCD}
(\mathfrak{A}; \mathfrak{B})$ is a boolean lattice.

\section{About infinite case}

Let $\mathfrak{A}$ be a complete boolean lattice, $\mathfrak{B}$ be an
atomistic boolean lattice.

$f \in \mathsf{pFCD} (\mathfrak{A}; \mathfrak{B}) \Leftrightarrow \forall X \in
\mathfrak{A}, Y \in \mathfrak{B}: (\supfun{f} X \nasymp Y
\Leftrightarrow \supfun{f^{- 1}} Y \nasymp X) \Leftrightarrow \forall X
\in \mathfrak{A}, Y \in \mathfrak{B}: (\exists i \in \atoms Y : i \in
\atoms \supfun{f} X \Leftrightarrow \supfun{f^{- 1}} Y
\nasymp X)$.

Let $T_i = \setcond{ X \in \mathfrak{A} }{ i \in
\atoms \supfun{f} X }$.

$T_i$ is an ideal: Really: That it's an upper set is obvious. Let $P \cup Q
\in \setcond{ X \in \mathfrak{A} }{ i \in \atoms
\supfun{f} X }$. Then $i \in \atoms \supfun{f} (P
\cup Q) = \atoms \supfun{f} P \cup \atoms \supfun{f}
Q$; $i \in \supfun{f} P \vee i \in \supfun{f} Q$.

Let now $T_i \in \subsets \mathfrak{A}$ be ideals. Can we restore $\langle
f \rangle$? Yes, because we know $i \in \atoms \supfun{f} X$ for
every $X \in \mathfrak{A}$ and $\mathfrak{B}$ is atomistic.

So, it is equivalent to:
\begin{equation}
  \label{mpfcond-x} \forall X \in \mathfrak{A}, Y \in \mathfrak{B}: (\exists i
  \in \atoms Y : X \in T_i \Leftrightarrow \supfun{f^{- 1}} Y
  \nasymp X) .
\end{equation}
\begin{lem}
  The formula (\ref{mpfcond-x}) is equivalent to:
  \begin{equation}
    \label{mpfcond-i} \forall X \in \mathfrak{A}, i \in
    \atoms^{\mathfrak{B}} : (X \in T_i \Leftrightarrow \langle f^{- 1}
    \rangle i \nasymp X) .
  \end{equation}
\end{lem}

\begin{proof}
  
  \begin{description}
    \item[(\ref{mpfcond-x})$\Rightarrow$(\ref{mpfcond-i})] Let
    (\ref{mpfcond-x}) holds. Take $Y = i$. Then $\atoms Y = \{ i \}$ and
    thus $X \in T_i \Leftrightarrow \exists i \in \atoms Y : X \in T_i
    \Leftrightarrow \supfun{f^{- 1}} Y \nasymp X \Leftrightarrow
    \supfun{f^{- 1}} i \nasymp X$.
    
    \item[(\ref{mpfcond-i})$\Rightarrow$(\ref{mpfcond-x})] Let
    (\ref{pfcond-i}) holds. Let also $X \in \mathfrak{A}$, $Y \in \mathfrak{B}$.
    Then $\supfun{f^{- 1}} Y \nasymp X \Leftrightarrow \langle f^{- 1}
    \rangle \bigsqcup \atoms Y \nasymp X \Leftrightarrow \bigsqcup_{i
    \in \atoms Y} \supfun{f^{- 1}} i \nasymp X \Leftrightarrow
    \exists i \in \atoms Y : \supfun{f^{- 1}} i \nasymp X
    \Leftrightarrow \exists i \in \atoms Y : X \in T_i$.
  \end{description}
\end{proof}

Further equivalently transforming: $\forall i \in \atoms^{\mathfrak{B}}
: T_i = \corestar \supfun{f^{- 1}} i$.

So $\supfun{f^{- 1}} i$ are arbitary elements of $\mathfrak{B}$ and
$T_i$ are corresponding arbitrary principal ideals.

In other words, $\mathsf{pFCD} (\mathfrak{A}; \mathfrak{B}) \cong \coprod_{i \in
\card \atoms^{\mathfrak{B}}} \mathfrak{A}$. Thus $\mathsf{pFCD}
(\mathfrak{A}; \mathfrak{B})$ is a boolean lattice.

So finally we have a very weird theorem, which is a partial solution for the
above open problem (The weirdness is in its partiality and asymmetry):

\begin{thm}
  If $\mathfrak{A}$ is a complete boolean lattice and $\mathfrak{B}$ is an
  atomistic boolean lattice (or vice versa), then $\mathsf{pFCD} (\mathfrak{A};
  \mathfrak{B})$ is a boolean lattice.
\end{thm}

\cite{shmuely1974}~proves
``THEOREM 4.6. Let $A$, $B$ be bounded posets. $A \otimes B$ is a completely
distributive complete Boolean lattice iff $A$ and $B$ are completely distributive
Boolean lattices.'' (where $A \otimes B$ is equivalent to the set of Galois connections between~$A$ and~$B$) and other interesting results.

\section{Order and composition of Galois connections}

\fxwarning{Move above in the text.}

Following~\cite{tprod-dist-lat} we will denote the set of Galois connection between posets~$\mathfrak{A}$ and~$\mathfrak{B}$
as $\mathfrak{A}\otimes\mathfrak{B}$.

\begin{defn}
I will order Galois connections by the formula: $f\sqsubseteq g\Leftrightarrow f^{\ast}\sqsubseteq g^{\ast}$
(where $f^{\ast}\sqsubseteq g^{\ast}\Leftrightarrow\forall x\in\mathfrak{A}:f^{\ast}x\sqsubseteq g^{\ast}x$).
\end{defn}

\begin{obvious}
Galois connections $\mathfrak{A}\otimes\mathfrak{B}$ between two given posets form a poset.
\end{obvious}

\begin{prop}
$f\sqsubseteq g\Leftrightarrow f_{\ast}\sqsupseteq g_{\ast}$.
\end{prop}

\begin{proof}
It is enough to prove $f\sqsubseteq g\Rightarrow f_{\ast}\sqsupseteq g_{\ast}$ (the rest follows from the fact that a Galois connection is determined by one adjoint).

Really, let $f\sqsubseteq g$. Then $f_0^{\ast} \sqsubseteq f_1^{\ast}$ and thus:

$f_{0 \ast} (b) = \max \setcond{ x \in \mathfrak{A} }{
f_0^{\ast} x \sqsubseteq b }$, $f_{1 \ast} (b) = \max \setcond{ x \in
\mathfrak{A} }{ f_1^{\ast} x \sqsubseteq b }$.

Thus $f_{0 \ast} (b) \sqsupseteq f_{1 \ast} (b)$ for every $b\in\mathfrak{B}$ and so $f_{0 \ast} \sqsupseteq f_{1 \ast}$.
\end{proof}

\begin{defn}
Composition of Galois connections is defined by the formula:
$g\circ f=(g^{\ast}\circ f^{\ast};f_{\ast}\circ g_{\ast})$.
\end{defn}

\begin{prop}
Composition of Galois connections is a Galois connection.
\end{prop}

\begin{proof}
$g^{\ast}\circ f^{\ast}$ and $f_{\ast}\circ g_{\ast}$ are monotone as composition of monotone functions;
\[
(g^{\ast}\circ f^{\ast})x\sqsubseteq z \Leftrightarrow g^{\ast}f^{\ast}x\sqsubseteq z \Leftrightarrow
f^{\ast}x\sqsubseteq g_{\ast} z \Leftrightarrow x\sqsubseteq f_{\ast}g_{\ast} z \Leftrightarrow x\sqsubseteq(f_{\ast}\circ g_{\ast})z.
\]
\end{proof}

\begin{obvious}
Composition of Galois connections preserves order.
\end{obvious}

\section{The diagram}

\begin{thm}
\label{fcd-diagram}Let $A$ and~$B$ be fixed sets. The diagram at the figure~\ref{rels-dia} is
a commutative diagram (in category $\mathbf{Set}$), every arrow in
this diagram is an isomorphism. Every cycle in this diagram is an
identity. All ``parallel'' arrows are mutually inverse. All arrows preserve order (and thus are order isomorphisms).

For a Galois connection~$f$ I denote $f_0$ the lower adjoint and $f_1$ the upper adjoint.
For simplicity, in the diagram I equate $\subsets A$ and $\mathscr{T}A$.

\fxwarning{This theorem supersedes a theorem in ``Binary relations are pointfree funcoids'' in the master version of the book.
But there is also the theorem that their relationships preserve composition and reversal.}

\fxnote{Calculate what ``composition'' means when ``transferred'' between these kinds of objects.}

\begin{figure}[ht]
\caption{\label{rels-dia}}
\begin{tikzcd}[row sep=1cm, column sep=-1.0cm]
& \begin{tabular}{c}binary relations\\ between $A$ and $B$\end{tabular}
\arrow[rd, shift left, "\Psi_1^{-1}"]
\arrow[ld, shift left, "\Psi_2"] \\
\begin{tabular}{c}pointfree funcoids\\ between\\ $\subsets A$ and $\subsets B$\end{tabular}
\arrow[ru, shift left, "\Psi_2^{-1}"]
\arrow[rr, shift left, "\Psi_3"]
\arrow[rd, shift left, "\Psi_4"]
& & \begin{tabular}{c}antitone Galois\\ connections\\ between\\ $\subsets A$ and $\subsets B$\end{tabular}
\arrow[lu, shift left, "\Psi_1"]
\arrow[ll, shift left, "\Psi_3^{-1}"]
\arrow[ld, leftrightarrow, "\Psi_5=\Psi_5^{-1}"]
\\
& \begin{tabular}{c}Galois connections\\ between $\subsets A$ and $\subsets B$\end{tabular}
\arrow[lu, shift left, "\Psi_4^{-1}"]
\end{tikzcd}

\begin{flushleft}
\begin{description}
\item[$\Psi_1$] $f\mapsto\setcond{(x;y)}{y\in f_0\{x\}}=\setcond{(x;y)}{x\in f_1\{y\}}$
\item[$\Psi_1^{-1}$] $r\mapsto\left(X\mapsto\setcond{y\in B}{\forall x\in X:x\mathrel{r}y}; Y\mapsto\setcond{x\in A}{\forall y\in Y:x\mathrel{r}y}\right)$
\item[$\Psi_2$] $r\mapsto(\subsets A;\subsets B;\rsupfun{r};\rsupfun{r^{-1}})$
\item[$\Psi_2^{-1}$] $f\mapsto\setcond{(x;y)}{\{x\}\suprel{f}\{y\}}$
\item[$\Psi_3$] $f\mapsto\left(X\mapsto\bigsqcap_{x\in\mathscr{T} X\setminus\{\bot\}}\supfun{f}x;Y\mapsto\bigsqcap_{y\in\mathscr{T} Y\setminus\{\bot\}}\supfun{f^{-1}}y\right)=
  \left(X\mapsto\bigsqcap_{x\in X}\supfun{f}\{x\};Y\mapsto\bigsqcap_{y\in Y}\supfun{f^{-1}}\{y\}\right)$
\item[$\Psi_3^{-1}$] $f\mapsto\left(\subsets A;\subsets B;X\mapsto\bigsqcup_{x\in\mathscr{T}X\setminus\{\bot\}}f_0 x;Y\mapsto\bigsqcup_{y\in\mathscr{T}Y\setminus\{\bot\}}f_1 y\right)=
  \left(\subsets A;\subsets B;X\mapsto\bigsqcup_{x\in X}f_0\{x\};Y\mapsto\bigsqcup_{y\in Y}f_1\{y\}\right)$
\item[$\Psi_4$] $f\mapsto\left(X\mapsto\lnot\bigsqcap_{x\in\mathscr{T} X\setminus\{\bot\}}\supfun{f}x;Y\mapsto\bigsqcap_{y\in\mathscr{T} Y\setminus\{\bot\}}\supfun{f^{-1}}\lnot y\right)=
  \left(X\mapsto\bigsqcup_{x\in\mathscr{T}X\setminus\{\bot\}}\lnot\supfun{f}x;Y\mapsto\bigsqcap_{y\in\mathscr{T} Y\setminus\{\bot\}}\supfun{f^{-1}}\lnot y\right)=
  \left(X\mapsto\lnot \bigsqcap_{x\in X}\supfun{f}\{x\};Y\mapsto\bigsqcap_{y\in Y}\supfun{f^{-1}}\lnot \{y\}\right)=
  \left(X\mapsto\bigsqcup_{x\in X}\lnot\supfun{f}\{x\};Y\mapsto\bigsqcap_{y\in Y}\supfun{f^{-1}}\lnot \{y\}\right)$
\item[$\Psi_4^{-1}$] $f\mapsto\left(\subsets A;\subsets B;X\mapsto\bigsqcup_{x\in\mathscr{T}X\setminus\{\bot\}}\lnot f_0 x;Y\mapsto\bigsqcup_{y\in\mathscr{T}Y\setminus\{\bot\}}f_1\lnot y\right)=
  \left(\subsets A;\subsets B;X\mapsto\lnot\bigsqcap_{x\in\mathscr{T}X\setminus\{\bot\}}f_0 x;Y\mapsto\bigsqcup_{y\in\mathscr{T}Y\setminus\{\bot\}}f_1\lnot y\right)=
  \left(\subsets A;\subsets B;X\mapsto\bigsqcup_{x\in X}\lnot f_0\{x\};Y\mapsto\bigsqcup_{y\in Y}f_1\lnot\{y\}\right)=
  \left(\subsets A;\subsets B;X\mapsto\lnot\bigsqcap_{x\in X}f_0\{x\};Y\mapsto\bigsqcup_{y\in Y}f_1\lnot\{y\}\right)$
\item[$\Psi_5=\Psi_5^{-1}$] $f\mapsto(\mathord{\lnot}\circ f_0;f_1\circ\mathord{\lnot})$
\end{description}
\end{flushleft}

\end{figure}
\end{thm}

\begin{proof}
First, note that despite we use the notation~$\Psi_i^{-1}$, it is not yet proved that~$\Psi_i^{-1}$ is the inverse of~$\Psi_i$. We will prove it below.

Now prove a list of claims. First concentrate on the upper ``triangle'' of the diagram (the lower one will be considered later).

\begin{claim}
$\setcond{(x;y)}{y\in f_0\{x\}}=\setcond{(x;y)}{x\in f_1\{y\}}$ when $f$ is an antitone Galois connection between~$\subsets A$ and~$\subsets B$.
\end{claim}
\begin{claimproof}
$y\in f_0\{x\}\Leftrightarrow\{y\}\sqsubseteq f_0\{x\}\Leftrightarrow\{x\}\sqsubseteq f_1\{y\}\Leftrightarrow x\in f_1\{y\}$.
\end{claimproof}

\begin{claim}
$\scriptstyle \left(X\mapsto\bigsqcap_{x\in\mathscr{T} X\setminus\{\bot\}}\supfun{f}x;Y\mapsto\bigsqcap_{y\in\mathscr{T} Y\setminus\{\bot\}}\supfun{f^{-1}}y\right)=
\left(X\mapsto\bigsqcap_{x\in X}\supfun{f}\{x\};Y\mapsto\bigsqcap_{y\in Y}\supfun{f^{-1}}\{y\}\right)$
when $f$ is a pointfree funcoid between~$\subsets A$ and~$\subsets B$.
\end{claim}
\begin{claimproof}
It is enough to prove $\bigsqcap_{x\in\mathscr{T} X\setminus\{\bot\}}\supfun{f}x = \bigsqcap_{x\in X}\supfun{f}\{x\}$ (the rest follows from symmetry).
$\bigsqcap_{x\in\mathscr{T} X\setminus\{\bot\}}\supfun{f}x \sqsubseteq \bigsqcap_{x\in X}\supfun{f}\{x\}$ because
$\mathscr{T} X\setminus\{\bot\}\supseteq\setcond{\{x\}}{x\in X}$.
$\bigsqcap_{x\in\mathscr{T} X\setminus\{\bot\}}\supfun{f}x \sqsupseteq \bigsqcap_{x\in X}\supfun{f}\{x\}$ because
if $x\in\mathscr{T} X\setminus\{\bot\}$ then we can take $x'\in x$ that is $\{x'\}\subseteq x$ and thus
$\supfun{f}x \sqsupseteq \supfun{f}\{x'\}$, so
$\bigsqcap_{x\in\mathscr{T} X\setminus\{\bot\}}\supfun{f}x \sqsupseteq \bigsqcap_{x\in\mathscr{T} X\setminus\{\bot\}}\supfun{f}\{x'\} \sqsupseteq
\bigsqcap_{x\in X}\supfun{f}\{x\}$.
\end{claimproof}

\begin{flushleft}
\begin{claim}
$\left(\subsets A;\subsets B;X\mapsto\bigsqcup_{x\in\mathscr{T}X\setminus\{\bot\}}f_0 x;Y\mapsto\bigsqcup_{y\in\mathscr{T}Y\setminus\{\bot\}}f_1 y\right) =
\left(\subsets A;\subsets B;X\mapsto\bigsqcup_{x\in X}f_0\{x\};Y\mapsto\bigsqcup_{y\in Y}f_1\{y\}\right)$
when $f$ is an antitone Galois connection between~$\subsets A$ and~$\subsets B$.
\end{claim}
\end{flushleft}
\begin{claimproof}
It is enough to prove $\bigsqcup_{x\in\mathscr{T}X\setminus\{\bot\}}f_0 x=\bigsqcup_{x\in X}f_0\{x\}$ (the rest follows from symmetry).
We have $\bigsqcup_{x\in\mathscr{T}X\setminus\{\bot\}}f_0 x\sqsupseteq\bigsqcup_{x\in X}f_0\{x\}$ because $\{x\}\in\mathscr{T}X\setminus\{\bot\}$.
Let $x\in\mathscr{T}X\setminus\{\bot\}$. Take $x'\in X$. We have $f_0 x\sqsubseteq f_0\{x'\}$ and thus
$f_0 x\sqsubseteq \bigsqcup_{x\in X}f_0\{x\}$. So $\bigsqcup_{x\in\mathscr{T}X\setminus\{\bot\}}f_0 x\sqsubseteq\bigsqcup_{x\in X}f_0\{x\}$.
\end{claimproof}

\begin{claim}
$\Psi_3^{-1} = \Psi_2\circ\Psi_1$.
\end{claim}
\begin{claimproof}
$\Psi_2\Psi_1 f = \left(\subsets A;\subsets B;X\mapsto\setcond{y}{\exists x\in X:(x;y)\in\Psi_1 f};Y\mapsto\setcond{x}{\exists y\in Y:(x;y)\in\Psi_1 f}\right) =
\left(\subsets A;\subsets B;X\mapsto\setcond{y}{\exists x\in X:y\in f_0\{x\}};Y\mapsto\setcond{x}{\exists y\in Y:x\in f_1\{y\}}\right) =
\left(\subsets A;\subsets B;X\mapsto\bigsqcup_{x\in X}f_0\{x\};Y\mapsto\bigsqcup_{y\in Y}f_1\{y\}\right) =
\Psi_3^{-1} f$.
\end{claimproof}

\begin{claim}
$\Psi_3 = \Psi_1^{-1}\circ\Psi_2^{-1}$.
\end{claim}
\begin{claimproof}
$\Psi_1^{-1}\Psi_2^{-1} f = 
\left(X\mapsto\setcond{y\in B}{\forall x\in X:\{x\}\suprel{f}\{y\}}; Y\mapsto\setcond{x\in A}{\forall y\in Y:\{x\}\suprel{f}\{y\}}\right) =
\left(X\mapsto\setcond{y\in B}{\forall x\in X:y\in\supfun{f}\{x\}}; Y\mapsto\setcond{x\in A}{\forall y\in Y:x\in\supfun{f^{-1}}\{y\}}\right) =
\left(X\mapsto\bigsqcap_{x\in X}\supfun{f}\{x\};Y\mapsto\bigsqcap_{y\in Y}\supfun{f^{-1}}\{y\}\right) = \Psi_3 f$.
\end{claimproof}

\begin{claim}
$\Psi_1$ maps antitone Galois connections between~$\subsets A$ and~$\subsets B$ into binary relations between~$A$ and~$B$.
\end{claim}
\begin{claimproof}
Obvious.
\end{claimproof}

\begin{claim}
$\Psi_1^{-1}$ maps binary relations between~$A$ and~$B$ into antitone Galois connections between~$\subsets A$ and~$\subsets B$.
\end{claim}
\begin{claimproof}
We need to prove $Y\subseteq\setcond{y\in B}{\forall x\in X:x\mathrel{r}y}\Leftrightarrow X\subseteq\setcond{x\in A}{\forall y\in Y:x\mathrel{r}y}$.
After we equivalently rewrite it:
\[\forall y\in Y \forall x\in X:x\mathrel{r}y\Leftrightarrow\forall x\in X\forall y\in Y:x\mathrel{r}y\]
it becomes obvious.
\end{claimproof}

\begin{claim}
$\Psi_2$ maps binary relations between~$A$ and~$B$ into pointfree funcoids between~$\subsets A$ and~$\subsets B$.
\end{claim}
\begin{claimproof}
We need to prove that $f=(\subsets A;\subsets B;\supfun{f};\supfun{f^{-1}})$ is a pointfree funcoids that is $Y\nasymp\supfun{f}X\Leftrightarrow X\nasymp\supfun{f^{-1}}Y$. Really, for every
$X\in\mathscr{T}A$, $Y\in\mathscr{T}B$ 
\begin{multline*}
Y\nasymp\supfun fX\Leftrightarrow Y\nasymp\rsupfun rX\Leftrightarrow Y\nasymp\supfun rX\Leftrightarrow\\
X\nasymp\supfun{r^{-1}}Y\Leftrightarrow X\nasymp\rsupfun{r^{-1}}Y\Leftrightarrow X\nasymp\supfun{f^{-1}}Y.
\end{multline*}
\end{claimproof}

\begin{claim}
$\Psi_2^{-1}$ maps pointfree funcoids between~$\subsets A$ and~$\subsets B$ into binary relations between~$A$ and~$B$.
\end{claim}
\begin{claimproof}
Suppose $f\in\mathsf{pFCD}(\mathscr{T}A;\mathscr{T}B)$ and prove
that the relation defined by the formula~$\Psi_2^{-1}$ exists.
To prove it, it's enough to show that $y\in\supfun f\{x\}\Leftrightarrow x\in\supfun{f^{-1}}\{y\}$.
Really, 
\[
y\in\supfun f\{x\}\Leftrightarrow\{y\}\nasymp\supfun f\{x\}\Leftrightarrow\{x\}\nasymp\supfun{f^{-1}}\{y\}\Leftrightarrow x\in\supfun{f^{-1}}\{y\}.
\]
\end{claimproof}

\begin{claim}
$\Psi_3$ maps pointfree funcoids between~$\subsets A$ and~$\subsets B$ into antitone Galois connections between~$\subsets A$ and~$\subsets B$.
\end{claim}
\begin{claimproof}
Because $\Psi_3 = \Psi_1^{-1}\circ\Psi_2^{-1}$.
\end{claimproof}

\begin{claim}
$\Psi_3^{-1}$ maps antitone Galois connections between~$\subsets A$ and~$\subsets B$ into pointfree funcoids between~$\subsets A$ and~$\subsets B$.
\end{claim}
\begin{claimproof}
Because $\Psi_3^{-1} = \Psi_2\circ\Psi_1$.
\end{claimproof}

\begin{claim}
$\Psi_2$ and $\Psi_2^{-1}$ are mutually inverse.
\end{claim}
\begin{claimproof}
Let $r_{0}\in\subsets(A\times B)$ and $f\in\mathsf{pFCD}(\mathscr{T}A;\mathscr{T}B)$
corresponds to~$r_{0}$ by the formula~$\Psi_2$; let $r_{1}\in\subsets(A\times B)$
corresponds to~$f$ by the formula~$\Psi_2^{-1}$. Then $r_{0}=r_{1}$
because 
\[
(x;y)\in r_{0}\Leftrightarrow y\in\rsupfun{r_{0}}\{x\}\Leftrightarrow y\in\supfun f\{x\}\Leftrightarrow(x;y)\in r_{1}.
\]

Let now $f_{0}\in\mathsf{pFCD}(\mathscr{T}A;\mathscr{T}B)$ and $r\in\subsets(A\times B)$
corresponds to~$f_{0}$ by the formula~$\Psi_2^{-1}$; let $f_{1}\in\mathsf{pFCD}(\mathscr{T}A;\mathscr{T}B)$
corresponds to~$r$ by the formula~$\Psi_2$. Then $(x;y)\in r\Leftrightarrow y\in\supfun{f_{0}}\{x\}$
and $\supfun{f_{1}}=\rsupfun r$; thus 
\[
y\in\supfun{f_{1}}\{x\}\Leftrightarrow y\in\rsupfun r\{x\}\Leftrightarrow(x;y)\in r\Leftrightarrow y\in\supfun{f_{0}}\{x\}.
\]
So $\supfun{f_{0}}=\supfun{f_{1}}$. Similarly $\supfun{f_{0}^{-1}}=\supfun{f_{1}^{-1}}$.
\end{claimproof}

\begin{claim}
$\Psi_1$ and $\Psi_1^{-1}$ are mutually inverse.
\end{claim}
\begin{claimproof}
Let $r_0\in\subsets(A\times B)$ and $f\in\mathscr{T}A\otimes\mathscr{T}B$
corresponds to~$r_{0}$ by the formula~$\Psi_1^{-1}$; let $r_{1}\in\subsets(A\times B)$
corresponds to~$f$ by the formula~$\Psi_1$. Then $r_{0}=r_{1}$ because
\[
(x;y)\in r_1 \Leftrightarrow y\in f_0\{x\} \Leftrightarrow y\in\setcond{y\in B}{x\mathrel{r_0}y} \Leftrightarrow x\mathrel{r_0}y.
\]

Let now $f_{0}\in\mathscr{T}A\otimes\mathscr{T}B$ and $r\in\subsets(A\times B)$
corresponds to~$f_{0}$ by the formula~$\Psi_1$; let $f_{1}\in\mathscr{T}A\otimes\mathscr{T}B$
corresponds to~$r$ by the formula~$\Psi_1^{-1}$. Then $f_0=f_1$ because
\begin{multline*}
f_{10} X = \setcond{y\in B}{\forall x\in X:x\mathrel{r}y} = \setcond{y\in B}{\forall x\in X:y\in f_{00}\{x\}} = \\
f_{00}\{x\} = \text{\fxwarning{explicit proof}} = \bigsqcap_{x\in X}f_{00}\{x\} = f_{00}X.
\end{multline*}
\end{claimproof}

\begin{claim}
$\Psi_3$ and $\Psi_3^{-1}$ are mutually inverse.
\end{claim}
\begin{claimproof}
Because $\Psi_3^{-1} = \Psi_2\circ\Psi_1$ and $\Psi_3 = \Psi_1^{-1}\circ\Psi_2^{-1}$
and that $\Psi_2^{-1}$ is the inverse of $\Psi_2$ and $\Psi_3^{-1}$ is the inverse of $\Psi_3$ were proved above.
\end{claimproof}

Now switch to the lower ``triangle'':

\begin{flushleft}
\begin{claim}
$\left(X\mapsto\bigsqcap_{x\in\mathscr{T}X\setminus\{\bot\}}f_0\lnot x;Y\mapsto\bigsqcap_{y\in\mathscr{T}Y\setminus\{\bot\}}f_1\lnot y\right)=\left(X\mapsto\bigsqcap_{x\in X}f_1\lnot\{x\};Y\mapsto\bigsqcap_{y\in Y}f_1\lnot\{y\}\right)$.
\end{claim}
\end{flushleft}
\begin{claimproof}
It is enough to prove $\bigsqcap_{x\in\mathscr{T}X\setminus\{\bot\}}f_0\lnot x = \bigsqcap_{x\in X}f_1\lnot\{x\}$ for a Galois connection~$f$
(the rest follows from symmetry).

$\bigsqcap_{x\in\mathscr{T}X\setminus\{\bot\}}f_0\lnot x \sqsupseteq \bigsqcap_{x\in X}f_1\lnot\{x\}$ because $\{x\}\in\mathscr{T}X\setminus\{\bot\}$.
If $x\in\mathscr{T}X\setminus\{\bot\}$ then there exists $x'\in\{x\}$ and thus $f_1\lnot\{x'\}\sqsupseteq f_0\lnot x$. Thus
$\bigsqcap_{x\in\mathscr{T}X\setminus\{\bot\}}f_0\lnot x \sqsubseteq f_1\lnot x$ and so
$\bigsqcap_{x\in\mathscr{T}X\setminus\{\bot\}}f_0\lnot x \sqsubseteq \bigsqcap_{x\in X}f_1\lnot\{x\}$.
\end{claimproof}

\begin{claim}
$\Psi_5$ is self-inverse.
\end{claim}
\begin{claimproof}
Obvious.
\end{claimproof}

\begin{claim}
$\Psi_4 = \Psi_5\circ\Psi_3$.
\end{claim}
\begin{claimproof}
Easily follows from symmetry.
\end{claimproof}

\begin{claim}
$\Psi_4^{-1} = \Psi_3^{-1}\circ\Psi_5^{-1}$.
\end{claim}
\begin{claimproof}
Easily follows from symmetry.
\end{claimproof}

\begin{claim}
$\Psi_4$ and $\Psi_4^{-1}$ are mutually inverse.
\end{claim}
\begin{claimproof}
From two above claims and the fact that
$\Psi_3^{-1}$ is the inverse of $\Psi_3$ and $\Psi_5^{-1}$ is the inverse of $\Psi_5$ proved above.
\end{claimproof}

Note that now we have proved that $\Psi_i$ and $\Psi_i^{-1}$ are mutually inverse for all $i=1,2,3,4,5$.

\begin{claim}
For every path of the diagram on figure~\ref{rels-dia2} started with the circled node, the corresponding morphism is with which the node is labeled.
\begin{figure}[ht]
\caption{\label{rels-dia2}}
\begin{tikzcd}[row sep=1cm, column sep=0.5cm]
& \circled{1}
\arrow[rd, shift left, "\Psi_1^{-1}"]
\arrow[ld, shift left, "\Psi_2"] \\
\Psi_2
\arrow[ru, shift left, "\Psi_2^{-1}"]
\arrow[rr, shift left, "\Psi_3"]
\arrow[rd, shift left, "\Psi_4"]
& & \Psi_1^{-1}
\arrow[lu, shift left, "\Psi_1"]
\arrow[ll, shift left, "\Psi_3^{-1}"]
\arrow[ld, leftrightarrow, "\Psi_5=\Psi_5^{-1}"]
\\
& \Psi_5\circ\Psi_1^{-1}
\arrow[lu, shift left, "\Psi_4^{-1}"]
\end{tikzcd}
\end{figure}
\end{claim}
\begin{claimproof}
Take into account that $\Psi_3^{-1} = \Psi_2\circ\Psi_1$, $\Psi_4 = \Psi_5\circ\Psi_3$
and thus also $\Psi_4\circ\Psi_2 = \Psi_5\circ\Psi_1^{-1}$.
Now prove it by induction on path length.
\end{claimproof}

\begin{claim}
Every cycle in the diagram~\ref{rels-dia} is identity.
\end{claim}
\begin{claimproof}
For cycles starting at the top node it follows from the previous claim.
For arbitrary cycles it follows from theorem~\bookref{rehash-isos}.
\end{claimproof}

\begin{claim}
Diagram~\ref{rels-dia} is commutative.
\end{claim}
\begin{claimproof}
From the previous claim.
\end{claimproof}

\end{proof}

Let $\Phi$ map a pointfree funcoid whose first component is~$c$ into the Galois connection whose lower adjoint is~$c$.
Then $\Phi$ is an isomorphism (theorem~\ref{bfunc-is-adj}) and
$\Phi^{-1}$ maps a Galois connection whose lower adjoint is~$c$ into the pointfree funcoid whose first component is~$c$.

Informally speaking, $\Phi$ replaces a relation~$r$ with its complement relations~$\lnot r$. Formally:

\begin{prop}
~
\begin{enumerate}
\item For every path~$P$ in the diagram~\ref{rels-dia} from binary relations between $A$ and $B$
to pointfree funcoids between $\subsets A$ and $\subsets B$
and every path~$Q$ in the diagram~\ref{rels-dia} from
Galois connections between $\subsets A$ and $\subsets B$
to binary relations between $A$ and $B$,
we have $Q\Phi P r = \lnot r$.

\item For every path~$Q$ in the diagram~\ref{rels-dia} from binary relations between $A$ and $B$
to pointfree funcoids between $\subsets A$ and $\subsets B$
and every path~$P$ in the diagram~\ref{rels-dia}
from Galois connections between $\subsets A$ and $\subsets B$
to binary relations between $A$ and $B$,
we have $P\Phi^{-1} Q r = \lnot r$.
\end{enumerate}
\end{prop}

\begin{proof}
We will prove only the second ($P\circ \Phi^{-1}\circ Q = \lnot$), because the first ($Q\circ\Phi\circ P= \lnot$)
can be obtained from it by inverting the morphisms (and variable replacement).

Because the diagram is commutative, it is enough to prove it for some fixed~$P$ and~$Q$.
For example, we will prove $\Psi_2^{-1} \Phi^{-1} \Psi_4 \Psi_2 r = \neg r$.

$\Psi_4 \Psi_2 r = \left( X \mapsto \neg \bigsqcap_{x \in X} \rsuprel{r}
\{ x \} ; Y \mapsto \bigsqcap_{y \in Y} \rsuprel{r} \neg \{ y \} \right)$.

$\Phi^{-1} \Psi_4 \Psi_2 r$ is pointfree funcoid $f$ with $\supfun{f}
= X \mapsto \neg \bigsqcap_{x \in X} \rsupfun{r} \{ x \}$

$\Psi_2^{-1} \Phi^{-1} \Psi_4 \Psi_2 r$ is the relation consisting of $(x ;
y)$ such that $\{ x \} \suprel{f} \{ y \}$ what is equivalent to: $\{ y \}
\nasymp \supfun{f} \{ x \}$; $\{ y \} \nasymp \neg \rsupfun{r} \{ x \}$; $\{ y \} \nsqsubseteq \rsupfun{r} \{ x \}$; $y \notin \rsupfun{r} \{ x \}$.

So $\Psi_2^{-1} \Phi^{-1} \Psi_4 \Psi_2 r = \neg r$.
\end{proof}

\begin{prop}
$\Phi$ and $\Phi^{-1}$ preserve composition.
\end{prop}

\begin{proof}
By definitions of compositions and the fact that both pointfree funcoids and Galois connections are determined by the first component.
\end{proof}