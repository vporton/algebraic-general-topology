\chapter{Bases on filtrators}

\begin{lem}
If $S$ is an upper set of principal funcoids, then
$\bigsqcap^{\mathsf{FCD}} (S\cap\Gamma)=\bigsqcap^{\mathsf{FCD}} S$.
\end{lem}

\begin{proof}
  Let's prove $\bigsqcap^{\mathsf{FCD}} (S\cap\Gamma) = \bigsqcap^{\mathsf{FCD}} S$.
  
  $\bigsqcap^{\mathsf{FCD}} (S\cap\Gamma) \sqsupseteq \bigsqcap^{\mathsf{FCD}} S$ is obvious.
  
  $\bigsqcap^{\mathsf{FCD}} S = \bigsqcap^{\mathsf{FCD}} \bigsqcap^{\mathsf{FCD}}_{K\in S} T_K \sqsupseteq \bigsqcap^{\mathsf{FCD}} (S\cap\Gamma)$.
  where $T_K\in\subsets (S\cap\Gamma)$.
  So $\bigsqcap^{\mathsf{FCD}} (S\cap\Gamma) = \bigsqcap^{\mathsf{FCD}} S$.
\end{proof}

In this chapter I consider generalization of filter bases
for the filtrator of funcoids (and more general filtrators).

\fxwarning{Base must be nonempty.}

\begin{defn}
  A set $S$ of binary relations is a \emph{base} of a funcoid $f$ when all elements
  of $S$ are above $f$ and $\forall X \in \up f \exists T \in S : T
  \sqsubseteq X$.
\end{defn}

\begin{prop}
  A set $S$ of binary relations is a base of a funcoid iff it is a base of
  $\bigsqcap^{\mathsf{FCD}} S$.
\end{prop}

\begin{proof}
  ~
  \begin{description}
    \item[$\Leftarrow$] Obvious.
    
    \item[$\Rightarrow$] Let $S$ be a base of funcoid $f$. All elements of $S$
    are above $f$. So $\bigsqcap^{\mathsf{FCD}} S \sqsupseteq f$. We
    have $\forall X \in \up f \exists T \in S : T \sqsubseteq X$ and
    thus $\forall X \in \up \bigsqcap^{\mathsf{FCD}} S \exists T
    \in S : T \sqsubseteq X$. To finish the proof note that all elements of
    $S$ are above $\bigsqcap^{\mathsf{FCD}} S$.
  \end{description}
\end{proof}

\begin{prop}
There exists a funcoid~$f$ such that $\up f=S$ iff $S$ is a funcoid base and is an upper set
(for every set~$S$ of binary relations).
\end{prop}

\begin{proof}
??
\end{proof}

\begin{thm}
  If $S$ is a filter base on the set of binary relations then $S$ is a base of
  $\bigsqcap^{\mathsf{FCD}} S$.
\end{thm}

First prove a special case of our theorem to get the idea:

\begin{example}
  Take $S = \setcond{
  \setcond{ (x, y) }{ | x - y | < \varepsilon }}{ \varepsilon > 0 }$ and $K = \setcond{ (x, y) }{
  | x - y | < \exp x }$ where $x$ and $y$ range real
  numbers. Then $K \notin \up \bigsqcap^{\mathsf{FCD}} S$.
\end{example}

\begin{proof}
  Take a nontrivial ultrafilter $x$ on $\mathbb{R}$. We can for simplicity
  assume $x \sqsubseteq \mathbb{Z}$.
  
  $\supfun{\bigsqcap^{\mathsf{FCD}} S} x =
  \bigsqcap^{\mathscr{F}}_{L \in S} \supfun{L} x =
  \bigsqcap^{\mathscr{F}}_{L \in S, X \in \up x} \rsupfun{L} X =
  \bigsqcap^{\mathscr{F}}_{\varepsilon > 0, X \in \up
  x} \bigsqcup_{\alpha \in X}] \alpha - \varepsilon ; \alpha + \varepsilon [$.
  
  $\supfun{K} x = \bigsqcap^{\mathscr{F}}_{X \in \up x} \rsupfun{K} X =
  \bigsqcap^{\mathscr{F}}_{X \in \up x}
  \bigsqcup_{\alpha \in X}] \alpha - \exp \alpha ; \alpha + \exp \alpha [$.
  
  Suppose for the contrary that $\supfun{K} x \sqsupseteq \supfun{
  \bigsqcap^{\mathsf{FCD}} S } x$.
  
  Then
  
  $\bigsqcup_{\alpha \in X}] \alpha - \exp \alpha ; \alpha + \exp \alpha
  [\sqsupseteq \bigsqcap^{\mathscr{F}}_{\varepsilon > 0, X \in \up x}
  \bigsqcup_{\alpha \in X}] \alpha - \varepsilon ; \alpha + \varepsilon [$ for
  every $X \in \up x$
  
  thus by properties of generalized filter bases ($\setcond{ \bigsqcup_{\alpha
  \in X}] \alpha - \varepsilon ; \alpha + \varepsilon [ }{
  \varepsilon > 0 }$ is a filter base and even a chain)
  
  $\bigsqcup_{\alpha \in X}] \alpha - \exp \alpha ; \alpha + \exp \alpha
  [\sqsupseteq \bigsqcap^{\mathscr{F}}_{X \in \up x} \bigsqcup_{\alpha
  \in X}] \alpha - \varepsilon ; \alpha + \varepsilon [$ for some $\varepsilon
  > 0$ and thus
  
  by properties of generalized filter bases ($\setcond{ \bigsqcup_{\alpha \in
  X}] \alpha - \varepsilon ; \alpha + \varepsilon [ }{
  X \in \up x }$ is a filter base) for some $X' \in \up x$
  
  $\bigsqcup_{\alpha \in X}] \alpha - \exp \alpha ; \alpha + \exp \alpha
  [\sqsupseteq \bigsqcup_{\alpha \in X'}] \alpha - \varepsilon ; \alpha +
  \varepsilon [$
  
  what is impossible by the fact that $\exp \alpha$ goes infinitely small as
  $\alpha \rightarrow - \infty$ and the fact that we can take $X =\mathbb{Z}$
  for some $x$.
\end{proof}

Now prove the general case:

\begin{proof}
  Take an ultrafilter $x$.
  
  $\supfun{\bigsqcap^{\mathsf{FCD}} S} x =
  \bigsqcap^{\mathscr{F}}_{L \in S} \supfun{L} x =
  \bigsqcap^{\mathscr{F}}_{L \in S, X \in \up x} \rsupfun{L} X$.
  
  $\supfun{K} x = \bigsqcap^{\mathscr{F}}_{X \in \up x} \rsupfun{K}X$.
  
  Suppose that $K \in \up \bigsqcap^{\mathsf{FCD}} S$ and thus
  $\supfun{K} x \sqsupseteq \supfun{
  \bigsqcap^{\mathsf{FCD}} S } x$.
  
  Then
  
  $\rsupfun{K} X \sqsupseteq \bigsqcap^{\mathscr{F}}_{L \in S, X
  \in \up x} \rsupfun{L} X$ for every $X \in \up x$
  
  thus by properties of generalized filter bases ($\setcond{ \rsupfun{L}X
  }{ L \in S }$ is a filter base)
  
  $\rsupfun{K} X \sqsupseteq \bigsqcap^{\mathscr{F}}_{X \in
  \up x} \rsupfun{L} X$ for some $L \in S$ and thus
  
  by properties of generalized filter bases ($\setcond{ \rsupfun{L}
  X }{ X \in \up x }$ is a filter base) for some $X' \in \up x$
  
  $\rsupfun{K} X \sqsupseteq \rsupfun{L} X'
  \sqsupseteq \supfun{L} x$
  
  So $\supfun{K} x \sqsupseteq \supfun{L} x$ because this
  equality holds for every $X \in \up x$. Therefore $K \sqsupseteq L$.
\end{proof}

\begin{prop}
$\up f$ is a base of~$f$ for every funcoid~$f$.
\end{prop}

\begin{proof}
Denote $S=\up f$.
$\bigsqcap^{\mathsf{FCD}} S = f$.
If $X \in \up \bigsqcap^{\mathsf{FCD}} S$ then $X \in \up
f$ and then $X \in S$ and thus $S$ is a base of a funcoid because $X
\sqsubseteq X$.
\end{proof}

\begin{example}
A base of a funcoid which is not a filter base.
\end{example}

\begin{proof}
Consider $f=\id^{\mathsf{FCD}}_{\Omega}$. We know that $\up f$ is not a
filter base. But it is a base of a funcoid accordingly the last proposition.
\end{proof}

\begin{prop}
$f = \bigsqcap^{\mathsf{FCD}} S$ for every base~$S$ of a funcoid~$f$.
\end{prop}

\begin{proof}
$f$ is an lower bound of $S$ by definition. So $f \sqsubseteq
\bigsqcap^{\mathsf{FCD}} S$.

We have $\forall X \in \up f \exists T \in S : T \sqsubseteq X$ thus
$\bigsqcap^{\mathsf{FCD}} S \sqsubseteq \bigsqcap^{\mathsf{FCD}}
\up f = f$.

So $f = \bigsqcap^{\mathsf{FCD}} S$.
\end{proof}

\begin{xca}
Prove that a set $S$ is a filter (on some set) iff
\[ \forall X_0,\dots,X_n\in S:\up(X_0\sqcap\dots\sqcap X_n)\subseteq S \]
for every natural~$n$.
\end{xca}

A similar statement does \emph{not} hold for funcoids:

\begin{example}
For a set $S$ of binary relations
\[ \forall X_0,\dots,X_n\in S:\up(X_0\sqcap^{\mathsf{FCD}}\dots\sqcap^{\mathsf{FCD}} X_n)\subseteq S \]
does not imply that there exists funcoid~$f$ such that $S=\up f$.
\end{example}

\begin{proof}
Take $S_0 = \up 1^{\mathsf{FCD}}$ (where $1^{\mathsf{FCD}}$ is the identity funcoid on any infinite set)
and $S_1 = \bigcup_{F\in S_0} \setcond{\up G}{G\in\up^{\Gamma} F}$ (that is
$S_1 = \bigcup_{F\in\up^{\Gamma} 1^{\mathsf{FCD}}}\up F$).

Both $S_0$ and $S_1$ are upper sets. $S_0\ne S_1$ because $1^{\mathsf{FCD}}\in S_0$ and $1^{\mathsf{FCD}}\notin S_1$.

The formula in the example works for $S=S_0$ because $X_0,\dots,X_n\in \up 1^{\mathsf{FCD}}$. It also holds for $S=S_1$ by the
following reason:

Suppose $X_0,\dots,X_n\in S_1$. Then $X_i\sqsupseteq F_i$ where $F_i\in S_0$.
Consequently (take into account that $\Gamma$ is a sublattice of $\mathsf{FCD}$)
$X_0,\dots,X_n \sqsupseteq F_0\sqcap^{\mathsf{FCD}}\dots\sqcap^{\mathsf{FCD}} F_n$ and so
$X_0\sqcap^{\mathsf{FCD}}\dots\sqcap^{\mathsf{FCD}} X_n=
X_0\sqcap\dots\sqcap X_n \sqsupseteq F_0\sqcap^{\mathsf{FCD}}\dots\sqcap^{\mathsf{FCD}} F_n \sqsupseteq 1^{\mathsf{FCD}}$.
Thus $X_0\sqcap\dots\sqcap X_n \in \up^{\Gamma} 1^{\mathsf{FCD}} \subseteq S_1$
$\up(X_0\sqcap\dots\sqcap X_n)\subseteq S_1$ as $S_1$ is an upper set.

To finish the proof suppose for the contrary that $\up f_0=S_0$ and $\up f_1=S_1$ for some funcoids~$f_0$ and~$f_1$.
In this case $f_0=\bigsqcap^{\mathsf{FCD}} S_0 = 1^{\mathsf{FCD}} = \bigsqcap^{\mathsf{FCD}} \up^{\Gamma} 1^{\mathsf{FCD}} =
\bigsqcap^{\mathsf{FCD}} S_1 = f_1$ and thus $S_0=S_1$, contradiction.
\end{proof}

\begin{conjecture}
  Let $\forall X,Y\in S:\up(X\sqcap^{\mathsf{FCD}} Y)\subseteq S$.
  
  Then
  \[ \forall X_0,\dots,X_n\in S:\up(X_0\sqcap^{\mathsf{FCD}}\dots\sqcap^{\mathsf{FCD}} X_n)\subseteq S. \]
\end{conjecture}

\fxnote{What are funcoids~$f$ such that $\up f$ is a filter? or any its base is a filter base?}

\begin{prop}
$\up (f \sqcap^{\mathsf{FCD}} g) \subseteq \setcond{ F \sqcap G }{ F \in \up f, G \in \up g }$.
\end{prop}

\begin{proof}
$\up (F \sqcap^{\mathsf{FCD}} G) \subseteq \up (F
\sqcap G)$. So $\up (f \sqcap^{\mathsf{FCD}} g) \subseteq ?? \subseteq \bigcup
\setcond{ \up (F \sqcap G) }{ F \in \up f,
G \in \up g } \subseteq \setcond{ F \sqcap G }{ F \in \up f, G \in \up g }$ because every
element of $X \in \up (F \sqcap G)$ can be represented as $F' \sqcap G'$
for $F' \in \up f$, $G' \in \up g$ (take $F' = F \sqcup X$ and $G'
= G \sqcup X$; then $F' \sqcap G' = (F \sqcup X) \sqcap (G \sqcup X) = (F
\sqcap G) \sqcup X = X$).
\end{proof}

\begin{cor}
$\up (f_0 \sqcap^{\mathsf{FCD}} \ldots
\sqcap^{\mathsf{FCD}} f_n) \subseteq \setcond{ F_0 \sqcap \ldots \sqcap
F_n }{ F_0 \in \up f_0 \wedge \ldots \wedge F_n \in \up f_n }$.
\end{cor}

\begin{proof}
~
\begin{multline*}
\up (f_0 \sqcap^{\mathsf{FCD}} \ldots
\sqcap^{\mathsf{FCD}} f_{n + 1}) \subseteq \setcond{ F \sqcap G
}{ F \in \up (f_0 \sqcap^{\mathsf{FCD}}
\ldots \sqcap^{\mathsf{FCD}} f_n), G \in \up f_{n + 1} } \subseteq \\
\setcond{ F \sqcap G }{ F \in \setcond{ F_0
\sqcap \ldots \sqcap F_n }{ F_0 \in \up f_0
\wedge \ldots \wedge F_n \in \up f_n }, G \in \up f_{n + 1} } = \\
\setcond{ F_0 \sqcap \ldots \sqcap F_{n + 1} }{
F_0 \in \up f_0 \wedge \ldots \wedge F_{n + 1} \in
\up f_{n + 1} }.
\end{multline*}
\end{proof}
