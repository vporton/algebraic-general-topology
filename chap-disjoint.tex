\chapter{Disjoint product}

I remind that
$\coprod X = \bigcup_{i\in\dom X} (i,X_i)$
for every indexed family~$X$ of sets.

\begin{obvious}
$\coprod X\in\mathbf{Set}(\dom X,\im X)$.
\end{obvious}

\begin{defn}
I will call disjoint join of an indexed family~$\mathcal{X}$ of filters the following reloid: $\coprod\mathcal{X} = \bigsqcup_{i\in\dom f}(\{i\}\times^{\mathsf{RLD}}\mathcal{X}_i)$.
\end{defn}

\section{Cartesian product of funcoids}

\subsection{Definition and basic properties}

\begin{defn}
\emph{Base Cartesian product} of an indexed family~$f$ of funcoids is
a pointfree funcoid in
\begin{equation}\label{dj-prod-set}
\mathsf{pFCD}\left(\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right), \Compl\mathsf{RLD}\left((\dom f),\bigcup(\Dst\circ f)\right)\right)
\end{equation}
defined by the formulas
\[
\supfun{\prod^{(J)}f} \mathcal{X} =
\coprod_{i\in\dom f}\supfun{f_i}\im(\mathcal{X}|_{\{i\}});\quad
\supfun{\left(\prod^{(J)}f\right)^{-1}} \mathcal{Y} =
\coprod_{i\in\dom f}\supfun{f_i^{-1}}\im(\mathcal{Y}|_{\{i\}})
\]
or explicitly
\[
\supfun{\prod^{(J)}f} \mathcal{X} =
\bigsqcup_{i\in\dom f}
\left(\{i\}\times^{\mathsf{RLD}}\supfun{f_i}\im(\mathcal{X}|_{\{i\}})\right)
\]
and
\[
\supfun{\left(\prod^{(J)}f\right)^{-1}} \mathcal{Y} =
\bigsqcup_{i\in\dom f}
(\{i\}\times^{\mathsf{RLD}}\supfun{f_i^{-1}}\im(\mathcal{Y}|_{\{i\}}).
\]
\end{defn}

Let's prove it is really in~\eqref{dj-prod-set}.

\begin{proof}
Let $\mathcal{X}\in\mathscr{F}\left(\coprod(\Src\circ f)\right)$.
We need to prove
$\supfun{\prod^{(J)}f} \mathcal{X}\in\mathscr{F}\left(\coprod(\Src\circ f)\right)$.

We have $\mathcal{X}\in\mathsf{RLD}(\dom f, \bigcup(\Src\circ f))$.

We have (by properties of complete reloids) $\im(\mathcal{X}|_{\{i\}})\in\Src f_i$. Therefore $\supfun{f_i}\im(\mathcal{X}|_{\{i\}})\in\Dst f_i$. Therefore
$\{i\}\times^{\mathsf{RLD}}\supfun{f_i}\im(\mathcal{X}|_{\{i\}})$ is a subfilter of the set $\{i\}\times\Dst f_i$. Therefore it is a subfilter of the set $\coprod(\Dst\circ f)$.

So $\supfun{\prod^{(J)}f} \mathcal{X}\in\mathscr{F}\left(\coprod(\Src\circ f)\right)$.

It remains to prove
$\mathcal{Y}\nasymp\supfun{\prod^{(J)}f} \Leftrightarrow
\mathcal{X}\nasymp\supfun{\left(\prod^{(J)}f\right)^{-1}} \mathcal{Y}$.

Really, equivalently transforming it, \[ \bigsqcup_{i\in\dom f}
\left(\{i\}\times^{\mathsf{RLD}}\im(\mathcal{Y}|_{\{i\}}))\right) \nasymp \bigsqcup_{i\in\dom f}
\left(\{i\}\times^{\mathsf{RLD}}\supfun{f_i}\im(\mathcal{X}|_{\{i\}})\right); \]
(due to theorem~\bookref{cmpl-dia-thm})
\[
\lambda i\in\dom f:\im(\mathcal{Y}|_{\{i\}}) \nasymp
\lambda i\in\dom f:\supfun{f_i}\im(\mathcal{X}|_{\{i\}});
\]
\[
\exists i\in\dom f:\im(\mathcal{Y}|_{\{i\}}) \nasymp
\supfun{f_i}\im(\mathcal{X}|_{\{i\}});
\]
\[
\exists i\in\dom f:\im(\mathcal{X}|_{\{i\}}) \nasymp
\supfun{f_i^{-1}}\im(\mathcal{Y}|_{\{i\}});
\]

By symmetry we conclude our thesis.
\end{proof}

\begin{defn}
Let's continue base Cartesian product till
a funcoid (\emph{Cartesian product}) $\coprod(\Src\circ f)\to\coprod(\Dst\circ f)$:
\end{defn}

\begin{align*}
\supfun{\prod^{(J\ast)} f}\mathcal{X} =&
\bigsqcap\rsupfun{\supfun{\prod^{(J)}f}}\up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X};\\
\supfun{\left(\prod^{(J\ast)} f\right)^{-1}}\mathcal{Y} =&
\bigsqcap\rsupfun{\supfun{\left(\prod^{(J)}f\right)^{-1}}}\up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{Y}.
\end{align*}

Let's prove it is really a funcoid:

\begin{proof}
By properties of generalized filter bases
\begin{multline*}
\mathcal{Y}\nasymp\supfun{\prod^{(J\ast)} f}\mathcal{X}
\Leftrightarrow\\
\exists X\in\up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X}:
\mathcal{Y}\nasymp\supfun{\prod^{(J)}f}\mathcal{X}
\Leftrightarrow\\
\exists X\in\up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{Y}:
\mathcal{X}\nasymp\supfun{\left(\prod^{(J)}f\right)^{-1}}\mathcal{Y}
\Leftrightarrow\\
\mathcal{X}\nasymp
\supfun{\left(\prod^{(J\ast)} f\right)^{-1}}\mathcal{Y}.
\end{multline*}
\end{proof}

\begin{obvious}
If $f$~is a finite family of funcoids $\prod^{(J\ast)}f=\prod^{(J)}f$ (if we equate funcoids to corresponding pointfree funcoids).
\end{obvious}

\subsection{Projections}

\begin{defn}
\emph{Cartesian projection} of a funcoid $f: \coprod(\Src\circ f)\to\coprod(\Dst\circ f)$ to $i$-th coordinate is
$\pi_i f=
(f\sqcap(\{i\}\times^{\mathsf{FCD}}\Dst f_i))\circ
(\{i\}\times^{\mathsf{RLD}})$.
\end{defn}

\begin{thm}
$\pi_i\prod^{(J\ast)}f=f_i$.
\end{thm}

\begin{proof}
\begin{multline*}
\supfun{\pi_i\prod^{(J\ast)}f}\mathcal{X} =\\
\supfun{\prod^{(J\ast)}f\sqcap(\{i\}\times^{\mathsf{FCD}}\Dst \left(\prod^{(J\ast)}f\right)_i}(\{i\}\times^{\mathsf{RLD}}\mathcal{X})=\\
\supfun{\prod^{(J\ast)}f\sqcap(\{i\}\times^{\mathsf{FCD}}\Dst f_i)}(\{i\}\times^{\mathsf{RLD}}\mathcal{X})=\\
\supfun{\prod^{(J)}f\sqcap(\{i\}\times^{\mathsf{FCD}}\Dst f_i)}(\{i\}\times^{\mathsf{RLD}}\mathcal{X})=\\
(\mathcal{X}\mapsto\supfun{f_i}\im(\mathcal{X}|_{\{i\}}))(\{i\}\times^{\mathsf{RLD}}\mathcal{X})=
\supfun{f_i}\mathcal{X}.
\end{multline*}
\end{proof}

\section{Arrow product of funcoids}

\begin{defn}
\emph{Base arrow product} \[ \prod^{\rightarrow}f\in\mathsf{pFCD}\left(\mathscr{F}(A),\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Dst\circ f)\right)\right) \] of a finite indexed family~$f$ of funcoids with common source~$A$ is defined by the formulas:
\[
\supfun{\prod^{\rightarrow} f}\mathcal{X} = \coprod_{i\in\dom\mathcal{X}}\supfun{f_i}\mathcal{X};
\supfun{\left(\prod^{\rightarrow} f\right)^{-1}}\mathcal{Y} = \bigsqcup_{i\in\dom f}\supfun{f_i^{-1}}\im(\mathcal{Y}|_{\{i\}}).
\]
\end{defn}

Let's prove it is really a pointfree funcoid:

\begin{proof}
$\mathcal{Y}\nasymp\supfun{\prod^{\rightarrow} f}\mathcal{X}
\Leftrightarrow
\mathcal{Y}\nasymp\coprod_{i\in\dom\mathcal{X}}\supfun{f_i}\mathcal{X}
\Leftrightarrow
\mathcal{Y}\nasymp\bigsqcup_{i\in\dom\mathcal{X}}(\{i\}\times^{\mathsf{RLD}}\supfun{f_i}\mathcal{X})$
what by theorem~\bookref{cmpl-dia-thm} is equivalent to
$\lambda i\in\dom\mathcal{X}:\im(\mathcal{Y}|_{\{i\}})\nasymp
\lambda i\in\dom\mathcal{X}:\supfun{f_i}\mathcal{X}
\Leftrightarrow
\exists i\in\dom\mathcal{X}:\im(\mathcal{Y}|_{\{i\}})\nasymp
\supfun{f_i}\mathcal{X}
\Leftrightarrow
\exists i\in\dom\mathcal{X}:\mathcal{X}\nasymp\supfun{f_i^{-1}}\im(\mathcal{Y}|_{\{i\}})
\Leftrightarrow\text{(finiteness of $\dom f$)}\Leftrightarrow
\mathcal{X}\nasymp\bigsqcup_{i\in\dom f}\supfun{f_i^{-1}}\im(\mathcal{Y}|_{\{i\}})$.
\end{proof}

\begin{defn}
\emph{Arrow product} of a finite family~$f$ of funcoids with common source~$A$ is the funcoid $\prod^{\rightarrow\ast}f:A\to\coprod_{i\in\dom f}\Dst f_i$ defined by the formulas:
\begin{gather*}
\supfun{\prod^{\rightarrow\ast}f}\mathcal{X} =
\supfun{\prod^{\rightarrow}f}\mathcal{X};\\
\supfun{\left(\prod^{\rightarrow\ast} f\right)^{-1}}\mathcal{Y} =
\bigsqcap\rsupfun{\supfun{\left(\prod^{\rightarrow}f\right)^{-1}}}\up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{Y}.
\end{gather*}
\end{defn}

Let's prove it is really a funcoid:

\begin{proof}
$\mathcal{Y}\nasymp\supfun{\prod^{\rightarrow\ast}f}\mathcal{X}
\Leftrightarrow
\mathcal{Y}\nasymp\coprod_{i\in\dom\mathcal{X}}\supfun{f_i}\mathcal{X}
\Leftrightarrow
\mathcal{Y}\nasymp\prod_{i\in\dom\mathcal{X}}(\{i\}\times^{\mathsf{RLD}}\supfun{f_i}\mathcal{X})\Leftrightarrow
\lambda i\in\dom f:\im(\mathcal{Y}|_{\{i\}})\nasymp
\lambda i\in\dom f:\supfun{f_i}\mathcal{X}\Leftrightarrow
\exists i\in\dom f:\im(\mathcal{Y}|_{\{i\}})\nasymp\supfun{f_i}\mathcal{X}
$.

By properties of generalized filter bases
$\mathcal{X}\nasymp\supfun{\left(\prod^{\rightarrow\ast}f\right)^{-1}}\mathcal{Y}
\Leftrightarrow
\exists X\in \up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X}:
X\nasymp\supfun{\left(\prod^{\rightarrow}f\right)^{-1}}\mathcal{Y}
\Leftrightarrow
\exists X\in \up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X}:
\mathcal{Y}\nasymp\supfun{\left(\prod^{\rightarrow}f\right)}X
\Leftrightarrow
\exists X\in \up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X}:
\mathcal{Y}\nasymp\coprod_{i\in\dom\mathcal{X}}\supfun{f_i}X
\Leftrightarrow
\exists X\in \up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X}:
\mathcal{Y}\nasymp\prod_{i\in\dom\mathcal{X}}(\{i\}\times^{\mathsf{RLD}}\supfun{f_i}X)\Leftrightarrow
\exists X\in \up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X}:
\lambda X\in\dom f:
\im(\mathcal{Y}|_{\{i\}})\nasymp
\lambda X\in\dom f:\supfun{f_i}X \Leftrightarrow
\exists X\in \up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X},
i\in\dom f:
\im(\mathcal{Y}|_{\{i\}})\nasymp\supfun{f_i}X \Leftrightarrow
\exists X\in \up^{\Compl\mathsf{RLD}\left((\dom f),\bigcup(\Src\circ f)\right)}\mathcal{X},
i\in\dom f:
X\nasymp\supfun{f_i^{-1}}\im(\mathcal{Y}|_{\{i\}})
\Leftrightarrow
\text{(by properties of generalized filter bases)}
\Leftrightarrow
\exists i\in\dom f:
\mathcal{X}\nasymp\supfun{f_i^{-1}}\im(\mathcal{Y}|_{\{i\}})
\Leftrightarrow
\exists i\in\dom f:
\im(\mathcal{Y}|_{\{i\}})\nasymp\supfun{f_i}\mathcal{X}$.

So
$\mathcal{Y}\nasymp\supfun{\prod^{\rightarrow\ast}f}\mathcal{X}
\Leftrightarrow
\mathcal{X}\nasymp\supfun{\left(\prod^{\rightarrow\ast}f\right)^{-1}}\mathcal{Y}$.
\end{proof}