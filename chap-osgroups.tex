\chapter{Introduction}

I will show that most of the topology can be formulated in an ordered semigroup (or an ordered monoid).

\chapter{Prerequisites}

You need to know about semigroups, ordered semigroups, semigroup actions, before reading further. If in doubt, consult Wikipedia.

\emph{Filtrators} are pairs of a poset and its subset (in induced order). An important example of filtrator is the set of filters on some poset together with the subset of principal filters. (Note that I order filters \emph{reversely} to the set inclusion relation: So for filters I have $a\leq b \Leftrightarrow a\supseteq b$.)

I will denote meet and join on a poset correspondingly as~$\sqcap$ and~$\sqcup$.

I call two elements~$a$ and~$b$ \emph{intersecting} ($a\nasymp b$) when there is a non-least element~$c$ such that $c\leq a\land c\leq b$. For meet-semigroups with meet operation~$\sqcap$ this condition is equivalent to $a\sqcap b$ being non-least element.

I call two elements~$a$ and~$b$ \emph{joining} ($a\equiv b$) when there is no non-greatest element~$c$ such that $c\geq a\land c\geq b$. For meet-semigroups with meet operation~$\sqcup$ this condition is equivalent to $a\sqcup b$ being the greatest element.

I denote $\rsupfun{f}X = \setcond{fx}{x\in X}$.

\chapter{Basic examples}

A topological space is determined by its closure operator.

Consider the semigroup formed by composing together any finite number of topological closure operators (on some fixed ``universal'' set).

This semigroup can be considered as its own action.

So every topological space is an element of this semigroup that is associated with an action.

The set, on which these actions act, is the set of subsets of our universal set. The set of subsets of a set is a partially ordered set.

So we have topological space defined by actions of an ordered semigroup.

Below I will define a \emph{space} as an \emph{ordered semigroup action}.

This includes topological spaces, uniform spaces, proximity spaces, (directed) graphs, metric spaces, vector spaces, etc.

Moreover we can consider the semigroup of all functions~$\subsets\mho\to\subsets\mho$ for some set~$\mho$ (the set of ``points'' of our space). Above we showed that topological spaces correspond to elements of this semigroup. Functions on~$\mho$ also can be considered as elements of this semigroup (replace every function with its ``image of a set'' function). Then we have an ordered semigroup action containing both topospaces and functions. As it was considered in~\cite{volume-1}, we can describe a function~$f$ being continuous from a space~$\mu$ to a space~$\nu$ by the formula (\fxerror{The reverse function.} $f\circ\mu\leq\nu\circ f$. See, it's an instance of \emph{algebraic} general topology: a topological concept was described by an algebraic formula, without any quantifiers.

\chapter{Precategories}

\begin{defn}
\index{precategory}A \emph{precategory} is a directed multigraph
together with a partial binary operation $\circ$ on the set $\mathcal{M}$
such that $g\circ f$ is defined iff $\Dst f=\Src g$ (for every morphisms
$f$ and $g$) such that
\begin{enumerate}
\item $\Src(g\circ f)=\Src f$ and $\Dst(g\circ f)=\Dst g$ whenever the
composition $g\circ f$ of morphisms $f$ and $g$ is defined.
\item $(h\circ g)\circ f=h\circ(g\circ f)$ whenever compositions in this
equation are defined.
\end{enumerate}
\end{defn}

\begin{defn}
\index{prefunctor}A \emph{prefunctor} is a pair of a function from the set of objects of one precategory to the set of objects of another precategory and a function from the set of morphisms of one precategory to the set of morphisms of another precategory (these functions are denoted by the same letter such as~$\phi$) conforming to the axioms:
\begin{enumerate}
\item $\phi(f): \phi(\Src f)\to\phi(\Dst f)$ for every morphism~$f$ of the first precategory;
\item $\phi(g\circ f)=\phi(g)\circ\phi(f)$ for every composable morphisms~$f$,~$g$ of the first precategory.
\end{enumerate}
\end{defn}

\begin{note}
A semigroup is essentially a special case of a precategory (with only one object) and semigroup homomorphism is a prefunctor.
\end{note}

\chapter{Ordered precategories}

\begin{defn}
\emph{Ordered precategory} (or \emph{poprecategory}) is
a precategory together with an order on the set of morphisms conforming to the equality:
\[ x_0\leq x_1\land y_0\leq y_1\Rightarrow y_0\circ x_0\leq y_1\circ x_1. \]
\end{defn}

\chapter{Ordered semigroups}

\begin{defn}
\emph{Ordered semigroup} (or \emph{posemigroup}) is a set together with binary operation~$\circ$ and binary relation~$\leq$ on it, conforming both to semigroup axioms and partial order axioms and:
\[ x_0\leq x_1\land y_0\leq y_1\Rightarrow y_0\circ x_0\leq y_1\circ x_1. \]
\end{defn}

Essentially, a posemigroup is just an ordered precategory with just one object.

In this book I will call elements of an ordered semigroup \emph{spaces}, because they generalize such things as topological spaces, (quasi)proximity spaces, (quasi)uniform spaces, (directed) graphs. (quasi)metric spaces.

As I shown above, functions (and more generally binary relations) can also be considered as spaces.

\begin{defn}
\emph{Ordered monoid} (or \emph{pomonoid}) is an ordered semigroup that is a monoid.
\end{defn}

\chapter{Precategory actions}

\begin{defn}
\emph{Precategory action} is a prefunctor from a precategory to the category~$\mathbf{Set}$.
\end{defn}

\chapter{Ordered precategory actions}

\begin{defn}
\emph{Ordered precategory action} on a is a precategory action~$T$ to the category~$\mathbf{Pos}$ of all partially ordered sets, such that
\begin{enumerate}
\item $a\leq b\Rightarrow(Ta)x\leq (Tb)x$ for all $a,b\in S$, $x\in\mathfrak{A}$;
\item $x\leq y\Rightarrow(Ta)x\leq (Ta)y$ for all $a\in S$.
\end{enumerate}
In other words, an ordered precategory action is a (not necessarily strictly) increasing precategory action (we consider transformations of this action to be ordered pointwise, that is by the product order).

I call morphisms of such a precategory as \emph{interspaces}.\footnote{The prefix inter- is supposed to mean that the morphisms may have the source different that the destination.}
\end{defn}

Note that this ``inducting'' is an ordered semigroup homomorphism.

\chapter{Ordered semigroup actions}

\begin{defn}
\emph{Curried ordered semigroup action} on a poset~$\mathfrak{A}$ for an ordered semigroup~$S$ is a function $T:S\to(\mathfrak{A}\to\mathfrak{A})$ such that
\begin{enumerate}
\item $(T(b\circ a))x = (Tb)(Ta)x$ for all $a,b\in S$, $x\in\mathfrak{A}$;
$x,y\in\mathfrak{A}$;
\item $a\leq b\Rightarrow(Ta)x\leq (Tb)x$ for all $a,b\in S$, $x\in\mathfrak{A}$;
\item $x\leq y\Rightarrow(Ta)x\leq (Ta)y$ for all $a\in S$.
\end{enumerate}
I call elements of such an action \emph{spaces}.
\end{defn}

\begin{rem}
Google search for ``"ordered semigroup action"'' showed nothing. Was a spell laid onto Earth mathematicians not to find the most important structure in general topology?
\end{rem}

Essentially, ordered semigroup action is a ordered precategory action with just one object.

We can order actions componentwise. Then the above axioms simplify to:
\begin{enumerate}
\item $T(b\circ a) = (Tb)\circ(Ta)$ for all $a,b\in S$;
\item $T$ is a (not necessarily strictly) increasing;
\item $Ta$ is a (not necessarily strictly) increasing, for every space~$a$.
\end{enumerate}

\begin{defn}
A \emph{functional ordered precategory action} is such an ordered semigroup action that $Ta=a$ for every space~$a$.
\end{defn}

\begin{thm}
Each ordered precategory action induces a functional ordered precategory action, whose morphisms are the same a of the original one but with objects being posets, spaces are the actions of the original precategory, the composition operation is function composition, and order of spaces is the product order.
\end{thm}

\begin{proof}
That it's a precategory is obvious. The partial order is the same as the original. It remains to prove the remaining axioms.

For our semigroup
\[ T(b\circ a) = b\circ a=T(b)\circ T(a). \]

$T$ is increasing because it's the identity function.

$Ta$ is the same as one of the original ordered semigroup action and thus is increasing.
\end{proof}

Having a curried ordered semigroup action and a homomorphism to its ordered semigroup, we can define in an obvious way a new curried ordered semigroup action. The following is an example of this construction (here $\torldin$ is a homomorphism of ordered semigroups).

\emph{Funcoids} described in the first volume of this book form an ordered precategory with action $\supfun{}$. \emph{Reloids} form an ordered precategory with action $a\mapsto\supfun{\torldin a}$.
As we know from the~\cite{volume-1}, funcoids are a generalization of topological spaces, proximity spaces, and directed graphs (``discrete spaces''), reloids is a generalization of uniform spaces and directed graphs. Funcoid is determined by its action. So most of the customary general topology can be described in terms of ordered precategory actions (or ordered semigroup actions, see below).

Remember that elements of our posets of objects may be such things as sets or more generally filters, they may be not just points. So our topological construction is ``pointfree'' (we consider sets or filters, not points).

This book is mainly about this topic: describing general topology in terms of ordered precategory actions. Above are the new axioms for general topology. No topological spaces here.

Ordered precategory action is \emph{ordered by elements} when \[ a\leq b \Leftarrow Ta\leq Tb \] that is when \[ a\leq b \Leftarrow \forall x:(Ta)x\leq(Tb)x. \]

Obviously, in this case~$T$ is a faithful functor. So our ordered precategory action is \emph{essentially functional} (functional, up to a faithful functor).

\chapter{Ordered dagger categories and ordered semigroups with involution}

\begin{defn}
\emph{Dagger precategory} is a precategory together with the operation $a\mapsto a^{\dagger}$ (called \emph{involution} or \emph{dagger}) such that:
\begin{enumerate}
\item $a^{\dagger\dagger} = a$;
\item $(b\circ a)^{\dagger} = a^{\dagger}\circ b^{\dagger}$.
\end{enumerate}
\end{defn}

For an \emph{ordered dagger precategory} we will additionally require $a\leq b\Rightarrow a^{\dagger}\leq b^{\dagger}$ (and consequently $a\leq b\Leftrightarrow a^{\dagger}\leq b^{\dagger}$).

\begin{defn}
\emph{Semigroup with involution} is a dagger precategory with just one object.
\end{defn}

For an \emph{ordered semigroup with involution} we will additionally require $a\leq b\Rightarrow a^{\dagger}\leq b^{\dagger}$ (and consequently $a\leq b\Leftrightarrow a^{\dagger}\leq b^{\dagger}$).

\chapter{Topological properties}

Now we have a formalism to describe many topological properties (following the ideas of~\cite{volume-1}):

Continuity is described by the formulas $f\circ a\leq a\circ f$, $f\circ a\circ f^{\dagger}\leq a$, $a\leq f^{\dagger}\circ a\circ f$.

Convergence of a function~$f$ from an endomorphism (space)~$\mu$ to an endomorphism (space)~$\nu$ at filter~$x$ to a set or filter~$y$ is described by the formula $(Tf)(T\mu)x\leq(T\nu)y$.

Generalized limit of an arbitrary interspace~$f$ (for example, of an arbitrary (possibly discontinuous) function), see \cite{limit}, is described by the formula \[ \xlim f=\setcond{\nu\circ f\circ r}{r\in G}, \]
where~$G$~is a suitable group (consider for example the group of all translations of a vector space).

\emph{Neighborhood} of element~$x$ is such a $y$ that $(Ta)x\leq y$. \emph{Interior} of~$x$ (if it exists) if the join of all $y$ such that $x$ is a neighborhood of~$x$.

An element~$x$ is closed regarding~$a$ iff $(Ta)x\leq x$. $x$~is open iff $x$ is closed regarding $Ta^{\dagger}$.

To define compactness we additionally need the structure of filtrator $(\mathfrak{A},\mathfrak{Z})$ on our poset. Then it is space~$a$ is \emph{directly compact} iff
\[\forall x\in\mathfrak{A}:(x\text{ is non-least}\Rightarrow\Cor(Ta)x\text{ is non-least}); \]
$a$~is \emph{reversely compact} iff $a^{\dagger}$ is directly compact; $a$~is \emph{compact} iff it is both directly and reversely compact.

However, we can define compactness without specifying~$\mathfrak{Z}$ as we can take~$\mathfrak{Z}$ to be the \emph{center} (the set of all its complemented elements) of the poset~$\mathfrak{A}$.

It seem we cannot define \emph{total boundness} purely in terms of ordered semigroups, because it is a property of reloids and reloid is not determined by its action.

\chapter{A relation}

Every ordered precategory action~$T$ defines a relation~$R$: $x(Ra)y\Leftrightarrow y\nasymp(Ta)x$.

If $(Ra)^{\dagger}=(Ra)^{-1}$ for every~$a$, we call the action~$T$ on an dagger precategory \emph{inter\-sec\-tion-sym\-met\-ric}. In this case our action defines a pointfree funcoid~(see~\cite{volume-1}).

A space is connected iff $x\equiv y\Rightarrow x(Ra)y$.

\fxnote{Define ``other'' connectedness also through series.}

We can define open and closed functions.

\chapter{Further axioms}

Further possible axioms for an ordered semigroup action with binary joins:

\begin{itemize}
\item $(Tf)(x\sqcup y)=(Tf)x\sqcup(Tf)y$;
\item $(T(f\sqcup g))x=(Tf)x\sqcup(Tg)x$.
\end{itemize}

\fxnote{Need to generalize for a wider class of posets.}

\chapter{Product of ordered semigroup actions}

\fxnote{TODO.}

\chapter{Restricted identity transformations}

\emph{Restricted identity transformation} $\id_p$, where ~$p$ is an element of a poset, is the (generally, partially defined) transformation $x\mapsto x\sqcap p$.

\begin{obvious}
$\id_q\circ\id_p = \id_{p\sqcap q}$ if~$p$ and~$q$ are elements of some poset for which binary meet is defined.
\end{obvious}

\begin{prop}
$p\ne q\Rightarrow\id_p\ne\id_q$.
\end{prop}

\begin{proof}
$\id_p p=p \ne q = \id_q q$.
\end{proof}

\emph{Ordered precategory action with identities} is an ordered precategory~$S$ action~$T$ together with a function $p\mapsto\id_p\in S$ such that $T\id_p=\id_p$ whenever this equality is defined. (I abuse the notation $\id_p$ for both interspaces and for transformations; this won't lead to inconsistencies, because as proved above this mapping is faithful on restricted identities.)

\begin{obvious}
For every ordered precategory action with identities, the identity transformations are entirely defined on their domains.
\end{obvious}

From injectivity it follows $\id_{p\sqcap q} = \id_p\circ\id_q$.

\emph{Restriction} of an interspace~$a$ to element~$x$ is $a|_x=a\circ\id_x$.

\emph{Square restriction} (a generalization of restriction of a topological space, metric space, etc.) of a interspace~$a$ to element~$x$ is $\id_x\circ a\circ\id_x$.

\chapter{Binary product of poset elements}

\begin{defn}
I call an ordered precategory action \emph{correctly bounded} when the set of interspaces between two fixed objects is bounded and:
\begin{enumerate}
\item $(T\bot)x = \bot$ for every poset element~$x$;
\item $(T\top)x =
\left\{\begin{array}{ll}\top&\text{if }x\ne\bot,\\\bot&\text{if }x=\bot.\end{array}\right.$
\end{enumerate}
\end{defn}

\emph{Binary product} in an ordered semigroup action having a greatest element~$\top$ is defined as $p\times q=\id_q\circ\top\circ\id_p$.

\begin{thm}
If our action is correctly bounded, then
\[ x(R(p\times q))y\Leftrightarrow x\nasymp p\land y\nasymp q. \]
\end{thm}

\begin{proof}
\begin{multline*}
x(R(p\times q))y \Leftrightarrow
y\nasymp(T(p\times q))x \Leftrightarrow \\
y\nasymp(T(\id_q\circ\top\circ\id_p))x \Leftrightarrow \\
y\nasymp (T\id_q)(T\top)(T\id_p)x \Leftrightarrow \\
y\nasymp q\sqcap(T\top)(p\sqcap x) \Leftrightarrow \\
y\nasymp
\left\{\begin{array}{ll}q&\text{if }x\nasymp p,\\\bot&\text{if }x\asymp p.\end{array}\right. \Leftrightarrow \\
x\nasymp p\land y\nasymp q.
\end{multline*}
\end{proof}

\begin{thm}
$p_0\times q_0\nasymp p_1\times q_1 \Leftrightarrow p_0\nasymp p_1\land q_0\nasymp q_1$. \fxwarning{TODO.}
\end{thm}

\chapter{Separable spaces}

\emph{Hausdorff} space~$a$ can be defined as having $x\overline{Ra}y$ whenever~$x$ and $y$ are closed and $x\asymp y$.

\fxnote{Define other kinds of separability through hausdorffness and completion.}

\chapter{Distributive ordered semigroup actions}

We can define (product) order of ordered precategory actions. For functional ordered precategory actions composition is defined. So we have one more ``level'' of ordered precategories. By the way, it can be continued indefinitely building new and new levels of such ordered precategories.

More generally we could consider ordered precategory functors (or specifically, ordered semigroup homomorphisms). Examples of such homomorphisms are $\supfun{}$, $\tofcd$, $\torldin$.

Pointfree funcoids (and consequently funcoids) are an ordered precategory action. Reloids are also an ordered precategory action.

\chapter{Complete spaces and completion of spaces}

A space~$a$ is \emph{complete} when $(Ta)\bigsqcup S=\bigsqcup\rsupfun{Ta}S$ whenever both $\bigsqcup S$ and $\bigsqcup\rsupfun{Ta}S$ are defined.

\begin{defn}
\emph{Completion} of an interspace is its core part (see~\cite{volume-1} for a definition of core part) on the filtrator of interspace and complete interspace.
\end{defn}

\begin{note}
Apparently, not every space has a completion.
\end{note}

\begin{note}
It is unrelated with Cachy-completion.
\end{note}

\chapter{Kuratowski spaces}

\begin{defn}
\emph{Kuratowski space} is a complete idempotent ($a\circ a=a$) space.
\end{defn}

Kuratowski spaces are a generalization of topological spaces.

\chapter{Metric spaces}

Let's denote $\Delta_a$ the proximity space induced by a metric space (or more generally quasimetric space)~$a$.

\begin{thm}
\[ \supfun{\Delta_a}X = \bigsqcap_{\epsilon>0}\bigcup_{x\in X}B(x,\epsilon) \]
($B(x,\epsilon)$ is the open ball of the radius~$\epsilon$ centered at~$x$).
\end{thm}

\begin{proof}
\begin{multline*}
Y\nasymp\supfun{\Delta_a}X\Leftrightarrow X\suprel{\Delta_a}Y \Leftrightarrow \\ \forall\epsilon>0\exists x\in X,y\in Y:\rho_a(x,y)<\epsilon.
\end{multline*}
\begin{multline*}
Y\nasymp\bigsqcap_{\epsilon>0}\bigcup_{x\in X}B_a(x,\epsilon) \Leftrightarrow \\ \forall\epsilon>0:Y\nasymp\bigcup_{x\in X}B_a(x,\epsilon) \Leftrightarrow \\
\forall\epsilon>0\exists x\in X:Y\nasymp B_a(x,\epsilon) \Leftrightarrow \\
\forall\epsilon>0\exists x\in X,y\in Y:\rho_a(x,y)<\epsilon.
\end{multline*}
\end{proof}


Metric spaces (on some fixed set~$\mho$) are also spaces: Define the order on metric spaces by the formula \[ \rho\leq\sigma \Leftrightarrow \forall x,y:\rho(x,y)\geq\sigma(x,y). \] Define the action for a metric space~$a$ as the action $\supfun{\Delta_a}$ of its induced proximity~$\Delta_a$ (see~\cite{volume-1} for a definition of proximity and more generally funcoid actions~$\supfun{}$) and composition of metrics $\rho$, $\sigma$ by the formula: \[ (\sigma\circ\rho)(x,z) = \inf_{y\in\mho}(\rho(x,y)+\sigma(z,y)), \]
where~$\mho$ is the set of points of our metric space.

\begin{lem}
$\Delta_{b\circ a} = \Delta_b\circ\Delta_a$.
\end{lem}

\begin{proof}
Let~$X$,~$Y$ be arbitrary sets on a metric space.
\begin{multline*}
Z\nasymp\supfun{\Delta_{b\circ a}}X \Leftrightarrow \\
\forall\epsilon>0\exists x\in X,z\in Z:\inf_{y\in\mho}(\rho_a(x,y)+\rho_b(y,z))<\epsilon \Leftrightarrow \\
\forall\epsilon>0\exists x\in X,y\in\mho,z\in Z:\rho_a(x,y)+\rho_b(y,z)<\epsilon \Leftrightarrow \\
\forall\epsilon>0\exists x\in X,y\in\mho,z\in Z:(\rho_a(x,y)<\epsilon\land\rho_b(y,z)<\epsilon)
\end{multline*}
\begin{multline*}
Z\nasymp\supfun{\Delta_b\circ\Delta_a}X \Leftrightarrow
Z\nasymp\supfun{\Delta_b}\supfun{\Delta_a}X\Leftrightarrow\\
\supfun{\Delta_b^{-1}}Z\nasymp\supfun{\Delta_a}X \Leftrightarrow\\
\bigsqcap_{\epsilon>0}\bigcup_{x\in X}B_a(x,\epsilon) \nasymp\bigsqcap_{\epsilon>0}\bigcup_{z\in Z}B_b(z,\epsilon) \Leftrightarrow \\
\forall\epsilon>0:\bigcup_{x\in X}B_a(x,\epsilon) \nasymp\bigcup_{z\in Z}B_b(z,\epsilon) \Leftrightarrow \\
\forall\epsilon>0\exists x\in X,z\in Z:B_a(x,\epsilon)\nasymp B_b(z,\epsilon) \Leftrightarrow \\
\forall\epsilon>0\exists x\in X,z\in Z,y\in\mho:(\rho_a(x,z)<\epsilon\land\rho_b(z,y)<\epsilon).
\end{multline*}

So, $Z\nasymp\supfun{\Delta_{b\circ a}}X \Leftrightarrow Z\nasymp\supfun{\Delta_b\circ\Delta_a}X$.
\end{proof}

Let's prove it's really an ordered semigroup action:

\begin{proof}
~
\begin{itemize}
\item It's a semigroup because
\begin{multline*}
(\tau\circ(\sigma\circ\rho))(x,z) = \\
\inf_{y_0\in\mho}((\sigma\circ\rho)(x,y_0)+\tau(y_0,z)) = \\
\inf_{y_0\in\mho}(\inf_{y_1\in\mho}(\rho(x,y_1)+\sigma(y_1,z))+\tau(y_0,z)) = \\
\inf_{y_0,y_1\in\mho}(\rho(x,y)+\sigma(y,z)+\tau(y,z)).
\end{multline*}
Similarly 
\begin{multline*}
((\tau\circ\sigma)\circ\rho)(x,z) = \\
\inf_{y\in\mho}(\rho(x,y)+\sigma(y,z)+\tau(y,z)).
\end{multline*}
Thus $\tau\circ(\sigma\circ\rho)=(\tau\circ\sigma)\circ\rho$.

\item It is an ordered semigroup, because
$(Ta)x = \supfun{\Delta_a} x \sqsubseteq \supfun{\Delta_a} y = (Ta)y$ 
for filters $x\sqsubseteq y$.

\item
\begin{multline*}
T(b\circ a) = \supfun{\Delta_{b\circ a}} = \\ \supfun{\Delta_b\circ\Delta_a} = \\ \supfun{\Delta_b}\circ\supfun{\Delta_a} = (Tb)\circ(Ta);
\end{multline*}
\item $a\leq b\Rightarrow Ta\leq Tb$ is obvious;
\item $x\leq y\Rightarrow(Ta)x\leq (Ta)y$ for all $a\in S$ is obvious.
\end{itemize}
\end{proof}

\fxnote{The above can be generalized for the values of the metric to be certain ordered additive semigroups instead of nonnegative real numbers.}

\fxnote{Isn't proximity also a XXX-metric, with points being sets or filters?}
