\chapter{Systems of sides}

\section{Definition}

\begin{defn}
\emph{System of presides} is
a functor $\Upsilon = (f\mapsto\supfun{f})$ from an ordered category
to the category of functions between (small) bounded lattices,
\fxwarning{Lattices (rather than join semilattices) are needed only for the special case of sides.}
such that (for all relevant variables):
\begin{enumerate}
  \item Every Hom-set of~$\Src\Upsilon$ is a bounded join-semilattice.

  \item $\supfun{a}\bot = \bot$.

  \item $\supfun{a \sqcup b} X = \supfun{a} X \sqcup \supfun{b} X$ (equivalent to $\Upsilon$ to be a join-semilattice homomorphism,
    if we order functions between small bounded lattices component-wise).
\end{enumerate}
I call morphisms of such categories \emph{sides}.\footnote{The idea for the name is that we consider one ``side''~$\supfun{f}$ of a funcoid instead of both sides~$\supfun{f}$ and~$\supfun{f^{-1}}$.}
\end{defn}

\begin{defn}
\emph{System of sides} is system of presides with
a morphism $\id_X\in\Src\Upsilon$ for every object $\mathfrak{A}$ of~$\Src\Upsilon$ and $X\in\mathfrak{A}$
and the following additional axioms:
\begin{enumerate}
  \item $\supfun{\bot} a = \bot$.

  \item $\supfun{\top} X = \top$ unless $X = \bot$

  \item $\id_c \sqsubseteq 1_{\mathfrak{A}}$ for every $c \in \mathfrak{A}$
    where $\mathfrak{A}$ is an object of~$\Src\Upsilon$.

  \item $\supfun{\id_c} = (\lambda x \in \mathfrak{A}: x \sqcap c)$ for every $c \in \mathfrak{A}$
    where $\mathfrak{A}$ is an object of~$\Src\Upsilon$
\end{enumerate}
\end{defn}

\begin{prop}
$\supfun{1^{\Src\Upsilon}_\mathfrak{A}} X = X$ for every system of presides.
\end{prop}

\begin{proof}
By properties of functors.
\end{proof}

\begin{defn}
I call a system of \emph{monotone} presides a system of presides with additional axiom:
\begin{enumerate}
\item $\supfun{a}$ is monotone.
\end{enumerate}
\end{defn}

\begin{defn}
I call a system of \emph{distributive} presides a system of presides with additional axiom:
\begin{enumerate}
\item $\supfun{a}(X\sqcup Y) = \supfun{a}X\sqcup\supfun{a}Y$.
\end{enumerate}
\end{defn}

\begin{obvious}
Every distributive system of presides is monotone.
\end{obvious}

\begin{prop}
$\supfun{a \sqcap b} X \sqsubseteq \supfun{a} X \sqcap \supfun{b} X$ for monotone systems of sides
if Hom-sets are lattices.
\end{prop}

\begin{defn}
A system of sides \emph{with correct identities} is a system of sides with additional axiom:
\begin{enumerate}
\item $\id_a\circ\id_b = \id_{a\sqcap b}$.
\end{enumerate}
\end{defn}

Boolean funcoids \fxnote{Extend this for a wider class of pointfree funcoids, such that all pointfree funcoids between bounded lattices?} are sides.
($\supfun{f}$ is a side for every boolean funcoid~$f$.)

It seems \fxwarning{Check!} that Galois connections between boolean lattices \fxnote{A wider class of lattices?}
are also a (distributive) side.

\fxnote{Reloids (and pointfree reloids?) also can be made into a side?}

\fxnote{$\mathbf{Rel}$~is a system of sides.}

\begin{defn}
Protofuncoids \emph{over} a set~$X$ of functors is a protofuncoid~$f$
such that $\supfun{f}\in X\land\supfun{f^{-1}}\in X$.
\end{defn}

\section{Product}

\begin{defn}
A \emph{system of sides with binary product} is a system of sides together with functions $\mathord{\times}:\mathfrak{A}\rightarrow\mathfrak{B}$
for every objects~$\mathfrak{A}$,~$\mathfrak{B}$, such that
\begin{enumerate}
\item \label{f-c-x-y}$f\sqcap(X\times Y) = \id_Y\circ f\circ\id_X$
\item \label{f-xy-x0y0}$(X_0\times Y_0)\sqcap(X_1\times Y_1) = (X_0\sqcap X_1)\times(Y_0\sqcap Y_1)$
\item $\supfun{f}\circ(X\times Y) = X\times\supfun{f}Y$
\end{enumerate}
\end{defn}

\begin{prop}
$\supfun{A\times B}X = \begin{cases}\bot&\text{ if }X\asymp A\\B&\text{ if }X\nasymp A\end{cases}$
\end{prop}

\begin{proof}
~
\begin{multline*}
\supfun{A\times B}X = \supfun{\top\sqcap(A\times B)}X = \supfun{\id_B\circ\top\circ\id_A}X = \\
\supfun{\id_B}\supfun{\top}\supfun{\id_A}X =
B\sqcap\supfun{\top}(X\sqcap A) = \\
B\sqcap\begin{cases}\bot&\text{ if }X\asymp A\\\top&\text{ if }X\nasymp A\end{cases} =
\begin{cases}\bot&\text{ if }X\asymp A\\B&\text{ if }X\nasymp A\end{cases}
\end{multline*}
\end{proof}

\begin{cor}
For faithful systems of sides binary product can be defined no more than in one way.
\fxnote{Give a definition of faithful.}
\end{cor}

\begin{prop}
For faithful systems of sides axiom~\ref{f-xy-x0y0} follows from axiom~\ref{f-c-x-y}.
\end{prop}

\begin{proof}
$(X_0\times Y_0)\sqcap(X_1\times Y_1) = \id_{Y_1}\circ(X_0\times Y_0)\circ\id_{X_1}$.
Thus
\begin{multline*}
\supfun{(X_0\times Y_0)\sqcap(X_1\times Y_1)} P = \supfun{\id_{Y_1}}\supfun{X_0\times Y_0}\supfun{\id_{X_1}} P = \\
\supfun{\id_{Y_1}}\begin{cases}\bot&\text{ if }X_0\asymp\supfun{\id_{X_1}}P\\Y_0&\text{ if }X_0\nasymp\supfun{\id_{X_1}}P\end{cases} =
\begin{cases}\bot&\text{ if }X_0\sqcap X_1\asymp P\\Y_0\sqcap Y_1&\text{ if }X_0\sqcap X_1\nasymp P\end{cases} = \\
\supfun{(X_0\sqcap X_1)\times(Y_0\sqcap Y_1)} P.
\end{multline*}
So $(X_0\times Y_0)\sqcap(X_1\times Y_1) = (X_0\sqcap X_1)\times(Y_0\sqcap Y_1)$ follows by full faithfulness.
\end{proof}

\fxnote{Hm, what about alternative definition of product (for example the ``second'' product) for reloids?}

\fxnote{Prove existence of binary product for the system of sides for Galois connections.}

\fxnote{The category $\mathbf{Rel}$ as an example of a system of sides.}

\fxnote{Define dagger system of sides.}

\section{Negative results}

The following negative result generalizes (?) theorem~3.8 in~\cite{tprod-dist-lat}.

\begin{prop}
  The element $1^{(\Src\Upsilon)(\mathfrak{A}; \mathfrak{A})}$ is not
  complemented if $\mathfrak{A}$ is a non-atomic boolean lattice,
  for every monotone system of sides.
\end{prop}

\begin{proof}
  Let $T = 1^{(\Src\Upsilon)(\mathfrak{A}; \mathfrak{A})}$.
  
  Let's suppose $T \sqcup V = \top$ for $V \in (\Src\Upsilon) (\mathfrak{A};
  \mathfrak{A})$ and prove $T \sqcap V \neq \bot$.
  
  Then $\supfun{T \sqcup V} a = \top$ for all $a \neq \bot$ and thus $\supfun{V}
  a \sqcup a = \top$.
  
  Consequently $\supfun{V} a \sqsupseteq \neg a$ for all $a \neq \bot$.
  
  If $a$ isn't an atom, then there exists $b$ with $0 \sqsubset b \sqsubset a$
  and hence $\supfun{V} a \sqsupseteq \supfun{V} b \sqsupseteq \neg b \sqsupset \neg a$;
  thus $\supfun{V} a \sqsupset \neg a$.
  
  There is such $c < \top$ that $a \sqsubseteq c$ for every atom $a$. (Really,
  suppose some element $p \neq \bot$ has no atoms. Thus all atoms are in $\neg
  p$.)
  
  For $a \nsqsubseteq c$ we have $\supfun{V} a \sqcap a \sqsupset \bot$
  for all $a \sqsubseteq \neg c$ thus $\supfun{T \sqcap V} a \sqsupseteq
  \supfun{V} a \sqcap a \sqsupset \bot$. Thus $\supfun{(T \sqcap V) \circ
  \id_{\neg c}} a \sqsupset \bot$
  
  So $T \sqcap V \sqsupseteq (T \sqcap V) \circ \id_{\neg c} \sqsupset
  \bot$. So $V$ is not a complement of $T$.
\end{proof}

\begin{cor}
  $(\Src\Upsilon)(\mathfrak{A}; \mathfrak{A})$ is not boolean if $\mathfrak{A}$
  is a non-atomic boolean lattice.
\end{cor}

\section{Dagger systems of sides}

\begin{defn}
\emph{Dagger system of sides} is system of sides with category~$\Src\Upsilon$ being a dagger category
and $(\id_X)^\dagger = \id_X$ for every~$X$.
\end{defn}

\begin{defn}
\emph{Dagger system of sides with binary products} is a system which is both a dagger system of sides and system of sides with binary products
such that $(X\times Y)^\dagger = Y\times X$.
\end{defn}