\chapter{Introduction to funcoids}

In this chapter (and several following chapters) the word \emph{filter}
will refer to a filter (or equivalently any filter object) on a set
(rather than a filter on an arbitrary poset).


\section{\index{funcoid}Informal introduction into funcoids}

Funcoids are a generalization of proximity spaces and a generalization
of pretopological spaces. Also funcoids are a generalization of binary
relations.

That funcoids are a common generalization of ``spaces'' (proximity
spaces, (pre)topological spaces) and binary relations (including monovalued
functions) makes them smart for describing properties of functions
in regard of spaces. For example the statement ``$f$ is a continuous
function from a space $\mu$ to a space $\nu$'' can be described
in terms of funcoids as the formula $f\circ\mu\sqsubseteq\nu\circ f$
(see below for details).

Most naturally funcoids appear as a generalization of proximity spaces.\footnote{In fact I discovered funcoids pondering on topological spaces, not on proximity spaces, but this is only of a historic interest.}

Let $\delta$ be a proximity. We will extend the relation~$\delta$
from sets to filters by the formula:
\[
\mathcal{A}\mathrel\delta'\mathcal{B}\Leftrightarrow\forall
A\in\up\mathcal{A},B\in\up\mathcal{B}:A\mathrel\delta B.
\]


Then (as it will be proved below) there exist two functions
$\alpha,\beta\in\mathscr{F}^{\mathscr{F}}$
such that
\[
\mathcal{A}\mathrel\delta'\mathcal{B}\Leftrightarrow\mathcal{B}
\sqcap\alpha\mathcal{A}\ne\bot^{\mathscr{F}}\Leftrightarrow\mathcal{A}
\sqcap\beta\mathcal{B}\ne\bot^{\mathscr{F}}.
\]


The pair $(\alpha,\beta)$ is called \emph{funcoid} when
$\mathcal{B}\sqcap\alpha\mathcal{A}\ne\bot^{\mathscr{F}}\Leftrightarrow\mathcal{
A}\sqcap\beta\mathcal{B}\ne\bot^{\mathscr{F}}$.
So funcoids are a generalization of proximity spaces.

Funcoids consist of two components the first $\alpha$ and the second
$\beta$. The first component of a funcoid $f$ is denoted as $\supfun f$
and the second component is denoted as $\supfun{f^{-1}}$. (The similarity
of this notation with the notation for the image of a set under a
function is not a coincidence, we will see that in the case of principal
funcoids (see below) these coincide.)

One of the most important properties of a funcoid is that it is uniquely
determined by just one of its components. That is a funcoid $f$ is
uniquely determined by the function $\supfun f$. Moreover a funcoid
$f$ is uniquely determined by values of $\supfun f$ on principal
filters.

Next we will consider some examples of funcoids determined by specified
values of the first component on sets.

Funcoids as a generalization of pretopological spaces: Let $\alpha$
be a pretopological space that is a map \emph{$\alpha\in\mathscr{F}^{\mho}$}
for some set $\mho$. Then we define $\alpha'X=\bigsqcup_{x\in X}\alpha x$
for every set $X\in\subsets\mho$. We will prove that there exists
a unique funcoid $f$ such that $\alpha'=\supfun f|_{\mathfrak{P}}\circ\uparrow$
where $\mathfrak{P}$ is the set of principal filters on $\mho$.
So funcoids are a generalization of pretopological spaces. Funcoids
are also a generalization of preclosure operators: For every preclosure
operator $p$ on a set $\mho$ it exists a unique funcoid $f$ such
that $\supfun f|_{\mathfrak{P}}\circ\uparrow=\uparrow\circ p$.

For every binary relation $p$ on a set $\mho$ there exists unique
funcoid $f$ such that
\[
\forall X\in\subsets\mho:\supfun f\uparrow X=\uparrow\rsupfun pX
\]
(where $\rsupfun p$ is defined in the introduction), recall that
a funcoid is uniquely determined by the values of its first component
on sets. I will call such funcoids \emph{principal}. So funcoids are
a generalization of binary relations.

Composition of binary relations (i.e. of principal funcoids) complies
with the formulas:
\[
\rsupfun{g\circ f}=\rsupfun g\circ\rsupfun f\quad\text{and}\quad\rsupfun{(g\circ
f)^{-1}}=\rsupfun{f^{-1}}\circ\rsupfun{g^{-1}}.
\]
By similar formulas we can define composition of every two funcoids.
Funcoids with this composition form a category (\emph{the category
of funcoids}).

Also funcoids can be reversed (like reversal of $X$ and $Y$ in a
binary relation) by the formula $(\alpha,\beta)^{-1}=(\beta,\alpha)$.
In the particular case if $\mu$ is a proximity we have $\mu^{-1}=\mu$
because proximities are symmetric.

Funcoids behave similarly to (multivalued) functions but acting on
filters instead of acting on sets. Below there will be defined domain
and image of a funcoid (the domain and the image of a funcoid are
filters).


\section{Basic definitions}
\begin{defn}
\index{funcoid}Let us call a \emph{funcoid} from a set $A$ to a
set $B$ a quadruple $(A,B,\alpha,\beta)$ where
$\alpha\in\mathscr{F}(B)^{\mathscr{F}(A)}$,
$\alpha\in\mathscr{F}(A)^{\mathscr{F}(B)}$ such that
\[
\forall\mathcal{X}\in\mathscr{F}(A),\mathcal{Y}\in\mathscr{F}(B):(\mathcal{Y}
\nasymp\alpha\mathcal{X}\Leftrightarrow\mathcal{X}\nasymp\beta\mathcal{Y}).
\]

\end{defn}

\begin{defn}
\index{funcoid!source}\index{funcoid!destination}\emph{Source} and
\emph{destination} of every funcoid $(A,B,\alpha,\beta)$ are defined
as:
\[
\Src(A,B,\alpha,\beta)=A\quad\text{and}\quad\Dst(A,B,\alpha,\beta)=B.
\]

\end{defn}
I will denote $\mathsf{FCD}(A,B)$ the set of funcoids from $A$ to
$B$.

I will denote $\mathsf{FCD}$ the set of all funcoids (for small sets).
\begin{defn}
\index{endo-funcoid}I will call an \emph{endofuncoid} a funcoid whose source is the same as it's destination.
\end{defn}

\begin{defn}
$\supfun{(A,B,\alpha,\beta)}\eqdef\alpha$ for a funcoid $(A,B,\alpha,\beta)$.
\end{defn}

\begin{defn}
\index{funcoid!reverse}The \emph{reverse} funcoid
$(A,B,\alpha,\beta)^{-1}=(B,A,\beta,\alpha)$
for a funcoid $(A,B,\alpha,\beta)$.\end{defn}
\begin{note}
The reverse funcoid is \emph{not} an inverse in the sense of group
theory or category theory.\end{note}
\begin{prop}
If $f$ is a funcoid then $f^{-1}$ is also a funcoid.\end{prop}
\begin{proof}
It follows from symmetry in the definition of funcoid.\end{proof}
\begin{obvious}
$(f^{-1})^{-1}=f$ for a funcoid $f$.\end{obvious}
\begin{defn}
The relation $\mathord{\suprel f}\in\subsets(\mathscr{F}(\Src
f)\times\mathscr{F}(\Dst f))$
is defined (for every funcoid $f$ and $\mathcal{X}\in\mathscr{F}(\Src f)$,
$\mathcal{Y}\in\mathscr{F}(\Dst f)$ by the formula $\mathcal{X}\suprel
f\mathcal{Y}\Leftrightarrow\mathcal{Y}\nasymp\supfun f\mathcal{X}$.\end{defn}
\begin{obvious}
$\mathcal{X}\suprel f\mathcal{Y}\Leftrightarrow\mathcal{Y}\nasymp\supfun
f\mathcal{X}\Leftrightarrow\mathcal{X}\nasymp\supfun{f^{-1}}\mathcal{Y}$
for every funcoid $f$ and $\mathcal{X}\in\mathscr{F}(\Src f)$,
$\mathcal{Y}\in\mathscr{F}(\Dst f)$.
\end{obvious}

\begin{obvious}
$\suprel{f^{-1}}=\suprel f^{-1}$ for a funcoid $f$.\end{obvious}
\begin{thm}
Let $A$, $B$ be sets.
\begin{enumerate}
\item For given value of $\supfun f\in\mathscr{F}(B)^{\mathscr{F}(A)}$
there exists no more than one funcoid $f\in\mathsf{FCD}(A,B)$.
\item For given value of $\mathord{\suprel
f}\in\subsets(\mathscr{F}(A)\times\mathscr{F}(B))$
there exists no more than one funcoid $f\in\mathsf{FCD}(A,B)$.
\end{enumerate}
\end{thm}
\begin{proof}
Let $f,g\in\mathsf{FCD}(A,B)$.

Obviously, $\supfun f=\supfun g\Rightarrow\suprel f=\suprel g$ and
$\supfun{f^{-1}}=\supfun{g^{-1}}\Rightarrow\suprel f=\suprel g$.
So it's enough to prove that $\suprel f=\suprel g\Rightarrow\supfun f=\supfun
g$.

Provided that $\suprel f=\suprel g$ we have $\mathcal{Y}\nasymp\supfun
f\mathcal{X}\Leftrightarrow\mathcal{X}\suprel
f\mathcal{Y}\Leftrightarrow\mathcal{X}\suprel
g\mathcal{Y}\Leftrightarrow\mathcal{Y}\nasymp\supfun g\mathcal{X}$
and consequently $\supfun f\mathcal{X}=\supfun g\mathcal{X}$ for
every $\mathcal{X}\in\mathscr{F}(A)$, $\mathcal{Y}\in\mathscr{F}(B)$
because a set of filters is separable, thus $\supfun f=\supfun g$.\end{proof}
\begin{prop}
$\supfun f\bot=\bot$
for every funcoid $f$.\end{prop}
\begin{proof}
$\mathcal{Y}\nasymp\supfun f\bot\Leftrightarrow\bot\nasymp\supfun{f^{-1}}\mathcal{Y}\Leftrightarrow0\Leftrightarrow\mathcal{Y}
\nasymp\bot$.
Thus $\supfun f\bot=\bot$
by separability of filters.\end{proof}
\begin{prop}
$\supfun f(\mathcal{I}\sqcup\mathcal{J})=\supfun f\mathcal{I}\sqcup\supfun
f\mathcal{J}$
for every funcoid $f$ and $\mathcal{I},\mathcal{J}\in\mathscr{F}(\Src
f)$.\end{prop}
\begin{proof}
~
\begin{align*}
\fullstar\supfun f(\mathcal{I}\sqcup\mathcal{J}) & =\\
\setcond{\mathcal{Y}\in\mathscr{F}}{\mathcal{Y}\nasymp\supfun
f(\mathcal{I}\sqcup\mathcal{J})} & =\\
\setcond{\mathcal{Y}\in\mathscr{F}}{\mathcal{I}\sqcup\mathcal{J}\nasymp\supfun{
f^{-1}}\mathcal{Y}} & =\\
\setcond{\mathcal{Y}\in\mathscr{F}}{\mathcal{I}\nasymp\supfun{f^{-1}}\mathcal{Y}
\lor\mathcal{J}\nasymp\supfun{f^{-1}}\mathcal{Y}} & =\\
\setcond{\mathcal{Y}\in\mathscr{F}}{\mathcal{Y}\nasymp\supfun
f\mathcal{I}\lor\mathcal{Y}\nasymp\supfun f\mathcal{J}} & =\\
\setcond{\mathcal{Y}\in\mathscr{F}}{\mathcal{Y}\nasymp\supfun
f\mathcal{I}\sqcup\supfun f\mathcal{J}} & =\\
\fullstar(\supfun f\mathcal{I}\sqcup\supfun f\mathcal{J}).
\end{align*}


Thus $\supfun f(\mathcal{I}\sqcup\mathcal{J})=\supfun f\mathcal{I}\sqcup\supfun
f\mathcal{J}$
because $\mathscr{F}(\Dst f)$ is separable.\end{proof}
\begin{prop}
For every $f\in\mathsf{FCD}(A,B)$ for every sets $A$ and $B$ we
have:
\begin{enumerate}
\item \label{fcd-f-d1}$\mathcal{K}\suprel
f\mathcal{I}\sqcup\mathcal{J}\Leftrightarrow\mathcal{K}\suprel
f\mathcal{I}\lor\mathcal{K}\suprel f\mathcal{J}$
for every $\mathcal{I},\mathcal{J}\in\mathscr{F}(B)$,
$\mathcal{K}\in\mathscr{F}(A)$.
\item \label{fcd-f-d2}$\mathcal{I}\sqcup\mathcal{J}\suprel
f\mathcal{K}\Leftrightarrow\mathcal{I}\suprel f\mathcal{K}\lor\mathcal{J}\suprel
f\mathcal{K}$
for every $\mathcal{I},\mathcal{J}\in\mathscr{F}(A)$,
$\mathcal{K}\in\mathscr{F}(B)$.
\end{enumerate}
\end{prop}
\begin{proof}
~
\begin{disorder}
\item [{\ref{fcd-f-d1}}] ~
\begin{align*}
\mathcal{K}\suprel f\mathcal{I}\sqcup\mathcal{J} & \Leftrightarrow\\
(\mathcal{I}\sqcup\mathcal{J})\sqcap\supfun f\mathcal{K}\ne\bot^{\mathscr{F}(B)}
& \Leftrightarrow\\
\mathcal{I}\sqcap\supfun
f\mathcal{K}\ne\bot^{\mathscr{F}(B)}\lor\mathcal{J}\sqcap\supfun
f\mathcal{K}\ne\bot^{\mathscr{F}(B)} & \Leftrightarrow\\
\mathcal{K}\suprel f\mathcal{I}\lor\mathcal{K}\suprel f\mathcal{J}.
\end{align*}

\item [{\ref{fcd-f-d2}}] Similar.
\end{disorder}
\end{proof}

\begin{defn}
$f\sqsubseteq g\eqdef\mathord{\suprel f}\subseteq\mathord{\suprel g}$ for $f,g\in\mathsf{FCD}(A,B)$
for every sets $A$, $B$.
\end{defn}
Thus every $\mathsf{FCD}(A,B)$ is a poset. (It's taken into account
that $\mathord{\suprel f}\ne\mathord{\suprel g}$ when $f\ne g$.)

\index{filtrator!of funcoids}We will consider filtrators (\emph{filtrators
of funcoids}) whose base is $\mathsf{FCD}(A,B)$ and whose core are
principal funcoids from $A$ to $B$.

\section{Funcoid as continuation}

Let $f$ be a funcoid.
\begin{defn}
$\rsupfun f$ is the function $\mathscr{T}(\Src f)\rightarrow\mathscr{F}(\Dst f)$
defined by the formula
\[
\rsupfun fX=\supfun f\uparrow X.
\]

\end{defn}

\begin{defn}
$\rsuprel f$ is the relation between $\mathscr{T}(\Src f)$ and $\mathscr{T}(\Dst
f)$
defined by the formula
\[
X\rsuprel fY\Leftrightarrow\uparrow X\suprel f\uparrow Y.
\]
\end{defn}
\begin{obvious}
~
\begin{enumerate}
\item $\rsupfun f=\supfun f\circ\uparrow$;
\item $\mathord{\rsuprel f}=\uparrow^{-1}\circ\mathord{\suprel f}\circ\uparrow$.
\end{enumerate}
\end{obvious}

\begin{obvious}
$\supfun g\rsupfun fX=\rsupfun{g\circ f}X$ for every $X\in\mathscr{T}(\Src
f)$.\end{obvious}
\begin{thm}
For every funcoid $f$ and $\mathcal{X}\in\mathscr{F}(\Src f)$,
$\mathcal{Y}\in\mathscr{F}(\Dst f)$
\begin{enumerate}
\item \label{f-filt-x}$\supfun f\mathcal{X}=\bigsqcap\rsupfun{\rsupfun
f}\up\mathcal{X}$;
\item \label{frel-filt}$\mathcal{X}\suprel f\mathcal{Y}\Leftrightarrow\forall
X\in\up\mathcal{X},Y\in\up\mathcal{Y}:X\rsuprel fY$.
\end{enumerate}
\end{thm}
\begin{proof}
~
\begin{widedisorder}
\item [{\ref{frel-filt}}] ~
\begin{align*}
\mathcal{X}\suprel f\mathcal{Y} & \Leftrightarrow\\
\mathcal{Y}\sqcap\supfun f\mathcal{X}\ne\bot &
\Leftrightarrow\\
\forall Y\in\up\mathcal{Y}:\uparrow Y\sqcap\supfun
f\mathcal{X}\ne\bot & \Leftrightarrow\\
\forall Y\in\up\mathcal{Y}:\mathcal{X}\suprel f\uparrow Y.
\end{align*}



Analogously $\mathcal{X}\suprel f\mathcal{Y}\Leftrightarrow\forall
X\in\up\mathcal{X}:\uparrow X\suprel f\mathcal{Y}$.
Combining these two equivalences we get
\[
\mathcal{X}\suprel f\mathcal{Y}\Leftrightarrow\forall
X\in\up\mathcal{X},Y\in\up\mathcal{Y}:\uparrow X\suprel f\uparrow
Y\Leftrightarrow\forall X\in\up\mathcal{X},Y\in\up\mathcal{Y}:X\rsuprel fY.
\]


\item [{\ref{f-filt-x}}] ~
\begin{align*}
\mathcal{Y}\sqcap\supfun f\mathcal{X}\ne\bot &
\Leftrightarrow\\
\mathcal{X}\suprel f\mathcal{Y} & \Leftrightarrow\\
\forall X\in\up\mathcal{X}:\uparrow X\suprel f\mathcal{Y} & \Leftrightarrow\\
\forall X\in\up\mathcal{X}:\mathcal{Y}\sqcap\rsupfun fX\ne\bot.
\end{align*}



Let's denote $W=\setcond{\mathcal{Y}\sqcap\rsupfun fX}{X\in\up\mathcal{X}}$.
We will prove that $W$ is a generalized filter base. To prove this
it is enough to show that $V=\setcond{\rsupfun fX}{X\in\up\mathcal{X}}$
is a generalized filter base.


Let $\mathcal{P},\mathcal{Q}\in V$. Then $\mathcal{P}=\rsupfun fA$,
$\mathcal{Q}=\rsupfun fB$ where $A,B\in\up\mathcal{X}$; $A\sqcap
B\in\up\mathcal{X}$
and $\mathcal{R}\sqsubseteq\mathcal{P}\sqcap\mathcal{Q}$ for
$\mathcal{R}=\rsupfun f(A\sqcap B)\in V$.
So $V$ is a generalized filter base and thus $W$ is a generalized
filter base.


$\bot\notin W\Leftrightarrow\bigsqcap
W\ne\bot$
by properties of generalized filter bases. That is
\[
\forall X\in\up\mathcal{X}:\mathcal{Y}\sqcap\rsupfun
fX\neq\bot^{\mathscr{F}(\Dst
f)}\Leftrightarrow\mathcal{Y}\sqcap\bigsqcap\rsupfun{\rsupfun
f}\up\mathcal{X}\ne\bot.
\]



Comparing with the above, $\mathcal{Y}\sqcap\supfun
f\mathcal{X}\ne\bot^{\mathscr{F}(\Dst
f)}\Leftrightarrow\mathcal{Y}\sqcap\bigsqcap\rsupfun{\rsupfun
f}\up\mathcal{X}\ne\bot$.
So $\supfun f\mathcal{X}=\bigsqcap\rsupfun{\rsupfun f}\up\mathcal{X}$
because the lattice of filters is separable.

\end{widedisorder}
\end{proof}
\begin{cor}
Let $f$ be a funcoid.
\begin{enumerate}
\item The value of $f$ can be restored from the value of $\rsupfun f$.
\item The value of $f$ can be restored from the value of $\rsuprel f$.
\end{enumerate}
\end{cor}
\begin{prop}
For every $f\in\mathsf{FCD}(A,B)$ we have (for every $I,J\in\mathscr{T}A$)
\[
\rsupfun f\bot=\bot,\quad\rsupfun f(I\sqcup
J)=\rsupfun fI\sqcup\rsupfun fJ
\]
and
\begin{align*}
\lnot(I & \rsuprel f\bot), & I\sqcup J\rsuprel fK &
\Leftrightarrow I\rsuprel fK\lor J\rsuprel fK & \text{(for every
\ensuremath{I,J\in\mathscr{T}A}, \ensuremath{K\in\mathscr{T}B})},\\
\lnot(\bot & \rsuprel fI), & K\rsuprel fI\sqcup J &
\Leftrightarrow K\rsuprel fI\lor K\rsuprel fJ & \text{(for every
\ensuremath{I,J\in\mathscr{T}B}, \ensuremath{K\in\mathscr{T}A})}.
\end{align*}
\end{prop}
\begin{proof}
$\rsupfun f\bot=\supfun f\bot=\supfun
f\bot=\bot$;
\[
\rsupfun f(I\sqcup J)=\supfun f\uparrow(I\sqcup J)=\supfun f\uparrow
I\sqcup\supfun f\uparrow J=\rsupfun fI\sqcup\rsupfun fJ.
\]


$I\rsuprel
f\bot\Leftrightarrow\bot\nasymp\supfun
f\uparrow I\Leftrightarrow0$;
\begin{align*}
I\sqcup J\rsuprel fK & \Leftrightarrow\\
\uparrow(I\sqcup J)\suprel f\uparrow K & \Leftrightarrow\\
\uparrow K\nasymp\supfun f\uparrow(I\sqcup J) & \Leftrightarrow\\
\uparrow K\nasymp\rsupfun f(I\sqcup J) & \Leftrightarrow\\
\uparrow K\nasymp\rsupfun fI\sqcup\rsupfun fJ & \Leftrightarrow\\
\uparrow K\nasymp\rsupfun fI\lor\uparrow K\nasymp\rsupfun fJ & \Leftrightarrow\\
I\rsuprel fK\lor J\rsuprel fK.
\end{align*}


The rest follows from symmetry.\end{proof}
\begin{thm}
\label{fcd-as-cont}(fundamental theorem of theory of funcoids) Fix sets $A$ and $B$. Let $L_{F}=\mylambda
f{\mathsf{FCD}(A,B)}{\rsupfun f}$
and $L_{R}=\mylambda f{\mathsf{FCD}(A,B)}{\mathord{\rsuprel f}}$.
\begin{enumerate}
\item \label{main-f}$L_{F}$ is a bijection from the set $\mathsf{FCD}(A,B)$
to the set of functions $\alpha\in\mathscr{F}(B)^{\mathscr{T}A}$
that obey the conditions (for every $I,J\in\mathscr{T}A$)
\begin{equation}
\alpha\bot=\bot,\quad\alpha(I\sqcup J)=\alpha
I\sqcup\alpha J.\label{fchar-alph}
\end{equation}



For such $\alpha$ it holds (for every $\mathcal{X}\in\mathscr{F}(A)$)
\begin{equation}
\supfun{L_{F}^{-1}\alpha}\mathcal{X}=\bigsqcap\rsupfun{\alpha}\up\mathcal{X}
.\label{fchar-alph-c}
\end{equation}


\item \label{main-r}$L_{R}$ is a bijection from the set $\mathsf{FCD}(A,B)$
to the set of binary relations
$\delta\in\subsets(\mathscr{T}A\times\mathscr{T}B)$
that obey the conditions
\begin{equation}
\begin{aligned}\lnot(I & \mathrel\delta\bot), & I\sqcup
J\mathrel\delta K & \Leftrightarrow I\mathrel\delta K\lor J\mathrel\delta K &
\text{(for every \ensuremath{I,J\in\mathscr{T}A},
\ensuremath{K\in\mathscr{T}B})},\\
\lnot(\bot & \mathrel\delta I), & K\mathrel\delta I\sqcup J &
\Leftrightarrow K\mathrel\delta I\lor K\mathrel\delta J & \text{(for every
\ensuremath{I,J\in\mathscr{T}B}, \ensuremath{K\in\mathscr{T}A})}.
\end{aligned}
\label{f-char-delt}
\end{equation}



For such $\delta$ it holds (for every $\mathcal{X}\in\mathscr{F}(A)$,
$\mathcal{Y}\in\mathscr{F}(B)$)
\begin{equation}
\mathcal{X}\suprel{L_{R}^{-1}\delta}\mathcal{Y}\Leftrightarrow\forall
X\in\up\mathcal{X},Y\in\up\mathcal{Y}:X\mathrel\delta Y.\label{f-char-delt-c}
\end{equation}


\end{enumerate}
\end{thm}
\begin{proof}
Injectivity of $L_{F}$ and $L_{R}$, formulas (\ref{fchar-alph-c})
(for $\alpha\in\im L_{F}$) and (\ref{f-char-delt-c}) (for $\delta\in\im L_{R}$),
formulas (\ref{fchar-alph}) and (\ref{f-char-delt}) follow from
two previous theorems. The only thing remaining to prove is that for
every $\alpha$ and $\delta$ that obey the above conditions a corresponding
funcoid $f$ exists.
\begin{widedisorder}
\item [{\ref{main-r}}] Let define $\alpha\in\mathscr{F}(B)^{\mathscr{T}A}$
by the formula $\corestar(\alpha X)=\setcond{Y\in\mathscr{T}B}{X\mathrel\delta
Y}$
for every $X\in\mathscr{T}A$. (It is obvious that
$\setcond{Y\in\mathscr{T}B}{X\mathrel\delta Y}$
is a free star.) Analogously it can be defined
$\beta\in\mathscr{F}(A)^{\mathscr{T}B}$
by the formula $\corestar(\beta Y)=\setcond{X\in\mathscr{T}A}{X\mathrel\delta
Y}$.
Let's continue $\alpha$ and $\beta$ to
$\alpha'\in\mathscr{F}(B)^{\mathscr{F}(A)}$
and $\beta'\in\mathscr{F}(A)^{\mathscr{F}(B)}$ by the formulas
\[
\alpha'\mathcal{X}=\bigsqcap\rsupfun{\alpha}\up\mathcal{X}\quad\text{and}
\quad\beta'\mathcal{Y}=\bigsqcap\rsupfun{\beta}\up\mathcal{Y}
\]
and $\delta$ to $\delta'$ by the formula
\[
\mathcal{X}\mathrel{\delta'}\mathcal{Y}\Leftrightarrow\forall
X\in\up\mathcal{X},Y\in\up\mathcal{Y}:X\mathrel\delta Y.
\]



$\mathcal{Y}\sqcap\alpha'\mathcal{X}\ne\bot
\Leftrightarrow\mathcal{Y}\sqcap\bigsqcap\rsupfun{\alpha}\up\mathcal{X}\ne\bot
\Leftrightarrow\bigsqcap\rsupfun{\mathcal{Y}\sqcap}\rsupfun{
\alpha}\up\mathcal{X}\ne\bot$.
Let's prove that
\[
W=\rsupfun{\mathcal{Y}\sqcap}\rsupfun{\alpha}\up\mathcal{X}
\]
is a generalized filter base: To prove it is enough to show that
$\rsupfun{\alpha}\up\mathcal{X}$
is a generalized filter base. If
$\mathcal{A},\mathcal{B}\in\rsupfun{\alpha}\up\mathcal{X}$
then exist $X_{1},X_{2}\in\up\mathcal{X}$ such that $\mathcal{A}=\alpha X_{1}$,
$\mathcal{B}=\alpha X_{2}$.


Then $\alpha(X_{1}\sqcap X_{2})\in\rsupfun{\alpha}\up\mathcal{X}$.
So $\rsupfun{\alpha}\up\mathcal{X}$ is a generalized filter base
and thus $W$ is a generalized filter base.


By properties of generalized filter bases,
$\bigsqcap\rsupfun{\mathcal{Y}\sqcap}\rsupfun{\alpha}\mathcal{X}\ne\bot$
is equivalent to
\[
\forall X\in\up\mathcal{X}:\mathcal{Y}\sqcap\alpha X\ne\bot,
\]
what is equivalent to
\begin{align*}
\forall X\in\up\mathcal{X},Y\in\up\mathcal{Y}:\uparrow Y\sqcap\alpha
X\ne\bot & \Leftrightarrow\\
\forall X\in\up\mathcal{X},Y\in\up\mathcal{Y}:Y\in\corestar(\alpha X) &
\Leftrightarrow\\
\forall X\in\up\mathcal{X},Y\in\up\mathcal{Y}:X\mathrel\delta Y.
\end{align*}



Combining the equivalencies we get
$\mathcal{Y}\sqcap\alpha'\mathcal{X}\ne\bot
\Leftrightarrow\mathcal{X}\mathrel{\delta'}\mathcal{Y}$.
Analogously
$\mathcal{X}\sqcap\beta'\mathcal{Y}\ne\bot
\Leftrightarrow\mathcal{X}\mathrel{\delta'}\mathcal{Y}$.
So
$\mathcal{Y}\sqcap\alpha'\mathcal{X}\ne\bot
\Leftrightarrow\mathcal{X}\sqcap\beta'\mathcal{Y}\ne\bot$,
that is $(A,B,\alpha',\beta')$ is a funcoid. From the formula
$\mathcal{Y}\sqcap\alpha'\mathcal{X}\ne\bot^{\mathscr{F}(B)}
\Leftrightarrow\mathcal{X}\mathrel{\delta'}\mathcal{Y}$
it follows that
\[
X\rsuprel{(A,B,\alpha',\beta')}Y\Leftrightarrow\uparrow Y\sqcap\alpha'\uparrow
X\ne\bot\Leftrightarrow\uparrow X\mathrel{\delta'}\uparrow
Y\Leftrightarrow X\mathrel\delta Y.
\]


\item [{\ref{main-f}}] Let define the relation
$\delta\in\subsets(\mathscr{T}A\times\mathscr{T}B)$
by the formula $X\mathrel\delta Y\Leftrightarrow\uparrow Y\sqcap\alpha
X\ne\bot$.


That $\lnot(I\mathrel\delta\bot)$ and
$\lnot(\bot\mathrel\delta I)$
is obvious. We have
\begin{align*}
I\sqcup J\mathrel\delta K & \Leftrightarrow\\
\uparrow K\sqcap\alpha(I\sqcup J)\ne\bot & \Leftrightarrow\\
\uparrow K\sqcap(\alpha I\sqcup\alpha J)\ne\bot &
\Leftrightarrow\\
\uparrow K\sqcap\alpha I\ne\bot\lor\uparrow K\sqcap\alpha
J\ne\bot & \Leftrightarrow\\
I\mathrel\delta K\lor J\mathrel\delta K
\end{align*}
and
\begin{align*}
K\mathrel\delta I\sqcup J & \Leftrightarrow\\
\uparrow(I\sqcup J)\sqcap\alpha K\ne\bot & \Leftrightarrow\\
(\uparrow I\sqcup\uparrow J)\sqcap\alpha K\ne\bot &
\Leftrightarrow\\
\uparrow I\sqcap\alpha K\ne\bot\lor\uparrow J\sqcap\alpha
K\ne\bot & \Leftrightarrow\\
K\mathrel\delta I\lor K\mathrel\delta J.
\end{align*}



That is the formulas (\ref{f-char-delt}) are true.


Accordingly to the above there exists a funcoid $f$ such that
\[
\mathcal{X}\suprel f\mathcal{Y}\Leftrightarrow\forall
X\in\up\mathcal{X},Y\in\up\mathcal{Y}:X\mathrel\delta Y.
\]



For every $X\in\mathscr{T}A$, $Y\in\mathscr{T}B$ we have:
\[
\uparrow Y\sqcap\supfun f\uparrow
X\ne\bot\Leftrightarrow\uparrow X\suprel f\uparrow
Y\Leftrightarrow X\mathrel\delta Y\Leftrightarrow\uparrow Y\sqcap\alpha
X\ne\bot,
\]
consequently $\forall X\in\mathscr{T}A:\alpha X=\supfun f\uparrow X=\rsupfun
fX$.

\end{widedisorder}
\end{proof}
Note that by the last theorem to every (quasi-)proximity $\delta$ corresponds
a unique funcoid. So funcoids are a generalization of (quasi-)proximity
structures. Reverse funcoids can be considered as a generalization
of conjugate quasi-proximity.
\begin{cor}
If $\alpha\in\mathscr{F}(B)^{\mathscr{T}A}$,
$\beta\in\mathscr{F}(A)^{\mathscr{T}B}$
are functions such that $Y\nasymp\alpha X\Leftrightarrow X\nasymp\beta Y$
for every $X\in\mathscr{T}A$, $Y\in\mathscr{T}B$, then there exists
exactly one funcoid $f$ such that $\langle f\rangle^{\ast}=\alpha$,
$\langle f^{-1}\rangle^{\ast}=\beta$.\end{cor}
\begin{proof}
Prove $\alpha(I\sqcup J)=\alpha I\sqcup\alpha J$. Really,
$Y\nasymp\alpha(I\sqcup J)\Leftrightarrow I\sqcup J\nasymp\beta Y\Leftrightarrow
I\nasymp\beta Y\vee J\nasymp\beta Y\Leftrightarrow Y\nasymp\alpha I\vee
Y\nasymp\alpha J\Leftrightarrow Y\nasymp\alpha I\sqcup\alpha J$.
So $\alpha(I\sqcup J)=\alpha I\sqcup\alpha J$ by star-separability.
Similarly $\beta(I\sqcup J)=\beta I\sqcup\beta J$.

Thus by the theorem there exists a funcoid $f$ such that $\langle
f\rangle^{\ast}=\alpha$,
$\langle f^{-1}\rangle^{\ast}=\beta$.

That this funcoid is unique, follows from the above.\end{proof}
\begin{defn}
Any $\mathbf{Rel}$-morphism $F:A\rightarrow B$ corresponds to a
funcoid $\uparrow^{\mathsf{FCD}}F\in\mathsf{FCD}(A,B)$, where by
definition
$\supfun{\uparrow^{\mathsf{FCD}}F}\mathcal{X}=\bigsqcap^{\mathscr{F}}\rsupfun{
\rsupfun F}\up\mathcal{X}$
for every $\mathcal{X}\in\mathscr{F}(A)$.
\end{defn}
Using the last theorem it is easy to show that this definition is
monovalued and does not contradict to former stuff. (Take
$\alpha=\uparrow\circ\rsupfun F$.)
\begin{prop}
$\rsupfun{\uparrow^{\mathsf{FCD}}f}X=\rsupfun fX$ for a
$\mathbf{Rel}$-morphism~$f$
and $X\in\mathscr{T}\Src f$.\end{prop}
\begin{proof}
$\rsupfun{\uparrow^{\mathsf{FCD}}f}X=\min\rsupfun{\uparrow}\rsupfun{\rsupfun
f}\up X=\uparrow\rsupfun fX=\rsupfun fX$.\end{proof}
\begin{cor}
$\mathord{\rsuprel{\uparrow^{\mathsf{FCD}}f}}=\mathord{\rsuprel f}$
for every $\mathbf{Rel}$-morphism~$f$.\end{cor}
\begin{proof}
$X\rsuprel{\uparrow^{\mathsf{FCD}}f}Y\Leftrightarrow
Y\nasymp\rsupfun{\uparrow^{\mathsf{FCD}}f}X\Leftrightarrow Y\nasymp\rsupfun
fX\Leftrightarrow X\rsuprel fY$
for $X\in\mathscr{T}\Src f$, $Y\in\mathscr{T}\Dst f$.\end{proof}
\begin{defn}
$\uparrow^{\mathsf{FCD}(A,B)}f=\uparrow^{\mathsf{FCD}}(A,B,f)$ for
every binary relation~$f$ between sets~$A$ and~$B$.
\end{defn}

\begin{defn}
\index{funcoid!principal}\index{principal!funcoid}Funcoids corresponding
to a binary relation (= multivalued function) are called \emph{principal
funcoids}.\end{defn}
\begin{prop}
$\uparrow^{\mathsf{FCD}}g\circ\uparrow^{\mathsf{FCD}}f=\uparrow^{\mathsf{FCD}}
(g\circ f)$
for composable morphisms~$f$,~$g$ of category~$\mathbf{Rel}$.\end{prop}
\begin{proof}
For every $X\in\mathscr{T}\Src f$
\begin{multline*}
\rsupfun{\uparrow^{\mathsf{FCD}}g\circ\uparrow^{\mathsf{FCD}}f}X=\rsupfun{
\uparrow^{\mathsf{FCD}}g}\rsupfun{\uparrow^{\mathsf{FCD}}f}X=\\
\rsupfun g\rsupfun fX=\rsupfun{g\circ
f}X=\rsupfun{\uparrow^{\mathsf{FCD}}(g\circ f)}X.
\end{multline*}

\end{proof}
We may equate principal funcoids with corresponding binary relations
by the method of appendix~\ref{app:prim-exists}. This is useful
for describing relationships of funcoids and binary relations, such
as for the formulas of continuous functions and continuous funcoids
(see below).

\begin{thm}
\label{supfun-genbase}If $S$ is a generalized filter base on $\Src f$
then $\supfun f\bigsqcap S=\bigsqcap\rsupfun{\supfun f}S$ for every
funcoid $f$.\end{thm}
\begin{proof}
$\supfun f\bigsqcap S\sqsubseteq\supfun fX$ for every $X\in S$ and
thus $\supfun f\bigsqcap S\sqsubseteq\bigsqcap\rsupfun{\supfun f}S$.

By properties of generalized filter bases:

\begin{align*}
\supfun f\bigsqcap S & =\\
\bigsqcap\rsupfun{\rsupfun f}\up\bigsqcap S & =\\
\bigsqcap\rsupfun{\rsupfun f}\setcond X{\exists\mathcal{P}\in
S:X\in\up\mathcal{P}} & =\\
\bigsqcap\setcond{\rsupfun fX}{\exists\mathcal{P}\in S:X\in\up\mathcal{P}} &
\sqsupseteq\\
\bigsqcap_{\mathcal{P}\in S}\supfun f\mathcal{P} & =\\
\bigsqcap\rsupfun{\supfun f}S.
\end{align*}
\end{proof}
\begin{prop}
$\mathcal{X}\suprel f\bigsqcap S\Leftrightarrow\exists\mathcal{Y}\in
S:\mathcal{X}\suprel f\mathcal{Y}$
if $f$ is a funcoid and $S$ is a generalized filter base on $\Dst f$.\end{prop}
\begin{proof}
~
\begin{multline*}
\mathcal{X}\suprel f\bigsqcap S\Leftrightarrow\bigsqcap S\sqcap\supfun
f\mathcal{X}\neq\bot\Leftrightarrow\bigsqcap\langle\langle
f\rangle\mathcal{X}\sqcap\rangle^{\ast}S\neq\bot\Leftrightarrow\\
\text{(by properties of generalized filter bases)}\Leftrightarrow\\
\exists\mathcal{Y}\in\langle\supfun
f\mathcal{X}\sqcap\rangle^{\ast}S:\mathcal{Y}
\neq\bot\Leftrightarrow\exists\mathcal{Y}\in S:\langle
f\rangle\mathcal{X}\sqcap\mathcal{Y}\neq\bot\Leftrightarrow\exists\mathcal{Y}\in
S:\mathcal{X}\suprel f\mathcal{Y}.
\end{multline*}
\end{proof}
\begin{defn}
\index{preserve filtered meets}
A function $f$ between two posets is said to \emph{preserve filtered meets}, when $f\bigsqcap S=\bigsqcap\rsupfun{f}S$
whenever $\bigsqcap S$ is defined for a filter base~$S$ on the first of the two posets.
\end{defn}
\begin{thm}
\label{fcd-as-func}(discovered by \noun{Todd Trimble}) A function
$\varphi:\mathscr{F}(A)\rightarrow\mathscr{F}(B)$ preserves finite
joins (including nullary joins) and filtered meets iff there exists
a funcoid $f$ such that $\supfun f=\varphi$.\end{thm}
\begin{proof}
Backward implication follows from above.

Let $\psi=\varphi|_{\mathscr{T}A}$. Then $\psi$ preserves bottom
element and binary joins. Thus there exists a funcoid $f$ such that
$\rsupfun f=\psi$.

It remains to prove that $\supfun f=\varphi$.

Really, $\supfun f\mathcal{X}=\bigsqcap\rsupfun{\rsupfun
f}\up\mathcal{X}=\bigsqcap\rsupfun{\psi}\up\mathcal{X}=\bigsqcap\rsupfun{\varphi
}\up\mathcal{X}=\varphi\bigsqcap\up\mathcal{X}=\varphi\mathcal{X}$
for every $\mathcal{X}\in\mathscr{F}(A)$.\end{proof}
\begin{cor}
Funcoids $f$ from $A$ to $B$ bijectively correspond by the formula
$\langle f\rangle=\varphi$ to functions
$\varphi:\mathscr{F}(A)\rightarrow\mathscr{F}(B)$
preserving finite joins and filtered meets.
\end{cor}

\subsection{Composition of funcoids}
\begin{defn}
\index{composable!funcoids}\index{funcoids!composable}Funcoids $f$
and $g$ are \emph{composable} when $\Dst f=\Src g$.
\end{defn}

\begin{defn}
\index{composition!funcoids}\index{funcoids!composition}\emph{Composition}
of composable funcoids is defined by the formula
\[
(B,C,\alpha_{2},\beta_{2})\circ(A,B,\alpha_{1},\beta_{1})=(A,C,\alpha_{2}
\circ\alpha_{1},\beta_{1}\circ\beta_{2}).
\]
\end{defn}
\begin{prop}
If $f$, $g$ are composable funcoids then $g\circ f$ is a funcoid.\end{prop}
\begin{proof}
Let $f=(A,B,\alpha_{1},\beta_{1})$, $g=(B,C,\alpha_{2},\beta_{2})$.
For every $\mathcal{X}\in\mathscr{F}(A)$, $\mathcal{Y}\in\mathscr{F}(C)$
we have
\[
\mathcal{Y}\nasymp(\alpha_{2}\circ\alpha_{1})\mathcal{X}\Leftrightarrow\mathcal{
Y}\nasymp\alpha_{2}\alpha_{1}\mathcal{X}\Leftrightarrow\alpha_{1}\mathcal{X}
\nasymp\beta_{2}\mathcal{Y}\Leftrightarrow\mathcal{X}\nasymp\beta_{1}\beta_{2}
\mathcal{Y}\Leftrightarrow\mathcal{X}\nasymp(\beta_{1}\circ\beta_{2})\mathcal{Y}
.
\]


So $(A,C,\alpha_{2}\circ\alpha_{1},\beta_{1}\circ\beta_{2})$ is a
funcoid.\end{proof}
\begin{obvious}
$\supfun{g\circ f}=\supfun g\circ\supfun f$ for every composable
funcoids $f$ and $g$.\end{obvious}
\begin{prop}
$(h\circ g)\circ f=h\circ(g\circ f)$ for every composable funcoids
$f$, $g$, $h$.\end{prop}
\begin{proof}
~
\begin{align*}
\supfun{(h\circ g)\circ f} & =\\
\supfun{h\circ g}\circ\supfun f & =\\
(\supfun h\circ\supfun g)\circ\supfun f & =\\
\supfun h\circ(\supfun g\circ\supfun f) & =\\
\supfun h\circ\supfun{g\circ f} & =\\
\supfun{h\circ(g\circ f)}.
\end{align*}
\end{proof}
\begin{thm}
$(g\circ f)^{-1}=f^{-1}\circ g^{-1}$ for every composable funcoids
$f$ and $g$.\end{thm}
\begin{proof}
$\supfun{(g\circ
f)^{-1}}=\supfun{f^{-1}}\circ\supfun{g^{-1}}=\supfun{f^{-1}\circ g^{-1}}$.
\end{proof}

\section{Identity funcoids}

\begin{defn}
\index{funcoid!identity}Let $A$ be a set. The \emph{identity funcoid}
$1_{A}^{\mathsf{FCD}}=(A,A,\id_{\mathscr{F}(A)},\id_{\mathscr{F}(A)})$.
\end{defn}
\begin{obvious}
The identity funcoid is a funcoid.\end{obvious}
\begin{prop}
$\mathord{\suprel f}=\mathord{\suprel{1_{\Dst f}}}\circ\supfun f$
for every funcoid $f$.\end{prop}
\begin{proof}
From proposition~\ref{comp-fcd-r}.\end{proof}
\begin{defn}
\index{funcoid!restricted identity}Let $A$ be a set,
$\mathcal{A}\in\mathscr{F}(A)$.
The \emph{restricted identity funcoid
\[
\id_{\mathcal{A}}^{\mathsf{FCD}}=(A,A,\mathcal{A}\sqcap,\mathcal{A}\sqcap).
\]
}\end{defn}
\begin{prop}
The restricted identity funcoid is a funcoid.\end{prop}
\begin{proof}
We need to prove that
$(\mathcal{A}\sqcap\mathcal{X})\sqcap\mathcal{Y}\ne\bot
\Leftrightarrow(\mathcal{A}\sqcap\mathcal{Y})\sqcap\mathcal{X}\ne\bot$
what is obvious.\end{proof}

\begin{obvious}
~
\begin{enumerate}
\item $(1_{A}^{\mathsf{FCD}})^{-1}=1_{A}^{\mathsf{FCD}}$;
\item
$(\id_{\mathcal{A}}^{\mathsf{FCD}})^{-1}=\id_{\mathcal{A}}^{\mathsf{FCD}}$.
\end{enumerate}
\end{obvious}

\begin{obvious}
For every $\mathcal{X},\mathcal{Y}\in\mathscr{F}(A)$
\begin{enumerate}
\item
$\mathcal{X}\suprel{1_{A}^{\mathsf{FCD}}}\mathcal{Y}\Leftrightarrow\mathcal{X}
\sqcap\mathcal{Y}\ne\bot$;
\item
$\mathcal{X}\suprel{\id_{\mathcal{A}}^{\mathsf{FCD}}}\mathcal{Y}
\Leftrightarrow\mathcal{A}\sqcap\mathcal{X}\sqcap\mathcal{Y}\ne\bot$.
\end{enumerate}
\end{obvious}
\begin{defn}
\index{restricting!funcoid}I will define \emph{restricting} of a
funcoid $f$ to a filter $\mathcal{A}\in\mathscr{F}(\Src f)$ by the
formula
\[
f|_{\mathcal{A}}=f\circ\id_{\mathcal{A}}^{\mathsf{FCD}}.
\]
\end{defn}

\section{Categories of funcoids}

I will define two categories, the \emph{category of funcoids} and
the \emph{category of funcoid triples}.

\index{category!of funcoids}The \emph{category of funcoids} is defined
as follows:
\begin{itemize}
\item Objects are small sets.
\item The set of morphisms from a set $A$ to a set $B$ is $\mathsf{FCD}(A,B)$.
\item The composition is the composition of funcoids.
\item Identity morphism for a set is the identity funcoid for that set.
\end{itemize}
To show it is really a category is trivial.

\index{category!of funcoid triples}The \emph{category of funcoid
triples} is defined as follows:
\begin{itemize}
\item Objects are filters on small sets.
\item The morphisms from a filter $\mathcal{A}$ to a filter $\mathcal{B}$
are triples $(\mathcal{A},\mathcal{B},f)$ where
$f\in\mathsf{FCD}(\Base(\mathcal{A}),\Base(\mathcal{B}))$
and $\dom f\sqsubseteq\mathcal{A}\land\im f\sqsubseteq\mathcal{B}$.
\item The composition is defined by the formula
$(\mathcal{B},\mathcal{C},g)\circ(\mathcal{A},\mathcal{B},f)=(\mathcal{A}
,\mathcal{C},g\circ f)$.
\item Identity morphism for a filter $\mathcal{A}$ is
$\id_{\mathcal{A}}^{\mathsf{FCD}}$.
\end{itemize}
To prove that it is really a category is trivial.
\begin{prop}
$\uparrow^{\mathsf{FCD}}$ is a functor from $\mathbf{Rel}$ to
$\mathsf{FCD}$.\end{prop}
\begin{proof}
$\uparrow^{\mathsf{FCD}}(g\circ
f)=\uparrow^{\mathsf{FCD}}g\circ\uparrow^{\mathsf{FCD}}f$
was proved above.
$\uparrow^{\mathsf{FCD}}1_{A}^{\mathbf{Rel}}=1_{A}^{\mathsf{FCD}}$
is obvious.
\end{proof}

\section{Lattices of funcoids}
\begin{lem}\label{fcd-up-x-lem}
$\rsupfun fX=\bigsqcap_{F\in\up f}^{\mathscr{F}}\rsupfun FX$ for
every funcoid $f$ and typed set $X\in\mathscr{T}(\Src f)$.\end{lem}
\begin{proof}
Obviously $\rsupfun fX\sqsubseteq\bigsqcap_{F\in\up f}^{\mathscr{F}}\rsupfun
FX$.

Let $B\in\up\rsupfun fX$. Let $F_{B}=X\times B\sqcup\overline{X}\times\top$.

$\rsupfun{F_{B}}X=B$.

Let $P\in\mathscr{T}(\Src f)$. We have
\[
\bot\ne P\sqsubseteq
X\Rightarrow\rsupfun{F_{B}}P=B\sqsupseteq\rsupfun fP
\]
and
\[
P\nsqsubseteq
X\Rightarrow\rsupfun{F_{B}}P=\top\sqsupseteq\rsupfun fP.
\]


Thus $\rsupfun{F_{B}}P\sqsupseteq\rsupfun fP$ for every $P$ and
so $F_{B}\sqsupseteq f$ that
is $F_{B}\in\up f$.

Thus $\forall B\in\up\rsupfun fX:B\in\up\bigsqcap_{F\in\up
f}^{\mathscr{F}}\rsupfun FX$
because $B\in\up\rsupfun{F_{B}}X$.

So $\bigsqcap_{F\in\up f}\rsupfun FX\sqsubseteq\rsupfun fX$.\end{proof}
\begin{thm}
\label{fcd-up-x}$\supfun f\mathcal{X}=\bigsqcap_{F\in\up f}^{\mathscr{F}}\supfun
F\mathcal{X}$
for every funcoid $f$ and $\mathcal{X}\in\mathscr{F}(\Src f)$.\end{thm}
\begin{proof}
~
\begin{align*}
\bigsqcap_{F\in\up f}^{\mathscr{F}}\supfun F\mathcal{X} & =\\
\bigsqcap_{F\in\up f}^{\mathscr{F}}\bigsqcap^{\mathscr{F}}\rsupfun{\rsupfun F}\up\mathcal{X} & =\\
\bigsqcap_{F\in\up
f}^{\mathscr{F}}\bigsqcap_{X\in\up\mathcal{X}}^{\mathscr{F}}\rsupfun FX & =\\
\bigsqcap_{X\in\up\mathcal{X}}^{\mathscr{F}}\bigsqcap_{F\in\up
f}^{\mathscr{F}}\rsupfun FX & =\\
\bigsqcap_{X\in\up\mathcal{X}}^{\mathscr{F}}\rsupfun fX & =\\
\supfun f\mathcal{X}
\end{align*}
(the lemma used).
\end{proof}
Below it is shown that $\mathsf{FCD}(A,B)$ are complete lattices
for every sets $A$ and $B$. We will apply lattice operations to
subsets of such sets without explicitly mentioning $\mathsf{FCD}(A,B)$.
\begin{thm}
\label{fcd-join-sets}$\mathsf{FCD}(A,B)$ is a complete lattice (for
every sets $A$ and $B$). For every $R\in\subsets\mathsf{FCD}(A,B)$
and $X\in\mathscr{T}A$, $Y\in\mathscr{T}B$
\begin{enumerate}
\item \label{sr-join}$X\rsuprel{\bigsqcup R}Y\Leftrightarrow\exists f\in
R:X\rsuprel fY$;
\item \label{sf-join}$\rsupfun{\bigsqcup R}X=\bigsqcup_{f\in R}\rsupfun fX$.
\end{enumerate}
\end{thm}
\begin{proof}
Accordingly \cite{pm:complete-lattice-criteria} to prove that it
is a complete lattice it's enough to prove existence of all joins.
\begin{widedisorder}
\item [{\ref{sf-join}}] $\alpha X\eqdef\bigsqcup_{f\in R}\rsupfun fX$.
We have $\alpha\bot=\bot$;
\begin{align*}
\alpha(I\sqcup J) & =\\
\bigsqcup_{f\in R}\rsupfun f(I\sqcup J) & =\\
\bigsqcup_{f\in R}(\rsupfun fI\sqcup\rsupfun fJ) & =\\
\bigsqcup_{f\in R}\rsupfun fI\sqcup\bigsqcup\rsupfun fJ & =\\
\alpha I\sqcup\alpha J.
\end{align*}



So $\rsupfun h=\alpha$ for some funcoid $h$. Obviously
\begin{equation}
\forall f\in R:h\sqsupseteq f.\label{min-fcd-join}
\end{equation}



And $h$ is the least funcoid for which holds the condition (\ref{min-fcd-join}).
So $h=\bigsqcup R$.

\item [{\ref{sr-join}}] ~
\begin{align*}
X\rsuprel{\bigsqcup R}Y & \Leftrightarrow\\
\uparrow Y\sqcap\rsupfun{\bigsqcup R}X\ne\bot &
\Leftrightarrow\\
\uparrow Y\sqcap\bigsqcup_{f\in R}\rsupfun fX\ne\bot &
\Leftrightarrow\\
\exists f\in R:\uparrow Y\sqcap\rsupfun fX\ne\bot &
\Leftrightarrow\\
\exists f\in R:X\rsuprel fY
\end{align*}
(used proposition~\ref{b-f-back-distr}).
\end{widedisorder}
\end{proof}
In the next theorem, compared to the previous one, the class of infinite
joins is replaced with lesser class of binary joins and simultaneously
class of sets is changed to more wide class of filters.
\begin{thm}
\label{fcd-fin-join}For every $f,g\in\mathsf{FCD}(A,B)$ and
$\mathcal{X}\in\mathscr{F}(A)$
(for every sets $A$,~$B$)
\begin{enumerate}
\item \label{fjoin-x}$\supfun{f\sqcup g}\mathcal{X}=\supfun
f\mathcal{X}\sqcup\supfun g\mathcal{X}$;
\item \label{fjoin-r}$\mathord{\suprel{f\sqcup g}}=\mathord{\suprel
f}\cup\mathord{\suprel g}$.
\end{enumerate}
\end{thm}
\begin{proof}
~
\begin{widedisorder}
\item [{\ref{fjoin-x}}] Let $\alpha\mathcal{X}\eqdef\supfun
f\mathcal{X}\sqcup\supfun g\mathcal{X}$;
$\beta\mathcal{Y}\eqdef\supfun{f^{-1}}\mathcal{Y}\sqcup\supfun{g^{-1}}\mathcal{Y
}$
for every $\mathcal{X}\in\mathscr{F}(A)$, $\mathcal{Y}\in\mathscr{F}(B)$.
Then
\begin{align*}
\mathcal{Y}\sqcap\alpha\mathcal{X}\ne\bot & \Leftrightarrow\\
\mathcal{Y}\sqcap\supfun
f\mathcal{X}\ne\bot\lor\mathcal{Y}\sqcap\supfun
g\mathcal{X}\ne\bot & \Leftrightarrow\\
\mathcal{X}\sqcap\supfun{f^{-1}}\mathcal{Y}\ne\bot\lor\mathcal{
X}\sqcap\supfun{g^{-1}}\mathcal{Y}\ne\bot & \Leftrightarrow\\
\mathcal{X}\sqcap\beta\mathcal{Y}\ne\bot.
\end{align*}
So $h=(A,B,\alpha,\beta)$ is a funcoid. Obviously $h\sqsupseteq f$
and $h\sqsupseteq g$. If $p\sqsupseteq f$ and $p\sqsupseteq g$
for some funcoid $p$ then $\supfun p\mathcal{X}\sqsupseteq\supfun
f\mathcal{X}\sqcup\supfun g\mathcal{X}=\supfun h\mathcal{X}$
that is $p\sqsupseteq h$. So $f\sqcup g=h$.
\item [{\ref{fjoin-r}}] For every $\mathcal{X}\in\mathscr{F}(A)$,
$\mathcal{Y}\in\mathscr{F}(B)$
we have
\begin{align*}
\mathcal{X}\suprel{f\sqcup g}\mathcal{Y} & \Leftrightarrow\\
\mathcal{Y}\sqcap\supfun{f\sqcup g}\mathcal{X}\ne\bot &
\Leftrightarrow\\
\mathcal{Y}\sqcap(\supfun f\mathcal{X}\sqcup\supfun
g\mathcal{X})\ne\bot & \Leftrightarrow\\
\mathcal{Y}\sqcap\supfun
f\mathcal{X}\ne\bot\lor\mathcal{Y}\sqcap\supfun
g\mathcal{X}\ne\bot & \Leftrightarrow\\
\mathcal{X}\suprel f\mathcal{Y}\lor\mathcal{X}\suprel g\mathcal{Y}.
\end{align*}

\end{widedisorder}
\end{proof}

\section{Funcoidal product of filters}

A generalization of Cartesian product of two sets is funcoidal product
of two filters:
\begin{defn}
\index{product!funcoidal}\emph{Funcoidal product} of filters $\mathcal{A}$
and $\mathcal{B}$ is such a funcoid
$\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}\in\mathsf{FCD}(\Base(\mathcal{A}
),\Base(\mathcal{B}))$
that for every $\mathcal{X}\in\Base(\mathcal{A})$,
$\mathcal{Y}\in\Base(\mathcal{B})$
\[
\mathcal{X}\suprel{\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}}\mathcal{Y}
\Leftrightarrow\mathcal{X}\nasymp\mathcal{A}\land\mathcal{Y}\nasymp\mathcal{B}.
\]
\end{defn}
\begin{prop}
$\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}$ is really a funcoid
and
\[
\supfun{\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}}\mathcal{X}=\begin{cases}
\mathcal{B} & \text{if }\mathcal{X}\nasymp\mathcal{A}\\
\bot^{\mathscr{F}(\Base(\mathcal{B}))} & \text{if }\mathcal{X}\asymp\mathcal{A}.
\end{cases}
\]
\end{prop}
\begin{proof}
Obvious.\end{proof}
\begin{obvious}
~
\begin{itemize}
\item $\uparrow^{\mathsf{FCD}(U,V)}(A\times B)=\uparrow^{U}A\times\uparrow^{V}B$
for sets $A\subseteq U$ and $B\subseteq V$.
\item $\uparrow^{\mathsf{FCD}}(A\times B)=\uparrow A\times\uparrow B$ for
typed sets~$A$ and~$B$.
\end{itemize}
\end{obvious}

\begin{prop}
\fxerror{Move this proposition below.}
$f\sqsubseteq\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}\Leftrightarrow\dom
f\sqsubseteq\mathcal{A}\land\im f\sqsubseteq\mathcal{B}$
for every $f\in\mathsf{FCD}(A,B)$ and $\mathcal{A}\in\mathscr{F}(A)$,
$\mathcal{B}\in\mathscr{F}(B)$.\end{prop}
\begin{proof}
If $f\sqsubseteq\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}$ then
$\dom
f\sqsubseteq\dom(\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B})\sqsubseteq\mathcal
{A}$,
$\im
f\sqsubseteq\im(\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B})\sqsubseteq\mathcal{
B}$.
If $\dom f\sqsubseteq\mathcal{A}\land\im f\sqsubseteq\mathcal{B}$
then
\[
\forall\mathcal{X}\in\mathscr{F}(A),\mathcal{Y}\in\mathscr{F}(B):(\mathcal{X}
\suprel
f\mathcal{Y}\Rightarrow\mathcal{X}\sqcap\mathcal{A}\ne\bot
\land\mathcal{Y}\sqcap\mathcal{B}\ne\bot);
\]
consequently $f\sqsubseteq\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}$.
\end{proof}
The following theorem gives a formula for calculating an important
particular case of a meet on the lattice of funcoids:
\begin{thm}
$f\sqcap(\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B})=\id_{\mathcal{B}}^{\mathsf
{FCD}}\circ f\circ\id_{\mathcal{A}}^{\mathsf{FCD}}$
for every funcoid $f$ and $\mathcal{A}\in\mathscr{F}(\Src f)$,
$\mathcal{B}\in\mathscr{F}(\Dst f)$.\end{thm}
\begin{proof}
$h\eqdef\id_{\mathcal{B}}^{\mathsf{FCD}}\circ
f\circ\id_{\mathcal{A}}^{\mathsf{FCD}}$.
For every $\mathcal{X}\in\mathscr{F}(\Src f)$
\[
\supfun h\mathcal{X}=\supfun{\id_{\mathcal{B}}^{\mathsf{FCD}}}\supfun
f\supfun{\id_{\mathcal{A}}^{\mathsf{FCD}}}\mathcal{X}=\mathcal{B}\sqcap\supfun
f(\mathcal{A}\sqcap\mathcal{X}).
\]


From this, as easy to show, $h\sqsubseteq f$ and
$h\sqsubseteq\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}$.
If $g\sqsubseteq f\land g\sqsubseteq\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}$
for a $g\in\mathsf{FCD}(\Src f,\Dst f)$ then $\dom g\sqsubseteq\mathcal{A}$,
$\im g\sqsubseteq\mathcal{B}$,
\[
\supfun g\mathcal{X}=\mathcal{B}\sqcap\supfun
g(\mathcal{A}\sqcap\mathcal{X})\sqsubseteq\mathcal{B}\sqcap\supfun
f(\mathcal{A}\sqcap\mathcal{X})=\supfun{\id_{\mathcal{B}}^{\mathsf{FCD}}}\supfun
f\supfun{\id_{\mathcal{A}}^{\mathsf{FCD}}}\mathcal{X}=\supfun h\mathcal{X},
\]
$g\sqsubseteq h$. So
$h=f\sqcap(\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B})$.\end{proof}
\begin{cor}
$f|_{\mathcal{A}}=f\sqcap(\mathcal{A}\times^{\mathsf{FCD}}\top^{\mathscr{F}(\Dst
f)})$
for every funcoid $f$ and $\mathcal{A}\in\mathscr{F}(\Src f)$.\end{cor}
\begin{proof}
$f\sqcap(\mathcal{A}\times^{\mathsf{FCD}}\top^{\mathscr{F}(\Dst
f)})=\id_{\top^{\mathscr{F}(\Dst f)}}^{\mathsf{FCD}}\circ
f\circ\id_{\mathcal{A}}^{\mathsf{FCD}}=f\circ\id_{\mathcal{A}}^{\mathsf{FCD}}
=f|_{\mathcal{A}}$.\end{proof}
\begin{cor}\label{pintrs-fcd}
$f\nasymp\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B}\Leftrightarrow\mathcal{A}
\suprel f\mathcal{B}$
for every funcoid $f$ and $\mathcal{A}\in\mathscr{F}(\Src f)$,
$\mathcal{B}\in\mathscr{F}(\Dst f)$.\end{cor}
\begin{proof}
~
\begin{align*}
f\nasymp\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B} & \Leftrightarrow\\
\rsupfun{f\sqcap(\mathcal{A}\times^{\mathsf{FCD}}\mathcal{B})}\top\ne\bot & \Leftrightarrow\\
\rsupfun{\id_{\mathcal{B}}^{\mathsf{FCD}}\circ
f\circ\id_{\mathcal{A}}^{\mathsf{FCD}}}\top\ne\bot & \Leftrightarrow\\
\supfun{\id_{\mathcal{B}}^{\mathsf{FCD}}}\supfun
f\rsupfun{\id_{\mathcal{A}}^{\mathsf{FCD}}}\top\ne\bot & \Leftrightarrow\\
\mathcal{B}\sqcap\supfun f(\mathcal{A}\sqcap\top)\ne\bot & \Leftrightarrow\\
\mathcal{B}\sqcap\supfun f\mathcal{A}\ne\bot &
\Leftrightarrow\\
\mathcal{A}\suprel f\mathcal{B}.
\end{align*}
\end{proof}

\section{\label{fcd-rel-another}Another way to represent funcoids as binary
relations}

This is based on a\noun{ Todd Trimble}'s idea.
\begin{defn}
The binary relation
$\xi^{\circledast}\in\subsets(\mathscr{F}(\Src\xi)\times\mathscr{F}(\Dst\xi))$
for a funcoid $\xi$ is defined by the formula
$\mathcal{A}\mathrel{\xi^{\circledast}}\mathcal{B}\Leftrightarrow\mathcal{B}
\sqsupseteq\langle\xi\rangle\mathcal{A}$.
\end{defn}

\begin{defn}
The binary relation
$\xi^{\ast}\in\subsets(\mathscr{T}\Src\xi\times\mathscr{T}\Dst\xi)$
for a funcoid $\xi$ is defined by the formula
\[
A\mathrel{\xi^{\ast}}B\Leftrightarrow B\sqsupseteq\langle\xi\rangle
A\Leftrightarrow B\in\up\langle\xi\rangle A.
\]
\end{defn}
\begin{prop}
Funcoid $\xi$ can be restored from
\begin{enumerate}
\item the value of $\xi^{\circledast}$;
\item the value of $\xi^{\ast}$.
\end{enumerate}
\end{prop}
\begin{proof}
~
\begin{enumerate}
\item The value of $\supfun{\xi}$ can be restored from $\xi^{\circledast}$.
\item The value of $\rsupfun{\xi}$ can be restored from $\xi^{\ast}$.
\end{enumerate}
\end{proof}
\begin{thm}
Let $\nu$ and $\xi$ be composable funcoids. Then:
\begin{enumerate}
\item
\label{fcomp-1}$\xi^{\circledast}\circ\nu^{\circledast}=(\xi\circ\nu)^{
\circledast}$;
\item \label{fcomp-2}$\xi^{\ast}\circ\nu^{\ast}=(\xi\circ\nu)^{\ast}$.
\end{enumerate}
\end{thm}
\begin{proof}
~
\begin{widedisorder}
\item [{\ref{fcomp-1}}]
\begin{multline*}
\mathcal{A}\mathrel{(\xi^{\circledast}\circ\nu^{\circledast})}\mathcal{C}
\Leftrightarrow\exists\mathcal{B}:\left(\mathcal{A}\mathrel{\nu^{\circledast}}
\mathcal{B}\wedge\mathcal{B}\mathrel{\xi^{\circledast}}\mathcal{C}
\right)\Leftrightarrow\\
\exists\mathcal{B}\in\mathscr{F}(\Dst\nu):(\mathcal{B}\sqsupseteq\supfun{\nu}
\mathcal{A}\wedge\mathcal{C}\sqsupseteq\supfun{\xi}\mathcal{B})\Leftrightarrow\\
\mathcal{C}\sqsupseteq\supfun{\xi}\supfun{\nu}\mathcal{A}\Leftrightarrow\mathcal
{C}\sqsupseteq\supfun{\xi\circ\nu}\mathcal{A}\Leftrightarrow\mathcal{A}\mathrel{
(\xi\circ\nu)^{\circledast}}\mathcal{C}.
\end{multline*}

\item [{\ref{fcomp-2}}] ~
\begin{multline*}
A\mathrel{(\xi^{\ast}\circ\nu^{\ast})}C\Leftrightarrow\exists
B:\left(A\mathrel{\nu^{\ast}}B\wedge
B\mathrel{\xi^{\ast}}C\right)\Leftrightarrow\\
\exists B:(B\in\up\supfun{\nu}A\wedge
C\in\up\supfun{\xi}B)\Leftrightarrow\exists
B\in\up\supfun{\nu}A:C\in\up\supfun{\xi}B.
\end{multline*}

\end{widedisorder}
$A\mathrel{(\xi\circ\nu)^{\ast}}C\Leftrightarrow C\in\up\langle\xi\circ\nu\rangle
B\Leftrightarrow C\in\up\langle\xi\rangle\supfun{\nu}B$.

It remains to prove
\[
\exists B\in\up\supfun{\nu}A:C\in\up\langle\xi\rangle B\Leftrightarrow
C\in\up\supfun{\xi}\langle\nu\rangle A.
\]
$\exists B\in\up\supfun{\nu}A:C\in\up\langle\xi\rangle B\Rightarrow
C\in\up\supfun{\xi}\supfun{\nu}A$
is obvious.

Let $C\in\up\supfun{\xi}\supfun{\nu}A$. Then
$C\in\up\bigsqcap\rsupfun{\supfun{\xi}}\up\supfun{\nu}A$;
so by properties of generalized filter bases, $\exists
P\in\rsupfun{\supfun{\xi}}\up\supfun{\nu}A:C\in\up P$;
$\exists B\in\up\supfun{\nu}A:C\in\up\supfun{\xi}B$.
\end{proof}
\begin{rem}
The above theorem is interesting by the fact that composition of funcoids
is represented as relational composition of binary relations.
\end{rem}

\section{More on composition of funcoids}
\begin{prop}
\label{comp-fcd-r}$\mathord{\suprel{g\circ f}}=\mathord{\suprel g}\circ\supfun
f=\supfun{g^{-1}}^{-1}\circ\mathord{\suprel f}$
for every composable funcoids $f$ and $g$.\end{prop}
\begin{proof}
For every $\mathcal{X}\in\mathscr{F}(\Src f)$, $\mathcal{Y}\in\mathscr{F}(\Dst
g)$
we have
\begin{align*}
\mathcal{X}\suprel{g\circ f}\mathcal{Y} & \Leftrightarrow\\
\mathcal{Y}\sqcap\supfun{g\circ f}\mathcal{X}\ne\bot &
\Leftrightarrow\\
\mathcal{Y}\sqcap\supfun g\supfun f\mathcal{X}\ne\bot &
\Leftrightarrow\\
\supfun f\mathcal{X}\suprel g\mathcal{Y} & \Leftrightarrow\\
\mathcal{X}\mathrel{(\mathord{\suprel g}\circ\supfun f)}\mathcal{Y}
\end{align*}
and
\begin{align*}
\mathord{\suprel{g\circ f}} & =\\
\mathord{\suprel{(f^{-1}\circ g^{-1})^{-1}}} & =\\
\mathord{\suprel{f^{-1}\circ g^{-1}}}^{-1} & =\\
(\mathord{\suprel{f^{-1}}}\circ\supfun{g^{-1}})^{-1} & =\\
\supfun{g^{-1}}^{-1}\circ\mathord{\suprel f}.
\end{align*}

\end{proof}
The following theorem is a variant for funcoids of the statement (which
defines compositions of relations) that $x\mathrel{(g\circ
f)}z\Leftrightarrow\exists y:(x\mathrel fy\land y\mathrel gz)$
for every $x$ and $z$ and every binary relations $f$ and $g$.
\begin{thm}
\label{fcd-atom-middle}For every sets $A$, $B$, $C$ and $f\in\mathsf{FCD}(A,B)$,
$g\in\mathsf{FCD}(B,C)$ and $\mathcal{X}\in\mathscr{F}(A)$,
$\mathcal{Z}\in\mathscr{F}(C)$
\[
\mathcal{X}\suprel{g\circ f}\mathcal{Z}\Leftrightarrow\exists
y\in\atoms^{\mathscr{F}(B)}:(\mathcal{X}\suprel fy\land y\suprel g\mathcal{Z}).
\]
\end{thm}
\begin{proof}
~
\begin{align*}
\exists y\in\atoms^{\mathscr{F}(B)}:(\mathcal{X}\suprel fy\land y\suprel
g\mathcal{Z}) & \Leftrightarrow\\
\exists y\in\atoms^{\mathscr{F}(B)}:(\mathcal{Z}\sqcap\supfun
gy\ne\bot\land y\sqcap\supfun
f\mathcal{X}\ne\bot) & \Leftrightarrow\\
\exists y\in\atoms^{\mathscr{F}(B)}:(\mathcal{Z}\sqcap\supfun
gy\ne\bot\land y\sqsubseteq\supfun f\mathcal{X}) &
\Rightarrow\\
\mathcal{Z}\sqcap\supfun g\supfun f\mathcal{X}\ne\bot &
\Leftrightarrow\\
\mathcal{X}\suprel{g\circ f}\mathcal{Z}.
\end{align*}


Reversely, if $\mathcal{X}\suprel{g\circ f}\mathcal{Z}$ then $\supfun
f\mathcal{X}\suprel g\mathcal{Z}$,
consequently there exists $y\in\atoms\supfun f\mathcal{X}$ such that
$y\suprel g\mathcal{Z}$; we have $\mathcal{X}\suprel fy$.\end{proof}
