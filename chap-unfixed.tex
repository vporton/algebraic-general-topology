\chapter{Unfixed categories}

\section{Axiomatics for unfixed morphisms}

Let $(\mathfrak{A},\mathfrak{Z})$ be a filtrator, where
both~$\mathfrak{A}$ and~$\mathfrak{Z}$ are lattices.
For simplicity assume that~$\mathfrak{Z}$ is a sublattice
of~$\mathfrak{A}$.

Let we have a category~$\mathcal{C}$ whose objects are
$\mathfrak{Z}$.

\begin{defn}
\emph{Category with restricted identities} is defined
axiomatically:

\emph{Restricted identity}~$\id^{\mathcal{C}(A,B)}_X$ is
described by the axioms:

\begin{enumerate}
\item $\id^{\mathcal{C}(A,B)}_X\in\Hom_{\mathcal{C}}(A,B)$
whenever $\mathfrak{A}\ni X\sqsubseteq A\sqcap B$;
\item $\id^{\mathcal{C}(A,A)}_A = 1^{\mathcal{C}}_A$;
\item $\id^{\mathcal{C}(B,C)}_Y \circ \id^{\mathcal{C}(A,B)}_X = \id^{\mathcal{C}(A,C)}_{X\sqcap Y}$.
\end{enumerate}

For a \emph{partially ordered category with restricted identities} introduce additional axiom $X\sqsubseteq Y\Rightarrow
\id^{\mathcal{C}(A,B)}_X\sqsubseteq\id^{\mathcal{C}(A,B)}_Y$.

For \emph{dagger categories with restricted identities} introduce additional axiom
$\left(\id^{\mathcal{C}(A,B)}_X\right)^\dagger =
\id^{\mathcal{C}(A,B)}_X$.
\end{defn}

\begin{defn}
I call a category with restricted identities
\emph{injective} when the axiom $X\ne Y\Rightarrow
\id^{\mathcal{C}(A,B)}_X\ne\id^{\mathcal{C}(A,B)}_Y$
whenever $X,Y\sqsubseteq A\sqcap B$ holds.
\end{defn}

\begin{defn}
Define $\mathcal{E}_{\mathcal{C}}^{A,B} =
\id^{\mathcal{C}(A,B)}_{A\sqcap B}$.
\end{defn}

\begin{prop}\label{e-mono-epi}
  ~  
  \begin{enumerate}
    \item If $A \sqsubseteq B$ then $\mathcal{E}_{\mathcal{C}}^{A,B}$ is a
    monomorphism.
    
    \item If $A \sqsupseteq B$ then $\mathcal{E}_{\mathcal{C}}^{A,B}$ is an
    epimorphism.
  \end{enumerate}
\end{prop}

\begin{proof}
  We'll prove only the first as the second is dual.
  
  Let $\mathcal{E}_{\mathcal{C}}^{A,B} \circ f = \mathcal{E}_{\mathcal{C}}^{A,B} \circ g$. Then
  $\mathcal{E}_{\mathcal{C}}^{B,A} \circ \mathcal{E}_{\mathcal{C}}^{A,B}
  \circ f = \mathcal{E}_{\mathcal{C}}^{B,A} \circ \mathcal{E}_{\mathcal{C}}^{A,B} \circ g$;
  $1^A \circ f = 1^A \circ g$; $f = g$.
\end{proof}

\begin{prop}
  $\mathcal{E}_{\mathcal{C}}^{B,C} \circ \mathcal{E}_{\mathcal{C}}^{A,B} = \mathcal{E}_{\mathcal{C}}^{A,C}$
  if $B \sqsupseteq A \sqcap C$ (for every sets $A$, $B$, $C$).
\end{prop}

\begin{proof}
  $\mathcal{E}_{\mathcal{C}}^{B,C} \circ \mathcal{E}_{\mathcal{C}}^{A,B} = \mathcal{E}_{\mathcal{C}}^{A,C}$
  is equivalent to:
  
  $\id^{\mathcal{C}(B,C)}_{B \sqcap C} \circ \id^{\mathcal{C}(A,B)}_{A \sqcap B} = \id^{\mathcal{C}(A,C)}_{A \sqcap C}$ what is obviously true.
\end{proof}

\section{Rectangular embedding-restriction}

\begin{defn}
  $\iota_{B_0, B_1} f = \mathcal{E}_{\mathcal{C}}^{\Dst f,B_1} \circ f \circ
  \mathcal{E}_{\mathcal{C}}^{B_0,\Src f}$ for $f \in
  \Hom_{\mathcal{C}} (A_0 , A_1)$.
\end{defn}

For brevity $\iota_B f = \iota_{B, B} f$.

\begin{prop}
  $\iota_{\Src f, \Dst f} f = f$.
\end{prop}

\begin{proof}
  $\iota_{\Src f, \Dst f} f = \mathcal{E}_\mathcal{C}^{\Dst f,\Dst f} \circ f \circ \mathcal{E}_\mathcal{C}^{\Src f,\Src f} =
  1_{\mathcal{C}}^{\Dst f} \circ f \circ 1_{\mathcal{C}}^{\Src f} = f$.
\end{proof}

\begin{prop}
  The function $\iota_{B_0, B_1} |_{f \in \Hom_{\mathcal{C}} (A_0 ,
  A_1)}$ is injective, if $A_0 \sqsubseteq B_0 \wedge A_1 \sqsubseteq B_1$.
\end{prop}

\begin{proof}
  Because $\mathcal{E}_{\mathcal{C}}^{A_1,B_1}$ is a monomorphism and $\mathcal{E}_{\mathcal{C}}^{A_0,B_0}$ is an epimorphism.
\end{proof}

\begin{prop}\label{iota-comp}
  Let $f : A_0 \rightarrow A_1$ and $g : A_1 \rightarrow A_2$ and $A_1
  \sqsubseteq B_1$. Then $\iota_{B_0, B_2} (g \circ f) = \iota_{B_1, B_2} g
  \circ \iota_{B_0, B_1} f$.
\end{prop}

\begin{proof}
  $\iota_{B_0, B_2} (g \circ f) = \mathcal{E}_{\mathcal{C}}^{A_2,B_2}
  \circ g \circ f \circ \mathcal{E}_{\mathcal{C}}^{B_0,A_0} = \mathcal{E}_{\mathcal{C}}^{A_2,B_2} \circ g \circ 1^{A_1} \circ f
  \circ \mathcal{E}_{\mathcal{C}}^{B_0,A_0} = \mathcal{E}_{\mathcal{C}}^{A_2,B_2} \circ g \circ \id^{\mathcal{C}(\Dst f,\Src g)}_{A_1} \circ f
  \circ \mathcal{E}_{\mathcal{C}}^{B_0,A_0} = \mathcal{E}_{\mathcal{C}}^{A_2,B_2} \circ g \circ \mathcal{E}^{B_1,A_1}
  \circ \mathcal{E}^{A_1,B_1} \circ f \circ \mathcal{E}_{\mathcal{C}}^{B_0,A_0} = \iota_{B_1, B_2} g \circ \iota_{B_0,
  B_1} f$.
\end{proof}

\section{Image and domain}

Let define that
$\mathscr{S}\mathcal{A}=\setcond{\text{small set }K}{
\exists X\in\mathcal{A}:X\subseteq K}$
holds not only for filters but for any set~$\mathcal{A}$ of
sets.

\begin{obvious}
$\mathscr{S}\mathcal{A}\supseteq\mathcal{A}$.
\end{obvious}

\begin{defn}
~
\begin{enumerate}
\item $\operatorname{IM} f = \setcond{Y \in \mathfrak{Z}}{\mathcal{E}_{\mathcal{C}}^{Y, \Dst f} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f,
Y} \circ f = f} = \setcond{Y \in \mathfrak{Z}}{\id^{\mathcal{C}(\Dst f,\Dst f)}_{Y\sqcap\Dst f} \circ f = f}$;
\item $\operatorname{DOM} f = \setcond{X \in \mathfrak{Z}}{f\circ\mathcal{E}_{\mathcal{C}}^{\Src f, X} \circ \mathcal{E}_{\mathcal{C}}^{X, \Src f} = f} = \setcond{X \in \mathfrak{Z}}{f \circ \id^{\mathcal{C}(\Src f,\Src f)}_{X\sqcap\Src f} = f}$.
\end{enumerate}
\end{defn}

\begin{defn}
~
\begin{enumerate}
\item $\operatorname{Im} f = \setcond{Y\in\operatorname{IM} f}{Y\sqsubseteq\Dst f}$;
\item $\operatorname{Dom} f = \setcond{X\in\operatorname{DOM} f}{X\sqsubseteq\Src f}$.
\end{enumerate}
\end{defn}

\begin{prop}
~
\begin{enumerate}
\item $\operatorname{IM} f = \mathscr{S}\operatorname{Im} f$;
\item $\operatorname{DOM} f = \mathscr{S}\operatorname{Dom} f$;
\item $\operatorname{Im} f = \rsupfun{\Dst f\cap}\operatorname{IM} f$;
\item $\operatorname{Dom} f = \rsupfun{\Dst f\cap}\operatorname{DOM} f$.
\end{enumerate}
\end{prop}

\begin{proof}
$\operatorname{IM} f =
\setcond{Y \in \mathfrak{Z}}{\id^{\mathcal{C}(\Dst f,\Dst f)}_{Y\sqcap\Dst f} \circ f = f}$.

Suppose $Y\in\operatorname{IM}f$. Then take $Y'=Y\sqcap\Dst f$. We have $Y\sqsupseteq Y'$ and $Y'\in\operatorname{Im}f$. So $Y\in\mathscr{S}\operatorname{Im}f$. If $Y\in\mathscr{S}\operatorname{Im}f$ then $Y\in\operatorname{IM}f$ obviously.
So $\operatorname{IM} f = \mathscr{S}\operatorname{Im} f$.

$\rsupfun{\Dst f\cap}\operatorname{IM}f\subseteq
\operatorname{Im}f$ is obvious. If
$\operatorname{Im}f\subseteq\rsupfun{\Dst f\cap}\operatorname{IM}f$ is also obvious.

The rest follows from symmetry.
\end{proof}

\begin{conjecture}
$\operatorname{Im} f$ may be not a filter for an injective
category with restricted morphisms.
\end{conjecture}

\begin{prop}\label{dst-in-im}
$\Dst f\in\operatorname{Im} f$; $\Src f\in\operatorname{Dom} f$ for every morphism~$f$ of a category with restricted
identities.
\end{prop}

\begin{proof}
Prove $\Dst f\in\operatorname{Im} f$ (the other is similar):
We need to prove that $\mathcal{E}_{\mathcal{C}}^{\Dst f, \Dst f} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f,
\Dst f} \circ f = f$ what follows from
$\mathcal{E}_{\mathcal{C}}^{\Dst f, \Dst f} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f, \Dst f} = 1^{\Dst f}$.
\end{proof}

\begin{defn}
~
\begin{enumerate}
\item $\im f = \min\operatorname{Im} f$;
\item $\dom f = \min\operatorname{Dom} f$.
\end{enumerate}
\end{defn}

\begin{note}
$\im f$ and $\dom f$ may be undefined.
\end{note}

\begin{prop}
~
\fxwarning{It may be undefined.}
\begin{enumerate}
\item $\im f = \min\operatorname{IM} f$;
\item $\dom f = \min\operatorname{DOM} f$.
\end{enumerate}
\end{prop}

\begin{proof}
It follows from $\operatorname{IM}f=\mathscr{S}\operatorname{Im}f$
(and likewise for~$\dom f$).
\end{proof}

\begin{prop}
I will call an axiomatic setting for unfixed morphisms
\emph{existentially distributive} when
\[\exists t\in\mathcal{C}(\Src f,\Dst f) : \id^{\mathcal{C}(\Dst f,\Dst f)}_Y \circ t \sqsupseteq f \Rightarrow \id^{\mathcal{C}(\Dst f,\Dst f)}_Y \circ f
\sqsupseteq f\]
for every morphism~$f$ and $\mathfrak{A}\ni Y\sqsubseteq\Dst f$.
\end{prop}

\begin{prop}
For a partially ordered category with restricted identities
it is existentially distributive iff
\[\id^{\mathcal{C}(\Dst f,\Dst f)}_Y \circ \top^{\mathcal{C}(\Src f,\Dst f)} \sqsupseteq f \Rightarrow \id^{\mathcal{C}(\Dst f,\Dst f)}_Y \circ f
\sqsupseteq f\] (provided that $\top^{\mathcal{C}(\Src f,\Dst f)}$
exists) or what is the same
$\top\times Y \sqsupseteq f \Rightarrow \id_Y \circ f
= f$.
\end{prop}

\begin{proof}
\[\id^{\mathcal{C}(\Src f,\Dst f)}_Y \circ \top^{\mathcal{C}(\Dst f,\Dst f)} \sqsupseteq f \Leftrightarrow
\exists t\in\mathcal{C}(\Src f,\Dst f) : \id^{\mathcal{C}(\Dst f,\Dst f)}_Y \circ t \sqsupseteq f\]
is obvious in both directions.
\end{proof}

\section{Equivalent morphisms}

\begin{prop}\label{two-iotas}
  $\iota_{A, B} \iota_{X, Y} f = \iota_{A, B} f$ for every sets $A$, $B$, $X$,
  $Y$ whenever $\operatorname{DOM} f$ and $\operatorname{IM} f$ are filters and $X \in
  \operatorname{DOM} f$, $Y \in \operatorname{IM} f$.
\end{prop}

\begin{proof}
  $\iota_{A, B} f =\mathcal{E}_{\mathcal{C}}^{\Dst f, B} \circ f \circ
  \mathcal{E}_{\mathcal{C}}^{A, \Src f} = \text{(by definition of
  $\operatorname{IM} f$ and $\operatorname{DOM} f$)} =\mathcal{E}_{\mathcal{C}}^{\Dst f,
  B} \circ \mathcal{E}_{\mathcal{C}}^{Y, \Dst f} \circ
  \mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f \circ
  \mathcal{E}_{\mathcal{C}}^{X, \Src f} \circ
  \mathcal{E}_{\mathcal{C}}^{\Src f, X} \circ
  \mathcal{E}_{\mathcal{C}}^{A, \Src f} =\mathcal{E}_{\mathcal{C}}^{Y,
  B} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f \circ
  \mathcal{E}_{\mathcal{C}}^{X, \Src f} \circ
  \mathcal{E}_{\mathcal{C}}^{A, X} = \iota_{A, B} \iota_{X, Y} f$
  
  because $\mathcal{E}^{\Dst f, B} \circ \mathcal{E}^{Y, \Dst f}
  \circ \mathcal{E}^{\Dst f, Y} = \id^{\mathcal{C}(\Dst f, B)}_{Y \sqcap
  \Dst f \sqcap B} = \id^{\mathcal{C}(Y, B)}_{Y \sqcap B} \circ \id^{\mathcal{C}(\Dst f,Y)}_{Y \sqcap \Dst f} = \mathcal{E}^{Y, B} \circ
  \mathcal{E}^{\Dst f, Y}$ and thus
  $\mathcal{E}_{\mathcal{C}}^{\Dst f, B} \circ
  \mathcal{E}_{\mathcal{C}}^{Y, \Dst f} \circ
  \mathcal{E}_{\mathcal{C}}^{\Dst f, Y} =\mathcal{E}_{\mathcal{C}}^{Y,
  B} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f, Y}$ and similary for
  $\mathcal{E}_{\mathcal{C}}^{X, \Src f} \circ
  \mathcal{E}_{\mathcal{C}}^{\Src f, X} \circ
  \mathcal{E}_{\mathcal{C}}^{A, \Src f}$.
\end{proof}

\begin{defn}
I call two morphisms $f\in\mathcal{C}(A_0,B_0)$ and
$g\in\mathcal{C}(A_1,B_1)$
of a category under~$\mathbf{Rel}$ \emph{equivalent}
(and denote $f\sim g$) when
\[\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g.\]
\end{defn}

\begin{prop}
$f\sim g$~iff $\iota_{A,B}f=\iota_{A,B}g$ for
some~$A\sqsupseteq A_0\sqcup A_1$,~$B\sqsupseteq B_0\sqcup B_1$.
\end{prop}

\begin{proof}
??
\end{proof}

\begin{prop}
$f$~and~$g$ are equivalent iff
$\iota_{A_1,B_1}f=g$ and $\iota_{A_0,B_0}g=f$
(provided that our category is ordered under $\mathbf{Rel}$).
\end{prop}

\begin{proof}
~
\begin{description}
\item[$\Rightarrow$]
$\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g$;
$\iota_{A_1,B_1}\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_1,B_1}\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g$;
$\iota_{A_1,B_1}f=\iota_{A_1,B_1}g$;
$\iota_{A_1,B_1}f=g$. $\iota_{A_0,B_0}g=f$ is similar.

\item[$\Leftarrow$] $\iota_{A_1,B_1}f=g$ implies
$A_1\in\operatorname{Im} g$ and $A_0\in\operatorname{Im} g$.
Thus?? $A_0\sqcap A_1\in\operatorname{Im} g$.
Consequently??
$\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g=
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}\iota_{A_1,B_1}f=
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f$.
\end{description}
\end{proof}

\begin{prop}
Above defined equivalence of morphisms (for a small category)
is an equivalence relation.
\end{prop}

\begin{proof}
~
\begin{description}
\item[Reflexivity] Obvious.

\item[Symmetry] Obvious.

\item[Transitivity] Let $f\sim g$ and $g\sim h$ for
$f:A_0\to B_0$, $g:A_1\to B_1$, $h:A_2\to B_2$.
Then
$\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g$ and
$\iota_{A_1\sqcup A_2,B_1\sqcup B_2}g=\iota_{A_1\sqcup A_2,B_1\sqcup B_2}h$.

Thus
\[\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g\] and
\[\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}\iota_{A_1\sqcup A_2,B_1\sqcup B_2}g=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}\iota_{A_1\sqcup A_2,B_1\sqcup B_2}h\]
that is (propositon~\ref{two-iotas})
\[\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}f=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}g\]
and
\[\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}g=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}h.\]
Combining,
$\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}f=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}h$ and thus
\[\iota_{A_0\sqcup A_2,B_0\sqcup B_2}\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}f=\iota_{A_0\sqcup A_2,B_0\sqcup B_2}\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}h;\]
(again propositon~\ref{two-iotas}) $\iota_{A_0\sqcup A_2,B_0\sqcup B_2}f=\iota_{A_0\sqcup A_2,B_0\sqcup B_2}h$
that is $f\sim h$.
\end{description}
\end{proof}

\begin{defn}
We will turn the category~$\mathcal{C}$ into a semigroup
$\mathcal{U}\mathcal{C}$
(\emph{the semigroup of unfixed morphisms}) by
the formula $[g]\circ[f] = [g\circ f]$ whenever~$f$ and~$g$
are composable morphisms.
\end{defn}

We need to prove that $[g]\circ[f]$ does not depend on
choice of~$f$ and~$g$ (provided that~$f$ and~$g$
are composable). We also need to prove that $[g]\circ[f]$
is always defined for every morphisms (not necessarily
composable)~$f$ and~$g$. That the resulting structure is
a semigroup (that is,~$\circ$ is associative) is then
obvious.

\begin{proof}
That $[g]\circ[f]$ is defined in at least one way for every
morphisms~$f$ and~$g$ is simple to prove. Just consider the
morphisms
$f'=\iota_{\Src f,\Dst f\sqcup\Src g}f\sim f$ and
$g'=\iota_{\Dst f\sqcup\Src g,\Dst g}g\sim g$.
Then we can take $[g]\circ[f]=[g'\circ f']$.

It remains to prove that $[g]\circ[f]$ does not depend on
choice of~$f$ and~$g$. Really, take arbitrary composable
pairs of morphisms $(f_0:A_0\to B_0,g_0:B_0\to C_0)$ and
$(f_1:A_1\to B_1,g_1:B_1\to C_1)$ such that
$f_0\sim f_1$ and $g_0\sim g_1$. It remains to prove that
$g_0\circ f_0\sim g_1\circ f_1$.
We have
\begin{multline*}
\iota_{B_0\sqcup B_1,C_0\sqcup C_1}g_0 \circ
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f_0
= \text{(proposition~\ref{iota-comp})} = \\
\mathcal{E}_{\mathcal{C}}^{C_0,C_0\sqcup C_1}\circ g_0 \circ
f_0\circ\mathcal{E}_{\mathcal{C}}^{A_0\sqcup A_1,B_0} =
\iota_{A_0\sqcup A_1,C_0\sqcup C_1}(g_0\circ f_0).
\end{multline*}
Similary
\[\iota_{B_0\sqcup B_1,C_0\sqcup C_1}g_1 \circ
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f_1 =
\iota_{A_0\sqcup A_1,C_0\sqcup C_1}(g_1\circ f_1).\]

But
\[\iota_{B_0\sqcup B_1,C_0\sqcup C_1}g_0 \circ
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f_0 =
\iota_{B_0\sqcup B_1,C_0\sqcup C_1}g_1 \circ
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f_1\]
thus having
$\iota_{A_0\sqcup A_1,C_0\sqcup C_1}(g_0\circ f_0) =
\iota_{A_0\sqcup A_1,C_0\sqcup C_1}(g_1\circ f_1)$ and so
$g_0\circ f_0\sim g_1\circ f_1$.
\end{proof}

\begin{prop}
$[f] = \setcond{\iota_{A,B}f}{
A\in\operatorname{DOM}f,B\in\operatorname{IM}f}$.
\end{prop}

\begin{proof}
If~$A\in\operatorname{DOM}f$,~$B\in\operatorname{IM}f$
then
\[\iota_{A\sqcup\Src f,B\sqcup\Dst f}\iota_{A,B}f =
\iota_{A\sqcup\Src f,B\sqcup\Dst f}f.\] Thus
$\iota_{A,B}f\sim f$ that is $\iota_{A,B}f\in[f]$.

Let now $g\in[f]$ that is $f\sim g$;
\[\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}f=
\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}g.\]
Take $A=\Src g$, $B=\Dst g$. We have
\begin{gather*}
\iota_{A,B}\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}f=
\iota_{A,B}\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}g;\\
\iota_{A,B}f=\iota_{A,B}g = g.
\end{gather*}
\end{proof}

\begin{prop}
~
\begin{enumerate}
\item $\operatorname{IM} f = \setcond{Y \in \mathfrak{Z}}{
  \mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f \sim f}$;
\item $\operatorname{DOM} f = \setcond{X \in \mathfrak{Z}}{
  f\circ\mathcal{E}_{\mathcal{C}}^{X, \Src f} \sim f}$.
\end{enumerate}
\end{prop}

\begin{proof}
~
\begin{multline*}
\mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f \sim f
\Leftrightarrow
\iota_{\Src f,Y\sqcup\Dst f}
(\mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f) =
\iota_{\Src f,Y\sqcup\Dst f}f \Leftrightarrow \\
\mathcal{E}^{Y,Y\sqcup\Dst f}\circ\mathcal{E}^{\Dst f, Y} \circ f \circ \mathcal{E}^{\Src f,\Src f} =
\mathcal{E}^{\Dst f,Y\sqcup\Dst f}\circ f\circ\mathcal{E}^{\Src f,\Src f} \Leftrightarrow \\
\mathcal{E}^{Y,Y\sqcup\Dst f}\circ\mathcal{E}^{\Dst f, Y}\circ f=\mathcal{E}^{\Dst f,Y\sqcup\Dst f}\circ f
\Leftrightarrow \text{(proposition~\ref{e-mono-epi})} \\ \Leftrightarrow
\mathcal{E}^{Y\sqcup\Dst f,\Dst f}\circ \mathcal{E}^{Y,Y\sqcup\Dst f}\circ\mathcal{E}^{\Dst f, Y}\circ f=\mathcal{E}^{Y\sqcup\Dst f,\Dst f}\circ \mathcal{E}^{\Dst f,Y\sqcup\Dst f}\circ f \Leftrightarrow \\
\mathcal{E}^{Y,\Dst f}\circ\mathcal{E}^{\Dst f,Y}\circ f = f.
\end{multline*}
From this our thesis follows obviously.
\end{proof}

TODO: Define product morphism.

TODO: Define domain and image of unfixed morphisms,
identity.

\section{Categories with embeddings}

\begin{note}
This section in not used below, it is just to feed your intuition.
\end{note}

The following generalizes the well known concept of embedding function $A
\hookrightarrow B$ for from a set $A$ to a set $B$ where $A \subseteq B$.

I will set that the unique morphism from an object $A$ to an object $B$ of a
thin category is equal to the pair $(A , B)$.

\begin{defn}
  A \emph{category with embeddings of objects} is a dagger category with a
  preorder of the set of objects together with a functor $\hookrightarrow$ (we
  will denote applying this functor to the object $(A , B)$ as $A
  \hookrightarrow B$.) such that:
  \begin{itemize}
    \item $\hookrightarrow$ is an identity on objects.
    
    \item Every $A \hookrightarrow B$ is a monomorphism.
    
    \item $(A \hookrightarrow B)^{\dagger} \circ (A \hookrightarrow B) = 1_A$.
  \end{itemize}
\end{defn}

\begin{obvious}
$A\hookrightarrow B$ is defined when $(A , B)$ is a morphism of the preorder
that is when $A \sqsubseteq B$.
\end{obvious}

\begin{obvious}
$A \hookrightarrow B : A \rightarrow B$ when $A \sqsubseteq B$.
\end{obvious}

\begin{prop}
  $A \hookrightarrow A = 1_A$.
\end{prop}

\begin{proof}
  Because $(A , A)$ is an identity morphism and $\hookrightarrow$ preserves
  identities.
\end{proof}

\begin{prop}
  $(B \hookrightarrow C) \circ (A \hookrightarrow B) = A \hookrightarrow C$
  whenever $A \sqsubseteq B \sqsubseteq C$.
\end{prop}

\begin{proof}
  $(B \hookrightarrow C) \circ (A \hookrightarrow B) = \hookrightarrow (B , C)
  \circ \hookrightarrow (A , B) = \hookrightarrow ((B , C) \circ (A , B)) =
  \hookrightarrow (A , C) = A \hookrightarrow C$.
\end{proof}

\section{\texorpdfstring{Categories under $\mathbf{Rel}$}{Categories under Rel}}

\begin{defn}
  The $\mathbf{Rel}$-morphism $\mathcal{E}^{A,B}$
  (\emph{restriction-embedding}) is defined by the formula: $\mathcal{E}^{A,B}
  = (A , B , \id_{A \cap B})$.
  
  When $A$ is clear from context, I will denote it just as $\mathcal{E}^B$.
\end{defn}

\begin{obvious}
If $A \subseteq B$ then $\mathcal{E}^{A,B}$ is an embedding $A \hookrightarrow B
= (A , B , \id_A)$.
\end{obvious}

\begin{obvious}
If $A \supseteq B$ then $\mathcal{E}^{A,B} = (A , B ,
\id_B)$.
\end{obvious}

\begin{obvious}
$\mathcal{E}^{A,A} = 1^{\mathbf{Rel}}_A$.
\end{obvious}

\begin{obvious}
$(\mathcal{E}^{A,B})^{- 1} = \mathcal{E}^{B,A}$.
\end{obvious}

\begin{defn}
\emph{Dagger functor} between two dagger categories is a functor between
these categories, which commutes with the daggers.
\fxwarning{Clearer wording.}
\end{defn}

\begin{defn}
\emph{Category under $\mathbf{Rel}$} is a pair $(C , \uparrow)$
where $C$ is a category whose objects are small sets and $\uparrow$ is an
identity-on-objects functor $\mathbf{Rel} \rightarrow C$. I call
$\uparrow$ \emph{up-arrow functor}.
\fxnote{We can use any category conforming to the above
axioms instead of~$\mathbf{Rel}$.}
\end{defn}

\begin{defn}
  \emph{Dagger category under $\mathbf{Rel}$} is a pair $(C ,
  \uparrow)$ where $C$ is a dagger category whose objects are small sets and
  $\uparrow$ is a dagger identity-on-objects functor $\mathbf{Rel}
  \rightarrow C$.
\end{defn}

\begin{defn}
  $\mathcal{E}_{\mathcal{C}}^{A,B} = \uparrow \mathcal{E}^{A,B}$. In
  other words, $\mathcal{E}_{\mathcal{C}} = \uparrow \circ \mathcal{E}$.
  
  When $A$ is clear from context, I will denote it just as $\mathcal{E}_{\mathcal{C}}^B$.
\end{defn}

\begin{prop}
  $\mathcal{E}_{\mathcal{C}}^{A,A} = 1_{\mathcal{C}}^A$.
\end{prop}

\begin{proof}
  $\mathcal{E}_{\mathcal{C}}^{A,A} = \uparrow \mathcal{E}^{A,A} =
  \uparrow 1_{\mathbf{Rel}} = 1_{\mathcal{C}}^A$.
\end{proof}

\begin{prop}
  If $f : X \rightarrow Y$ is a $\mathbf{Rel}$-morphism and
  $\im f = A \subseteq Y$ then
  \[ \mathcal{E}^{A,Y} \circ \mathcal{E}^{Y,A} \circ f = f. \]
\end{prop}

\begin{proof}
  $\mathcal{E}^{A,Y} \circ \mathcal{E}^{Y,A} \circ f = 1_{\mathcal{C}}^A
  \circ f = f$.
\end{proof}

\begin{defn}
  \emph{Partially ordered dagger category under $\mathbf{Rel}$} is
  a category which is both a partially ordered dagger category and a category
  under $\mathbf{Rel}$ such that $\uparrow \circ f^{- 1} = (\uparrow
  \circ f)^{\dagger}$ and $A \sqsubseteq B \Rightarrow \uparrow A \sqsubseteq
  \uparrow B$.
\end{defn}

\begin{prop}
  $(\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} = \mathcal{E}_{\mathcal{C}}^{B,A}$ for a dagger category under
  $\mathbf{Rel}$.
\end{prop}

\begin{proof}
  $(\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} = (\uparrow \mathcal{E}^{A,B})^{\dagger} = \uparrow (\mathcal{E}^{A,B})^{- 1} =
  \uparrow \mathcal{E}^{B,A} = \mathcal{E}_{\mathcal{C}}^{B,A}$.
\end{proof}

\begin{prop}
  For a partially ordered dagger category $\mathcal{C}$ under
  $\mathbf{Rel}$ we have $\mathcal{E}_{\mathcal{C}}^{A,B}$ is:
  \begin{enumerate}
    \item monovalued;
    
    \item injective;
    
    \item entirely defined if $A \subseteq B$;
    
    \item surjective if $B \subseteq A$.
  \end{enumerate}
\end{prop}

\begin{proof}
  ~
  \begin{enumerate}
    \item $\mathcal{E}^{A,B} \circ \mathcal{E}^{B,A} \sqsubseteq
    1^{\mathbf{Rel}}_B$; $\mathcal{E}^{A,B} \circ (\mathcal{E}^{A,B})^{- 1} \sqsubseteq 1^{\mathbf{Rel}}_B$;
    $\mathcal{E}_{\mathcal{C}}^{A,B} \circ (\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} \sqsubseteq 1^{\mathcal{C}}_B$.
    
    \item $\mathcal{E}^{B,A} \circ \mathcal{E}^{A,B} \sqsubseteq
    1^{\mathbf{Rel}}_A$; $(\mathcal{E}^{A,B})^{- 1} \circ \mathcal{E}^{A,B} \sqsubseteq 1^{\mathbf{Rel}}_A$;
    $(\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} \circ \mathcal{E}^{A,B} \sqsubseteq 1^{\mathcal{C}}_A$.
    
    \item $\mathcal{E}^{B,A} \circ \mathcal{E}^{A,B} \sqsupseteq
    1^{\mathbf{Rel}}_A$; $(\mathcal{E}^{A,B})^{- 1} \circ \mathcal{E}^{A,B} \sqsupseteq 1^{\mathbf{Rel}}_A$;
    $(\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} \circ \mathcal{E}_{\mathcal{C}}^{A,B} \sqsupseteq 1^{\mathcal{C}}_A$.
    
    \item $\mathcal{E}^{A,B} \circ \mathcal{E}^{B,A} \sqsupseteq
    1^{\mathbf{Rel}}_A$; $\mathcal{E}^{A,B} \circ (\mathcal{E}^{A,B})^{- 1} \sqsupseteq 1^{\mathbf{Rel}}_A$;
    $\mathcal{E}_{\mathcal{C}}^{A,B} \circ (\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} \sqsupseteq 1^{\mathcal{C}}_A$.
  \end{enumerate}
\end{proof}

??

\section{\texorpdfstring{Examples of partially ordered dagger categories under
$\mathbf{Rel}$}{Examples of partially ordered dagger categories under Rel}}

\subsection{\texorpdfstring{Category $\mathbf{Rel}$}{Category Rel}}

Category $\mathbf{Rel}$ with the identity up-arrow functor to itself
and ``reverse relation'' as the dagger is an obvious example of a partially
ordered dagger category under $\mathbf{Rel}$.

\begin{prop}
  $\iota_{A, B} f = (A , B , \GR f \cap (A \times B))$.
\end{prop}

\begin{proof}
  $\iota_{A, B} f = \mathcal{E}^{B} \circ f \circ (\mathcal{E}^{A})^{-1} = (A , B , \GR f \cap (A \times B))$.
\end{proof}

\subsection{\texorpdfstring{Category $\mathsf{FCD}$}{Category FCD}}

Category $\mathsf{FCD}$ with the up-arrow functor
$\uparrow^{\mathsf{FCD}}$ and ``reverse funcoid'' as the dagger is a
partially ordered dagger category under $\mathbf{Rel}$.

\begin{prop}
  $\mathcal{E}_{\mathsf{FCD}}^{A,B} = (A , B , \lambda \mathcal{X}
  \in \mathfrak{F} (A) : \mathcal{X} \div B , \lambda \mathcal{Y} \in
  \mathfrak{F} (B) : \mathcal{Y} \div A)$ for objects $A \subseteq B$ of
  $\mathsf{FCD}$.
\end{prop}

\begin{proof}
  $\langle \mathcal{E}_{\mathsf{FCD}}^{A,B} \rangle \mathcal{X} =
  \bigsqcap \setcond{ \langle \mathcal{E}_{\mathsf{FCD}}^{A,B}
  \rangle^{\ast} X }{ X \in \mathcal{X} } =
  \bigsqcap \setcond{ \uparrow^B  \langle \mathcal{E}^{A,B} \rangle X
  }{ X \in \mathcal{X} } = \bigsqcap \setcond{
  \uparrow^B  (X \cap A \cap B) }{ X \in \mathcal{X}
  } = \bigsqcap \setcond{ \uparrow^B  (X \cap B) }{
  X \in \mathcal{X} } = \mathcal{X} \div B$.
  
  Rest follows from symmetry.
\end{proof}

\begin{prop}
  ~
  \begin{enumerate}
    \item $\langle \mathcal{E}_{\mathsf{FCD}}^{A,B} \rangle^{\ast} X
    = \uparrow^B X$ for every $X \in \subsets A$ if $A \subseteq B$.
    
    \item $\langle \mathcal{E}_{\mathsf{FCD}}^{B,A} \rangle^{\ast}
    Y = \uparrow^A (Y \cap A)$ for every $Y \in \subsets B$ if $A \subseteq
    B$.
  \end{enumerate}
\end{prop}

\begin{proof}
  By definition of principal funcoid.
\end{proof}

\fxnote{Unfixed funcoids seem to be equivalent to pointfree 
funcoids between unfixed filters.}

\subsection{\texorpdfstring{Category $\mathsf{RLD}$}{Category RLD}}

Category $\mathsf{RLD}$ with the up-arrow functor
$\uparrow^{\mathsf{RLD}}$ and ``reverse reloid'' as the dagger is a
partially ordered dagger category under $\mathbf{Rel}$.

\begin{obvious}
$\mathcal{E}_{\mathsf{RLD}}^{A,B} = \uparrow^{\mathsf{RLD} (A ,
B)} \id_{A \cap B}$.
\end{obvious}

\begin{defn}
  $f \div (A \times B) = (A , B , (\GR f) \div (A \times B))$ for every
  reloid $f$.
\end{defn}

\begin{prop}
  $\iota_{A, B} f = f \div (A \times B)$.
\end{prop}

\begin{proof}
  $\iota_{A, B} f = \mathcal{E}_{\mathsf{RLD}}^{B}
\circ f \circ (\mathcal{E}_{\mathsf{RLD}}^{A})^{-1} =
\bigsqcap \setcond{ \uparrow^{\mathsf{RLD}} (\mathcal{E}^{B} \circ F \circ (\mathcal{E}^{A})^{-1}
}{ F \in \GR f } = \bigsqcap \setcond{
\uparrow^{\mathsf{RLD}} (F \cap (A \times B))}
{F \in \GR f } = f \div (A \times B)$.

\fxwarning{Filters on cartesian products vs reloids.}
\end{proof}

\fxnote{Unfixed reloids seem to be equivalent to
endoreloids on the set of unfixed filters.}

\subsection{Some isomorphisms}

\begin{prop}
  $\setcond{ (\mathcal{A} \div A , \mathcal{A} \sqcap A) }{
  \mathcal{A} \in \mathfrak{F} (U) }$ is a function and
  moreover is an order isomorphism for a set $A \subseteq U$.
\end{prop}

\begin{proof}
  $\mathcal{A} \div A$ and $\mathcal{A} \sqcap A$ are determined by each other
  by the following formulas:
  \[ \mathcal{A} \div A = (\mathcal{A} \sqcap A) \div A \quad
     \text{and} \quad \mathcal{A} \sqcap A = (\mathcal{A} \div A) \div
     \Base (\mathcal{A}) . \]
  Prove the formulas: $(\mathcal{A} \sqcap A) \div A = \bigsqcap \setcond{
  \uparrow^A (X \cap A) }{ X \in \mathcal{A} \sqcap A
  } = \bigsqcap \setcond{ \uparrow^A (X \cap A) }{
  X \in \mathcal{A} } = \mathcal{A} \div A$.
  
  $(\mathcal{A} \div A) \div \Base (\mathcal{A}) = \bigsqcap \setcond{
  \uparrow^A (X \cap A) }{ X \in \mathcal{A} }
  \div \Base (\mathcal{A}) = \bigsqcap \setcond{ \uparrow^{\Base
  (\mathcal{A})} (Y \cap \Base (\mathcal{A})) }{
  Y \in \bigsqcap \setcond{ \uparrow^A (X \cap A) }{
  X \in \mathcal{A} } } = \text{(by properties of
  filter bases)} = \bigsqcap \setcond{ \uparrow^{\Base (\mathcal{A})} (X
  \cap A \cap \Base (\mathcal{A})) }{ X \in
  } = \bigsqcap \setcond{ \uparrow^{\Base
  (\mathcal{A})} (X \cap A) }{ X \in \mathcal{A}
  } = \mathcal{A} \sqcap A$.
  
  That this defines a bijection, follows from $\mathcal{A} \div A \sim
  \mathcal{A} \sqcap A$ what easily follows from the above formulas.
\end{proof}

\begin{prop}
  $\setcond{ (\iota_{X, Y} f , \id^{\mathbf{Rel}}_Y \circ f \circ
  \id^{\mathbf{Rel}}_X) }{ f \in
  \mathbf{Rel} (A , B) }$ is a function and moreover is an
  (order and semigroup) isomorphism, for sets $X \subseteq \Src f$, $Y
  \subseteq \Dst f$.
\end{prop}

\begin{proof}
  $\iota_{X, Y} f = (X , Y , \GR f \cap (X \times Y))$;
  $\id^{\mathbf{Rel}}_Y \circ f \circ
  \id^{\mathbf{Rel}}_X = (\Src f , \Dst f ,
  \GR f \cap (X \times Y))$. The isomorphism (both order and semigroup)
  is evident.
\end{proof}

\begin{prop}
  $\setcond{ (\iota_{X, Y} f , \id^{\mathsf{FCD}}_Y
  \circ f \circ \id^{\mathsf{FCD}}_X) }{
  f \in \mathsf{FCD} (A , B) }$ is a function and moreover is an
  (order and semigroup) isomorphism, for sets $X \subseteq \Src f$, $Y
  \subseteq \Dst f$.
\end{prop}

\begin{proof}
  From symmetry it follows that it's enough to prove that $\setcond{ \left(
  \mathcal{E}^Y \circ f , \id^{\mathsf{FCD}}_Y \circ f \right)
  }{ f \in \mathsf{FCD} (A , B) }$ is a
  function and moreover is an (order and semigroup) isomorphism, for a set $Y
  \subseteq \Dst f$.
  
  Really, $\setcond{ (\langle \mathcal{E}^Y \rangle x , \langle
  \id^{\mathsf{FCD}}_Y \rangle x) }{ x
  \in \Dst f } = \setcond{ (x \div Y , x \sqcap Y) }{
  x \in \Dst f }$ is an order isomorphism by proved
  above. This implies that $\setcond{ \left( \mathcal{E}^Y \circ f ,
  \id^{\mathsf{FCD}}_Y \circ f \right) }{
  f \in \mathsf{FCD} (A , B) }$ is an isomorphism
  (both order and semigroup).
\end{proof}

\begin{prop}
  $\setcond{ (\iota_{X, Y} f , \id^{\mathsf{RLD}}_Y \circ f \circ
  \id^{\mathsf{RLD}}_X) }{ f \in
  \mathsf{RLD} (A , B) }$ is a function and moreover is an
  (order and semigroup) isomorphism, for sets $X \subseteq \Src f$, $Y
  \subseteq \Dst f$.
\end{prop}

\begin{proof}
  $\iota_{X, Y} f = (X , Y , (\up f) \div (X \times Y))$;
  $\id^{\mathsf{RLD}}_Y \circ f \circ
  \id^{\mathsf{RLD}}_X = (\Src f , \Dst f ,
  (\up f) \sqcap (X \times Y))$. They are order isomorphic by proved
  above.
  
  $\iota_{Y, Z} g \circ \iota_{X, Y} f =\mathcal{E}^Z \circ g \circ
  (\mathcal{E}^Y)^{- 1} \circ \mathcal{E}^Y \circ f \circ (\mathcal{E}^X)^{-
  1} =\mathcal{E}^Z \circ g \circ \id^{\mathsf{RLD}}_Y \circ
  \id^{\mathsf{RLD}}_Y \circ f \circ (\mathcal{E}^X)^{- 1}$
  because $(\mathcal{E}^Y)^{- 1} \circ \mathcal{E}^Y =
  \id^{\mathbf{Rel}}_Y = \id^{\mathbf{Rel}}_Y
  \circ \id^{\mathbf{Rel}}_Y$. Thus by proved above
  \[ \setcond{ (\iota_{Y, Z} g \circ \iota_{X, Y} f ,
     \id^{\mathsf{RLD}}_Z \circ g \circ
     \id^{\mathsf{RLD}}_Y \circ \id^{\mathsf{RLD}}_Y
     \circ f \circ \id^{\mathsf{RLD}}_X) }{
     f \in \mathsf{RLD} (A , B) } \]
  is a bijection.
\end{proof}

\fxnote{Research the semigroups (Wikipedia) of funcoids and
reloids.}
