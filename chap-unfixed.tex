\chapter{Filters}

\section{Equivalent filters and rebase of filters}

Throughout this section we will assume that~$\mathfrak{Z}$
is a lattice.

An important example:~$\mathfrak{Z}$ is the lattice of
all small (regarding some Grothendieck universe) sets.

Throughout this section I will use the word \emph{filter}
to denote a filter on a sublattice~$DA$
where~$A\in\mathfrak{Z}$ (if not told explicitly to be a
filter on some other set). (This~$\mathfrak{Z}$ is not
a powerset, and even not a complete lattice.)

The following is an embedding from
filters~$\mathcal{A}$ on a lattice~$DA$ into the lattice of
filters on~$\mathfrak{Z}$:
$\mathscr{S}\mathcal{A}=\setcond{K\in\mathfrak{Z}}{
\exists X\in\mathcal{A}:X\subseteq K}$.

\begin{prop}
Values of this embedding are filters on the
lattice~$\mathfrak{Z}$.
\end{prop}

\begin{proof}
That $\mathscr{S}\mathcal{A}$ is an upper set is obvious.

Let $P,Q\in\mathscr{S}\mathcal{A}$.
Then~$P,Q\in\mathfrak{Z}$ and there is an $X\in\mathcal{A}$
such that~$X\subseteq P$ and $Y\in\mathcal{A}$ such
that~$Y\subseteq Q$. So $X\cap Y\in\mathcal{A}$
and $P\cap Q\supseteq X\cap Y\in\mathcal{A}$, so
$P\cap Q\in\mathscr{S}A$.
\end{proof}

\subsection{Rebase of filters}

\begin{defn}
\index{rebase!filters}\emph{Rebase} for every set-theoretic filter $\mathcal{A}$
and every set $A$ is
  $\mathcal{A} \div A = \bigsqcap \setcond{ \uparrow^A  (X \cap A) }
  { X \in \mathcal{A} }$.
\end{defn}

\begin{obvious}
$\rsupfun{A\cap}\mathscr{S}\mathcal{A}$ is a filter on $A$.
\end{obvious}

\fxnote{Check for errors the below in this section.}

\begin{prop}
The rebase conforms to the formula
\[
\mathcal{A}\div A=\rsupfun{A\cap}\mathscr{S}\mathcal{A}.
\]
\end{prop}

\begin{proof}
We know that $\rsupfun{A\cap}\mathscr{S}\mathcal{A}$ is a
filter.

If $P \in \rsupfun{A\cap}\mathscr{S}\mathcal{A}$ then $P \in \subsets A$ and $Y\cap A
\subseteq P$ for some $Y \in \mathcal{A}$. Thus $P \supseteq Y \cap A \in
\bigsqcap \setcond{ \uparrow^A  (Y \cap A) }{ Y \in \mathcal{A} }$.

If $P \in \bigsqcap \setcond{ \uparrow^A  (X \cap A) }{
X \in \mathcal{A} }$ then by properties of generalized filter bases,
there exists $X \in \mathcal{A}$ such that $P \supseteq X \cap A$. Also $P \in
\subsets A$. Thus $P \in \rsupfun{A\cap}\mathscr{S}\mathcal{A}$.
\end{proof}

\begin{prop}\label{rebase-itself}
$\mathcal{X}\div\Base(\mathcal{X}) = \mathcal{X}$.
\end{prop}

\begin{proof}
Because $X\cap\Base(\mathcal{X}) = X$ for
$X\in\mathcal{X}$.
\end{proof}

\begin{prop}\label{double-rebase}
  $(\mathcal{X} \div A) \div B = \mathcal{X} \div B$ if $B \subseteq A$.
\end{prop}

\begin{proof}
  $(\mathcal{X} \div A) \div B = \bigsqcap \setcond{ \uparrow^B  (Y \cap B)
  }{ Y \in \bigsqcap \setcond{ \uparrow^A  (X \cap A)}
  {X \in \mathcal{X} } \mathcal{} } =
  \bigsqcap \setcond{ \uparrow^B  (X \cap A) }{ X \in
  \mathcal{X} } \sqcap \uparrow^B B =
  \bigsqcap \setcond{ \uparrow^B  (X
  \cap A \cap B) }{ X \in \mathcal{X} } =
  \bigsqcap \setcond{ \uparrow^B  (X
  \cap B) }{ X \in \mathcal{X} } =
  \mathcal{X} \div B$.
\end{proof}

\begin{prop}
If $A\in\mathcal{A}$ then
$\mathcal{A}\div A=\mathcal{A}\cap\subsets A$.
\end{prop}

\begin{proof}
$\mathcal{A}\div A=
\rsupfun{A\cap}\mathscr{S}\mathcal{A} =
\rsupfun{A\cap}\setcond{K\in\mathfrak{Z}}{
\exists X\in\mathcal{A}:X\subseteq K} =
\setcond{K\in\mathfrak{Z}}{
K\in\mathcal{A}\land K\in\subsets A} =
\mathcal{A}\cap\subsets A$.
\end{proof}

\begin{prop}
Let filters~$\mathcal{X}$
and~$\mathcal{Y}$ be such that
$\Base(\mathcal{X})=\Base(\mathcal{Y})=B$. Then
$\mathcal{X}\div C=\mathcal{Y}\div C
\Leftrightarrow \mathcal{X}=\mathcal{Y}$ for every
set~$C\supseteq B$.
\end{prop}

\begin{proof}
$\mathcal{X}\div C=\mathcal{Y}\div C\Leftrightarrow
\mathcal{X}\cup\setcond{K\in\subsets C}{K\supseteq B} = \mathcal{Y}\cup\setcond{K\in\subsets C}{K\supseteq B} \Leftrightarrow
\mathcal{X}=\mathcal{Y}$.
\end{proof}

\subsection{Equivalence of filters}

\begin{defn}
\index{equivalent!filters}Two filters $\mathcal{A}$ and $\mathcal{B}$
(with possibly different base sets) are equivalent ($\mathcal{A}\sim\mathcal{B}$)
iff there exists a set $X$ such that $X\in\mathcal{A}$ and $X\in\mathcal{B}$
and $\subsets X\cap\mathcal{A}=\subsets X\cap\mathcal{B}$.\end{defn}

\begin{prop}
$\mathcal{X}$ and~$\mathcal{Y}$ are equivalent iff
($\mathcal{X}\sim\mathcal{Y}$) iff
$\mathcal{Y} = \mathcal{X} \div \Base(\mathcal{Y})$ and
$\mathcal{X} = \mathcal{Y} \div \Base(\mathcal{X})$.\end{prop}

\begin{proof}
~
\begin{description}
\item[$\Rightarrow$] Suppose $\mathcal{X}\sim\mathcal{Y}$
that is there exists a set~$P$ such that
$\subsets P\cap\mathcal{X}=\subsets P\cap\mathcal{Y}$ and
$P\in\mathcal{X}$, $P\in\mathcal{Y}$. Then
$\mathcal{X}\div\Base(\mathcal{Y}) =
(\subsets P\cap\mathcal{X})\cup
\setcond{K\in\subsets\Base(\mathcal{Y})}{K\supseteq P} =
(\subsets P\cap\mathcal{Y})\cup
\setcond{K\in\subsets\Base(\mathcal{Y})}{K\supseteq P} =
\mathcal{Y}$. So
$\mathcal{X}\div\Base(\mathcal{Y}) = \mathcal{Y}$,
$\mathcal{Y}\div\Base(\mathcal{X}) = \mathcal{X}$ is similar.

\item[$\Leftarrow$] If $\Base(\mathcal{X})\notin\mathcal{Y}$ then
$\mathcal{Y}\div\Base(\mathcal{X})\not\ni\Base(\mathcal{Y})\in\mathcal{Y}$ and thus
$\mathcal{Y}\div\Base(\mathcal{X})\ne\mathcal{Y}$.

So $\Base(\mathcal{X})\in\mathcal{Y}$ and similarly
$\Base(\mathcal{Y})\in\mathcal{X}$. Thus
$\Base(\mathcal{X})\cap\Base(\mathcal{Y})\in\mathcal{Y}$
and similarly
$\Base(\mathcal{X})\cap\Base(\mathcal{Y})\in\mathcal{X}$.

It's enough to show
$\mathcal{X}\div(\Base(\mathcal{X})\cap\Base(\mathcal{Y})) =
\mathcal{Y}\div(\Base(\mathcal{X})\cap\Base(\mathcal{Y}))$
because for every $P\in\mathcal{X},\mathcal{Y}$ we have $\mathcal{X}\cap\subsets P = \mathcal{X}\div P =
(\mathcal{X}\div(\Base(\mathcal{X})\cap\Base(\mathcal{Y})))\div P$ and similarly $\mathcal{Y}\cap\subsets P =
(\mathcal{Y}\div(\Base(\mathcal{X})\cap\Base(\mathcal{Y})))\div P$. But it follows from the conditions and
proposition~\ref{double-rebase}.
\end{description}
\end{proof}

\begin{prop}
If two filters with the same base are equivalent they are equal.\end{prop}
\begin{proof}
Let $\mathcal{A}$ and $\mathcal{B}$ be two filters and $\subsets X\cap\mathcal{A}=\subsets X\cap\mathcal{B}$
for some set $X$ such that $X\in\mathcal{A}$ and $X\in\mathcal{B}$,
and $\Base(\mathcal{A})=\Base(\mathcal{B})$. Then
\begin{multline*}
\mathcal{A}=(\subsets X\cap\mathcal{A})\cup\setcond{Y\in\subsets\Base(\mathcal{A})}{Y\supseteq X}=\\
(\subsets X\cap\mathcal{B})\cup\setcond{Y\in\subsets\Base(\mathcal{B})}{Y\supseteq X}=\mathcal{B}.
\end{multline*}
\end{proof}

\begin{prop}\label{filteq-ext}
If $A\in\mathscr{S}\mathcal{A}$ then
$\mathcal{A}\div A\sim\mathcal{A}$.
\end{prop}
\begin{proof}
~
\begin{align*}
(\mathcal{A}\div A)\cap\subsets(A\cap\Base(\mathcal{A})) & =\\
\mathscr{S}\mathcal{A}\cap\subsets A\cap\subsets(A\cap\Base(\mathcal{A})) & =\\
\mathscr{S}\mathcal{A}\cap\subsets(A\cap\Base(\mathcal{A})) & =
\mathcal{A}\cap\subsets(A\cap\Base(\mathcal{A})).
\end{align*}
Thus $\mathcal{A}\div A\sim\mathcal{A}$ because $A\cap\Base(\mathcal{A})\supseteq X\in\mathcal{A}$
for some $X\in\mathcal{A}$ and 
\[
A\cap\Base(\mathcal{A})\supseteq X\cap\Base(\mathcal{A})\in\mathcal{A}\div A.
\]
\end{proof}

\begin{prop}
$\sim$ is an equivalence relation.
\end{prop}
\begin{proof}
~
\begin{description}
\item [{Reflexivity}] Obvious.
\item [{Symmetry}] Obvious.
\item [{Transitivity}] Let $\mathcal{A}\sim\mathcal{B}$ and $\mathcal{B}\sim\mathcal{C}$
for some filters $\mathcal{A}$, $\mathcal{B}$, and $\mathcal{C}$.
Then there exist a set $X$ such that $X\in\mathcal{A}$ and $X\in\mathcal{B}$
and $\subsets X\cap\mathcal{A}=\subsets X\cap\mathcal{B}$ and a set
$Y$ such that $Y\in\mathcal{B}$ and $Y\in\mathcal{C}$ and $\subsets Y\cap\mathcal{B}=\subsets Y\cap\mathcal{C}$.
So $X\cap Y\in\mathcal{A}$ because
\[
\subsets Y\cap\subsets X\cap\mathcal{A}=\subsets Y\cap\subsets X\cap\mathcal{B}=\subsets(X\cap Y)\cap\mathcal{B}\supseteq\{X\cap Y\}\cap\mathcal{B}\ni X\cap Y.
\]
Similarly we have $X\cap Y\in\mathcal{C}$. Finally
\begin{multline*}
\subsets(X\cap Y)\cap\mathcal{A}=\subsets Y\cap\subsets X\cap\mathcal{A}=\subsets Y\cap\subsets X\cap\mathcal{B}=\\
\subsets X\cap\subsets Y\cap\mathcal{B}=\subsets X\cap\subsets Y\cap\mathcal{C=}\subsets(X\cap Y)\cap\mathcal{C}.
\end{multline*}

\end{description}
\end{proof}

\begin{defn}
I will call equivalence classes as
\emph{unfixed filters}.
\end{defn}

\begin{rem}
The word ``unfixed'' is meant to negate ``fixed'' (having
a particular base) filters.
\end{rem}

\begin{prop}\label{filteq-if-sim}
$\mathcal{A}\sim\mathcal{B}$ iff
$\mathscr{S}\mathcal{A}=\mathscr{S}\mathcal{B}$ for every
filters~$\mathcal{A}$,~$\mathcal{B}$ on sets.\footnote{Use this proposition to shorten proofs of other
theorem about equivalence of filters? (Our proof
uses transitivity of equivalence of filters. So we can't
use it to prove that it is an equivalence relation, to avoid circular proof.)}
\end{prop}

\begin{proof}
Let $\mathcal{A}\sim\mathcal{B}$. Then there is a set~$P$
such that~$P\in\mathcal{A}$,~$P\in\mathcal{B}$ and
$\mathcal{A}\cap\subsets P=\mathcal{B}\cap\subsets P$.
So $\mathscr{S}\mathcal{A} = (\mathcal{A}\cap\subsets P)\cup
\setcond{K\in\mathfrak{Z}}{K\supseteq P}$.
Similarly
$\mathscr{S}\mathcal{B} = (\mathcal{B}\cap\subsets P)\cup
\setcond{K\in\mathfrak{Z}}{K\supseteq P}$.
Combining, we have $\mathscr{S}\mathcal{A}=\mathscr{S}\mathcal{B}$.

Let now $\mathscr{S}\mathcal{A}=\mathscr{S}\mathcal{B}$.
Take $K\in\mathscr{S}\mathcal{A}=\mathscr{S}\mathcal{B}$.
Then $\mathcal{A}\div K=\mathcal{B}\div K$ and thus
(proposition~\ref{filteq-ext})
$\mathcal{A}\sim\mathcal{A}\div K =
\mathcal{B}\div K\sim\mathcal{B}$, so having
$\mathcal{A}\sim\mathcal{B}$.
\end{proof}

\begin{prop}\label{sim-rebase}
$\mathcal{A}\sim\mathcal{B} \Rightarrow
\mathcal{A}\div B=\mathcal{B}\div B$ for every
filters~$\mathcal{A}$ and~$\mathcal{B}$ and set~$B$.
\end{prop}

\begin{proof}
$\mathcal{A}\div B =
\rsupfun{B\cap}\mathscr{S}\mathcal{A} =
\rsupfun{B\cap}\mathscr{S}\mathcal{B} =
\mathcal{B}\div B$.
\end{proof}

\subsection{Poset of unfixed filters}

\begin{lem}
Let filters~$\mathcal{X}$
and~$\mathcal{Y}$ be such that
$\Base(\mathcal{X})=\Base(\mathcal{Y})=B$. Then
$\mathcal{X}\div C\sqsubseteq\mathcal{Y}\div C
\Leftrightarrow \mathcal{X}\sqsubseteq\mathcal{Y}$ for every
set~$C\supseteq B$.
\end{lem}

\begin{proof}
$\mathcal{X}\div C\sqsubseteq\mathcal{Y}\div C\Leftrightarrow
\mathcal{X}\div C\supseteq\mathcal{Y}\div C\Leftrightarrow
\mathcal{X}\cup\setcond{K\in\subsets C}{K\supseteq B} \supseteq \mathcal{Y}\cup\setcond{K\in\subsets C}{K\supseteq B} \Leftrightarrow
\mathcal{X}\supseteq\mathcal{Y} \Leftrightarrow
\mathcal{X}\sqsubseteq\mathcal{Y}$.
\end{proof}

\begin{prop}
$\mathcal{X}\sqsubseteq\mathcal{Y} \Rightarrow
\mathcal{X}\div B\sqsubseteq\mathcal{Y}\div B$ for every
filters~$\mathcal{X}$,~$\mathcal{Y}$ with the same base
and set~$B$.
\end{prop}

\begin{proof}
$\mathcal{X}\sqsubseteq\mathcal{Y} \Leftrightarrow
\mathcal{X}\supseteq\mathcal{Y} \Rightarrow
\mathcal{X}\div B\supseteq\mathcal{Y}\div B \Leftrightarrow
\mathcal{X}\div B\sqsubseteq\mathcal{Y}\div B$.
\end{proof}

Define order of unfixed filters using already defined order
of filters of a fixed base:

\begin{defn}
$\mathcal{X}\sqsubseteq\mathcal{Y} \Leftrightarrow
\exists x\in\mathcal{X},y\in\mathcal{Y}:
(\Base(x)=\Base(y)\land x\sqsubseteq y)$ for unfixed
filters~$\mathcal{X}$,~$\mathcal{Y}$.
\end{defn}

\begin{lem}
$\mathcal{X}\sqsubseteq\mathcal{Y} \Leftrightarrow
\mathscr{S}\mathcal{X}\sqsubseteq\mathscr{S}\mathcal{Y}$
for every unfixed filters~$\mathcal{X}$,~$\mathcal{Y}$.
\end{lem}

\begin{proof}
~
\begin{description}
\item[$\Rightarrow$] Suppose
$\mathcal{X}\sqsubseteq\mathcal{Y}$. Then there
exist~$x\in\mathcal{X}$,~$y\in\mathcal{Y}$ such that
$\Base(x)=\Base(y)$ and $x\sqsubseteq y$. Then
$\mathscr{S}\mathcal{X} =
\mathscr{S}x \sqsubseteq \mathscr{S}y =
\mathscr{S}\mathcal{Y}$.

\item[$\Leftarrow$] Suppose
$\mathscr{S}\mathcal{X}\sqsubseteq\mathscr{S}\mathcal{Y}$.
Then there are $x\in\mathcal{X}$,~$y\in\mathcal{Y}$
such that $\mathscr{S}x\sqsubseteq\mathscr{S}y$.
Consequently
$\mathscr{S}x' \sqsubseteq\mathscr{S}y'$ for
$x'=x\div(\Base(x)\cup\Base(y))$,
$y'=y\div(\Base(x)\cup\Base(y))$.
So we have~$x'\in\mathcal{X}$,~$y'\in\mathcal{Y}$,
$\Base(x')=\Base(y')$ and $x'\sqsubseteq y'$,
thus $\mathcal{X}\sqsubseteq\mathcal{Y}$.
\end{description}
\end{proof}

\begin{thm}
$\sqsubseteq$~on the set of unfixed filters is a poset.
\end{thm}

\begin{proof}
~
\begin{description}
\item[Reflexivity] From the previous theorem.

\item[Transitivity] From the previous theorem.

\item[Antisymmetry] Suppose
$\mathcal{X}\sqsubseteq\mathcal{Y}$ and
$\mathcal{Y}\sqsubseteq\mathcal{X}$. Then
$\mathscr{S}\mathcal{X}\sqsubseteq\mathscr{S}\mathcal{Y}$ and
$\mathscr{S}\mathcal{Y}\sqsubseteq\mathscr{S}\mathcal{X}$.
Thus $\mathscr{S}\mathcal{X}=\mathscr{S}\mathcal{Y}$ and
so $\mathscr{S}x=\mathscr{S}y$ for
some~$x\in\mathcal{X}$,~$y\in\mathcal{Y}$. Consequently
$\mathscr{S}(x\div B)=\mathscr{S}(y\div B)$ for
$B=\Base(x)\cup\Base(y)$. Thus $x\div B=y\div B$
and so $x\sim y$, thus $\mathcal{X}=\mathcal{Y}$.
\end{description}
\end{proof}

\begin{thm}
$[x]\sqsubseteq[y] \Leftrightarrow x\sqsubseteq y$ for
filters~$x$ and~$y$ with the same base set.
\end{thm}

\begin{proof}
~
\begin{description}
\item[$\Leftarrow$] Obvious.

\item[$\Rightarrow$] Let $\Base(x)=\Base(y)=B$.
Suppose $[x]\sqsubseteq[y]$. Then
there exist $x'\sim x$ and $y'\sim y$ such that
$C=\Base(x')=\Base(y')$ (for some set~$C$) and
$x'\sqsubseteq y'$.

We have by the lemma
$x'\div(B\cup C)\sqsubseteq y'\div(B\cup C)$.

But $x'\div(B\cup C)=x\div(B\cup C)$ and
$y'\div(B\cup C)=y\div(B\cup C)$. So
$x\div(B\cup C)\sqsubseteq y\div(B\cup C)$ and thus again
applying the lemma $x\sqsubseteq y$.
\end{description}
\end{proof}

\begin{prop}
$\mathcal{X}\sqsubseteq\mathcal{Y} \Rightarrow
\mathcal{X}\div C\sqsubseteq\mathcal{Y}\div C$ for every
unfixed filters~$\mathcal{X}$,~$\mathcal{Y}$ and set~$C$.
\end{prop}

\begin{proof}
Let $\mathcal{X}\sqsubseteq\mathcal{Y}$. Then there
are~$x\in\mathcal{X}$,~$y\in\mathcal{Y}$ such that
$\Base(x)=\Base(y)$ and $x\sqsubseteq y$.
Then by proved above $x\div C\sqsubseteq y\div C$ what is
equivalent to
$\mathcal{X}\div C\sqsubseteq\mathcal{Y}\div C$.
\end{proof}

\begin{prop}
If~$C\in\mathscr{S}\mathcal{X}$
and~$C\in\mathscr{S}\mathcal{Y}$ for unfixed
filters~$\mathcal{X}$ and~$\mathcal{Y}$ then
$\mathcal{X}\div C\sqsubseteq\mathcal{Y}\div C \Leftrightarrow
\mathcal{X}\sqsubseteq\mathcal{Y}$.
\end{prop}

\begin{proof}
~
\begin{description}
\item[$\Leftarrow$] Previous proposition.

\item[$\Rightarrow$] Let
$\mathcal{X}\div C\sqsubseteq\mathcal{Y}\div C$.
We have some~$x\in\mathcal{X}$,~$y\in\mathcal{Y}$,
such that $\Base(x)=\Base(y)$ and
$x\div C\sqsubseteq y\div C$.
So $\mathscr{S}(x\div C)\sqsubseteq\mathscr{S}(y\div C)$.
But $\mathscr{S}(x\div C)\sim x$ and
$\mathscr{S}(y\div C)\sim y$. Thus
$\mathscr{S}x\sqsubseteq\mathscr{S}y$ that is
$x\sqsubseteq y$ and so
$\mathcal{X}\sqsubseteq\mathcal{Y}$.
\end{description}
\end{proof}

\subsection{Rebase of unfixed filters}

Proposition~\ref{sim-rebase} allows to define:

\begin{defn}
$\mathcal{A}\div B = a\div B$ for an unfixed
filter~$\mathcal{A}$ and arbitary $a\in\mathcal{A}$.
\end{defn}

\begin{obvious}
$(\mathcal{X}\div A)\div B = \mathcal{X}\div B$ if
$B\subseteq A$ for every unfixed filter~$\mathcal{X}$ and
sets~$A$,~$B$.
\end{obvious}

Proposition~\ref{filteq-if-sim} allows to define:

\begin{defn}
$\mathscr{S}\mathcal{A} = \mathscr{S}a$ for
every~$a\in\mathcal{A}$ for every unfixed
filter~$\mathcal{A}$.
\end{defn}

\begin{thm}\label{mathscrs-iso}
$\mathscr{S}$~is an order-isomorphism from the poset of
unfixed filters to the poset of filters on~$\mathfrak{Z}$.
\end{thm}

\begin{proof}
We already know that~$\mathscr{S}$ is an order embedding.
It remains to prove that it is a surjection.

Let~$\mathcal{Y}$ be a filter on~$\mathfrak{Z}$.
Take $\mathfrak{Z}\ni X\in\mathcal{Y}$. Then
$\rsupfun{X\cap}\mathcal{Y}$ is a filter on~$X$ and
$\mathscr{S}[\rsupfun{X\cap}\mathcal{Y}]=\mathscr{S}\rsupfun{X\cap}\mathcal{Y}=\mathcal{Y}$. We have proved that
it is a surjection.
\end{proof}

\begin{obvious}
$\mathcal{A}\div B = \rsupfun{B\cap}\mathscr{S}\mathcal{A}$
for every unfixed filter~$\mathcal{A}$.
\end{obvious}

\begin{obvious}
If $A\in\mathscr{S}\mathcal{A}$ then
$\mathcal{A}\div A\in\mathcal{A}$ for every unfixed
filter~$\mathcal{A}$.
\end{obvious}

\begin{prop}
If~$C\in\mathscr{S}\mathcal{X}$
and~$C\in\mathscr{S}\mathcal{Y}$ for unfixed
filters~$\mathcal{X}$ and~$\mathcal{Y}$ then
$\mathcal{X}\div C=\mathcal{Y}\div C \Leftrightarrow
\mathcal{X}=\mathcal{Y}$.
\end{prop}

\begin{proof}
The backward implication is obvious. Let now
$\mathcal{X}\div C=\mathcal{Y}\div C$.
Take~$x\in\mathcal{X}$,~$y\in\mathcal{Y}$.
We have
$\mathcal{X}\div C=x\div C=(x\div B)\div C$
for $B=C\cup\Base(x)\cup\Base(y)$.
Similary $\mathcal{Y}\div C=(y\div B)\div C$.
Thus $(x\div B)\div C=(y\div B)\div C$ and thus
$x\div B=y\div B$, so $x\sim y$ that is
$\mathcal{X}=\mathcal{Y}$.
\end{proof}

\begin{prop}
$\mathcal{A}\div A =
\bigsqcap\setcond{\uparrow^A(X\cap A)}{X\in\mathscr{S}\mathcal{A}}$ for every unfixed filter~$\mathcal{A}$.
\end{prop}

\begin{proof}
Take~$a\in\mathcal{A}$.
\begin{multline*}
\bigsqcap\setcond{\uparrow^A(X\cap A)}{X\in\mathscr{S}\mathcal{A}} =
\bigsqcap\setcond{\uparrow^A(X\cap A\cap\Base(a))}{X\in\mathscr{S}\mathcal{A}} =
\bigsqcap\setcond{\uparrow^A(X\cap A)}{X\in\mathscr{S}\mathcal{A}\cap\subsets\Base(a)} = \\
\bigsqcap\setcond{\uparrow^A(X\cap A)}{X\in\mathscr{S}a\cap\subsets\Base(a)} =
\bigsqcap\setcond{\uparrow^A(X\cap A)}{X\in a}=
a\div A = \mathcal{A}\div A.
\end{multline*}
\end{proof}

\subsection{The diagram for unfixed filters}

Fix a set~$B$.

\begin{lem}
$\mathcal{X}\mapsto\mathcal{X}\div B$ and $x\mapsto[x]$ are
mutually inverse order isomorphisms between
$\setcond{\text{unfixed filter }\mathcal{X}}{B\in\mathscr{S}\mathcal{X}}$ and $\mathfrak{F}(B)$.
\end{lem}

\begin{proof}
First, $\mathcal{X}\div B\in\mathfrak{F}(B)$ for
$\mathcal{X}\in\setcond{\text{unfixed filter }\mathcal{X}}{B\in\mathscr{S}\mathcal{X}}$ and
$[x]\in\setcond{\text{unfixed filter }\mathcal{X}}{B\in\mathscr{S}\mathcal{X}}$
for $x\in\mathfrak{F}(B)$.

Suppose $\mathcal{X}_0\in\setcond{\text{unfixed filter }\mathcal{X}}{B\in\mathscr{S}\mathcal{X}}$,
$x=\mathcal{X}_0\div B$, and $\mathcal{X}_1=[x]$. We will prove
$\mathcal{X}_0=\mathcal{X}_1$. Really, $x\in\mathcal{X}_1$,
$x=k\div B$ for $k\in\mathcal{X}_0$, $x\sim k$, thus
$x\in\mathcal{X}_0$. So $\mathcal{X}_0=\mathcal{X}_1$.

Suppose $x_0\in\mathfrak{F}(B)$, $\mathcal{X}=[x_0]$,
$x_1=\mathcal{X}\div B$. We will prove $x_0=x_1$. Really,
$x_1=x_0\div B$. So $x_1=x_0$ because
$\Base(x_0)=\Base(x_1)=B$.

So we proved that they are mutually inverse bijections. That
they are order preserving is obvious.
\end{proof}

\begin{lem}
$\mathscr{S}$ and
$\mathcal{X}\mapsto\rsupfun{B\cap}\mathcal{X}=
\mathcal{X}\cap\subsets B$
are mutually inverse order isomorphisms
between~$\mathfrak{F}(B)$ and
$\setcond{\mathcal{X}\in\mathfrak{F}(\mathfrak{Z})}{B\in\mathcal{X}}$.
\end{lem}

\begin{proof}
First, $\mathscr{S}x\in\setcond{\mathcal{X}\in\mathfrak{F}(\mathfrak{Z})}{B\in\mathcal{X}}$ for $x\in\mathfrak{F}(B)$
because of theorem~\ref{mathscrs-iso} and
$\rsupfun{B\cap}\mathcal{X}\in\mathfrak{F}(B)$ obviously.

Let's prove
$\rsupfun{B\cap}\mathcal{X}=\mathcal{X}\cap\subsets B$.
If $X\in\rsupfun{B\cap}\mathcal{X}$ then
$X\in\mathcal{X}$ (because $B\in\mathcal{X}$) and
$X\in\subsets B$. So $X\in\mathcal{X}\cap\subsets B$. If
$X\in\mathcal{X}\cap\subsets B$ then
$X=B\cap X\in\rsupfun{B\cap}\mathcal{X}$.

Let~$x_0\in\mathfrak{F}(B)$, $\mathcal{X}=\mathscr{S}x$, and
$x_1=\rsupfun{B\cap}\mathcal{X}$. Then obviously $x_0=x_1$.

Let now
$\mathcal{X}_0\in\setcond{\mathcal{X}\in\mathfrak{F}(\mathfrak{Z})}{B\in\mathcal{X}}$, $x=\rsupfun{B\cap}\mathcal{X}_0$, and
$\mathcal{X}_1=\mathscr{S}x$. Then
$\mathcal{X}_1=
\mathcal{X}_0\cup\setcond{K\in\mathfrak{Z}}{K\supseteq B}=
\mathcal{X}_0$.

So we proved that they are mutually inverse bijections. That
they are order preserving is obvious.
\end{proof}

\begin{thm}\label{powfilt-diag}
The diagram at the figure~\ref{unfix-dia} (with the horizontal ``unnamed''
arrow \emph{defined} as the inverse isomorphism of its opposite arrow)
is a commutative diagram (in category $\mathbf{Set}$), every arrow
in this diagram is an isomorphism. Every cycle in this diagram is
an identity (therefore ``parallel'' arrows are mutually inverse).
The arrows preserve order.

\begin{figure}[ht]
\caption{\label{unfix-dia}}

\begin{tikzcd}[row sep=2cm, column sep=0.5cm]
& \mathfrak{F}(DB)
\arrow[rd, shift left, "x\mapsto{[x]}"]
\arrow[ld, shift left, "\mathscr{S}"] \\
\setcond{\mathcal{X}\in\mathfrak{F}(\mathfrak{Z})}
  {B\in\mathcal{X}}
\arrow[ru, shift left, "\mathcal{X}\mapsto\rsupfun{B\cap}\mathcal{X}=\mathcal{X}\cap\subsets B"]
\arrow[rr, shift left]
& & \setcond{\text{unfixed filter }\mathcal{X}}
  {B\in\mathscr{S}\mathcal{X}}
\arrow[lu, shift left, "\mathcal{X}\mapsto\mathcal{X}\div B"]
\arrow[ll, shift left, "\mathscr{S}"]
\end{tikzcd}
\end{figure}
\end{thm}

\begin{proof}
It's proved above, that all morphisms (except the ``unnamed'' arrow,
which is the inverse morphism by definition) depicted on the diagram
are bijections and the depicted ``opposite'' morphisms are mutually
inverse.

That arrows preserve order is obvious.

It remains to apply lemma~\ref{three-loop-lem} (taking into account the proof of theorem~\ref{mathscrs-iso}).
\end{proof}

\subsection{The lattice of unfixed filters}

\begin{thm}
Every nonempty set of unfixed filters has an infimum.
\end{thm}

\begin{proof}
Theorem~\ref{distr-meet}.
\end{proof}

\begin{thm}
Every bounded above set of unfixed filters has a supremum.
\end{thm}

\begin{proof}
Theorem~\ref{join-filt-gen} for nonempty sets of unfixed
filters. The join $\bigsqcup\emptyset=[\bot]$ for the
least filter~$\bot\in\mathfrak{Z}(DA)$ for
arbitrary~$A\in\mathfrak{Z}$.
\end{proof}

\begin{cor}
If~$\mathfrak{Z}$ is the set of small sets, then
every small set of unfixed filters has a supremum.
\end{cor}

\begin{proof}
Let~$S$ be a set of filters on~$\mathfrak{Z}$. Then $T_{\mathcal{X}}\in\mathcal{X}$ is a small set
for every~$\mathcal{X}\in S$.
Thus
$\setcond{T_{\mathcal{X}}}{\mathcal{X}\in S}$ is small
set and thus
$T=\bigcup\setcond{T_{\mathcal{X}}}{\mathcal{X}\in S}$ is small set. Take the filter $\mathcal{T}=\uparrow T$.
Then~$\mathcal{T}$ is an upper bound of~$S$ and we can apply the theorem.
\end{proof}

\begin{obvious}
The poset of unfixed filters is bounded below (but not above).
\end{obvious}

\begin{prop}
The set of unfixed filters forms a co-brouwerian (and thus
distributive) lattice.
\end{prop}

\begin{proof}
Corollary~\ref{filt-also-distr}.
\end{proof}

\subsection{Principal unfixed filters and filtrator of unfixed filters}

\begin{defn}
\emph{Principal} unfixed filter is an unfixed filter
corresponding to a principal filter on the
poset~$\mathfrak{Z}$.
\end{defn}

\begin{defn}
The \emph{filtrator of unfixed filters} is the filtrator
whose base are unfixed filters and whose core are principal
unfixed filters.
\end{defn}

We will equate principal unfixed filters with corresponding
sets.

\begin{thm}
If we add principal filters on~$DB$, principal filters
on~$\mathcal{Z}$ containing~$B$, and above defined
principal unfixed filters corresponding to them to
appropriate nodes of the diagram~\ref{unfix-dia}, then
the diagram turns into a commutative diagram of isomorphisms
between filtrators. (I will not draw the modified diagram
for brevity.)

Every arrow of this diagram is an isomorphism between
filtrators, every cycle in the diagram is identity.
\end{thm}

\begin{proof}
We need to prove only that principal filters on~$B$ and
principal filters on~$\mathfrak{Z}$ containing~$B$
correspond to each other by the isomorphisms of the diagram.
But that's obvious.
\end{proof}

\begin{obvious}
The filtrator of unfixed filters is a primary filtrator.
\end{obvious}

\begin{obvious}
The filtrator of unfixed filters is down-aligned.
\end{obvious}

\begin{prop}
The filtrator of unfixed filters is
\begin{enumerate}
\item filtered;
\item with join-closed core.
\end{enumerate}
\end{prop}

\begin{proof}
Theorem~\ref{semifilt-joinclosed}.
\end{proof}

\begin{prop}
The filtrator of unfixed filters is with binarily meet-closed core.
\end{prop}

\begin{proof}
Corollary~\ref{f-meet-closed}.
\end{proof}

\begin{prop}
The filtrator of unfixed filters is with separable core.
\end{prop}

\begin{proof}
Theorem~\ref{when-sep-core}.
\end{proof}

\begin{prop}
$\Cor\mathcal{X}$ and $\Cor'\mathcal{X}$ are defined for every
unfixed filter~$\mathcal{X}$ and
$\Cor\mathcal{X}=\Cor'\mathcal{X}$.
\end{prop}

\begin{proof}
$\Cor\mathcal{X}$ and $\Cor'\mathcal{X}$ exists because
of the above isomorphism.

$\Cor'\mathcal{X}=\Cor\mathcal{X}$ by
theorem~\bookref{cor-eq}.
\end{proof}

\begin{obvious}
$\Cor\mathcal{X}=\Cor'\mathcal{X}=\bigcap\mathcal{X}$ for
every filter~$\mathcal{X}\in\mathfrak{F}(\mathfrak{Z})$.
\end{obvious}

\begin{prop}
$\atoms\bigsqcap S=\bigcap\rsupfun{\atoms}S$ for every $S\in\subsets\mathfrak{A}\setminus\{\emptyset\}$.
\end{prop}

\begin{proof}
Theorem~\ref{atoms-infmeet}.
\end{proof}

\begin{prop}
$\atoms(\mathcal{A}\sqcup\mathcal{B})=\atoms\mathcal{A}\cup\atoms\mathcal{B}$ for unfixed
filters~$\mathcal{A}$,~$\mathcal{B}$.
\end{prop}

\begin{proof}
Proposition~\ref{f-atoms-join}.
\end{proof}

\begin{prop}
$\corestar\mathcal{X}$ is a free star for every unfixed
filter~$\mathcal{X}$.
\end{prop}

\begin{proof}
Theorem~\ref{da-is-free-star}.
\end{proof}

\begin{prop}
The poset of unfixed filters is an atomistic lattice.
\end{prop}

\begin{proof}
Easily follows from~\ref{powfilt-diag} by isomorphism.
\end{proof}

\begin{prop}
The poset of unfixed filters is a strongly separable lattice.
\end{prop}

\begin{proof}
Theorem~\ref{atom-is-sep}.
\end{proof}

\begin{prop}
$\Cor\mathcal{X}=\setcond{x}{\{x\}\sqsubseteq\mathcal{X}}$
for every unfixed filter~$\mathcal{X}$.
\end{prop}

\begin{proof}
Theorem~\ref{cor-join-atom}.
\end{proof}

\begin{prop}
$\Cor(\mathcal{A}\sqcap\mathcal{B})=
\Cor\mathcal{A}\sqcap\Cor\mathcal{B}$ for every unfixed
filters~$\mathcal{A}$,~$\mathcal{B}$.
\end{prop}

\begin{proof}
Theorem~\ref{dual-cor-meet}.
\end{proof}

\begin{prop}
$\Cor\bigsqcap^{\mathfrak{A}}S=\bigsqcap^{\mathfrak{Z}}\rsupfun{\Cor}S$ for the filtrator of unfixed filters for
every nonempty set~$S$ of unfixed filters.
\end{prop}

\begin{proof}
Theorem~\ref{dual-cor-inf-meet}.
\end{proof}

\begin{prop}
$\Cor(\mathcal{A}\sqcup^{\mathfrak{A}}\mathcal{B}) =
\Cor\mathcal{A}\sqcup^{\mathfrak{Z}}\Cor\mathcal{B}$ for the filtrator of unfixed filters for every unfixed filters~$\mathcal{A}$, and~$\mathcal{B}$.
\end{prop}

\begin{proof}
Can be easily deduced from theorem~\ref{dual-core-join}
and the triangular diagram (above) of isomorphic filtrators.
\end{proof}

\begin{conjecture}
The theorem~\ref{closed-free-star} holds for unfixed
filters, too.
\end{conjecture}

It is expected to be easily provable using isomorphisms from
the triangular diagram.

\chapter{Unfixed categories}

\section{Axiomatics for unfixed morphisms}

Let $(\mathfrak{A},\mathfrak{Z})$ be a filtrator, where
both~$\mathfrak{A}$ and~$\mathfrak{Z}$ are lattices.
For simplicity assume that~$\mathfrak{Z}$ is a sublattice
of~$\mathfrak{A}$.

Let we have a category~$\mathcal{C}$ whose objects are
$\mathfrak{Z}$.

\begin{defn}
\emph{Category with restricted identities} is defined
axiomatically:

\emph{Restricted identity}~$\id^{\mathcal{C}(A,B)}_X$ is
described by the axioms:

\begin{enumerate}
\item $\id^{\mathcal{C}(A,B)}_X\in\Hom_{\mathcal{C}}(A,B)$
whenever $\mathfrak{A}\ni X\sqsubseteq A\sqcap B$;
\item $\id^{\mathcal{C}(A,A)}_A = 1^{\mathcal{C}}_A$;
\item $\id^{\mathcal{C}(B,C)}_Y \circ \id^{\mathcal{C}(A,B)}_X = \id^{\mathcal{C}(A,C)}_{X\sqcap Y}$;
\item
$\forall X\in\mathfrak{A}\exists A\in\mathfrak{Z}:A\sqsupseteq X$.
\end{enumerate}

For a \emph{partially ordered category with restricted identities} introduce additional axiom $X\sqsubseteq Y\Rightarrow
\id^{\mathcal{C}(A,B)}_X\sqsubseteq\id^{\mathcal{C}(A,B)}_Y$.

For \emph{dagger categories with restricted identities} introduce additional axiom
$\left(\id^{\mathcal{C}(A,B)}_X\right)^\dagger =
\id^{\mathcal{C}(A,B)}_X$.
\end{defn}

\begin{defn}
I call a category with restricted identities
\emph{injective} when the axiom $X\ne Y\Rightarrow
\id^{\mathcal{C}(A,B)}_X\ne\id^{\mathcal{C}(A,B)}_Y$
whenever $X,Y\sqsubseteq A\sqcap B$ holds.
\end{defn}

\begin{defn}
Define $\mathcal{E}_{\mathcal{C}}^{A,B} =
\id^{\mathcal{C}(A,B)}_{A\sqcap B}$.
\end{defn}

\begin{prop}\label{e-mono-epi}
  ~  
  \begin{enumerate}
    \item If $A \sqsubseteq B$ then $\mathcal{E}_{\mathcal{C}}^{A,B}$ is a
    monomorphism.
    
    \item If $A \sqsupseteq B$ then $\mathcal{E}_{\mathcal{C}}^{A,B}$ is an
    epimorphism.
  \end{enumerate}
\end{prop}

\begin{proof}
  We'll prove only the first as the second is dual.
  
  Let $\mathcal{E}_{\mathcal{C}}^{A,B} \circ f = \mathcal{E}_{\mathcal{C}}^{A,B} \circ g$. Then
  $\mathcal{E}_{\mathcal{C}}^{B,A} \circ \mathcal{E}_{\mathcal{C}}^{A,B}
  \circ f = \mathcal{E}_{\mathcal{C}}^{B,A} \circ \mathcal{E}_{\mathcal{C}}^{A,B} \circ g$;
  $1^A \circ f = 1^A \circ g$; $f = g$.
\end{proof}

\begin{prop}
  $\mathcal{E}_{\mathcal{C}}^{B,C} \circ \mathcal{E}_{\mathcal{C}}^{A,B} = \mathcal{E}_{\mathcal{C}}^{A,C}$
  if $B \sqsupseteq A \sqcap C$ (for every sets $A$, $B$, $C$).
\end{prop}

\begin{proof}
  $\mathcal{E}_{\mathcal{C}}^{B,C} \circ \mathcal{E}_{\mathcal{C}}^{A,B} = \mathcal{E}_{\mathcal{C}}^{A,C}$
  is equivalent to:
  
  $\id^{\mathcal{C}(B,C)}_{B \sqcap C} \circ \id^{\mathcal{C}(A,B)}_{A \sqcap B} = \id^{\mathcal{C}(A,C)}_{A \sqcap C}$ what is obviously true.
\end{proof}

\section{Rectangular embedding-restriction}

\begin{defn}
  $\iota_{B_0, B_1} f = \mathcal{E}_{\mathcal{C}}^{\Dst f,B_1} \circ f \circ
  \mathcal{E}_{\mathcal{C}}^{B_0,\Src f}$ for $f \in
  \Hom_{\mathcal{C}} (A_0 , A_1)$.
\end{defn}

For brevity $\iota_B f = \iota_{B, B} f$.

\begin{obvious}
$\iota_{B_0, B_1} f\sqsubseteq f$.
\end{obvious}

\begin{prop}
  $\iota_{\Src f, \Dst f} f = f$.
\end{prop}

\begin{proof}
  $\iota_{\Src f, \Dst f} f = \mathcal{E}_\mathcal{C}^{\Dst f,\Dst f} \circ f \circ \mathcal{E}_\mathcal{C}^{\Src f,\Src f} =
  1_{\mathcal{C}}^{\Dst f} \circ f \circ 1_{\mathcal{C}}^{\Src f} = f$.
\end{proof}

\begin{prop}
  The function $\iota_{B_0, B_1} |_{f \in \Hom_{\mathcal{C}} (A_0 ,
  A_1)}$ is injective, .
\end{prop}

\begin{proof}
  Because $\mathcal{E}_{\mathcal{C}}^{A_1,B_1}$ is a monomorphism and $\mathcal{E}_{\mathcal{C}}^{A_0,B_0}$ is an epimorphism.
\end{proof}

\begin{cor}\label{iota-emb}
  The function $\iota_{B_0, B_1} |_{f \in \Hom_{\mathcal{C}} (A_0 ,
  A_1)}$ is order embedding if $A_0 \sqsubseteq B_0 \wedge A_1 \sqsubseteq B_1$ for ordered categories
  with restricted identities.
\end{cor}

\begin{prop}\label{iota-comp}
  Let $f : A_0 \rightarrow A_1$ and $g : A_1 \rightarrow A_2$ and $A_1
  \sqsubseteq B_1$. Then $\iota_{B_0, B_2} (g \circ f) = \iota_{B_1, B_2} g
  \circ \iota_{B_0, B_1} f$.
\end{prop}

\begin{proof}
  $\iota_{B_0, B_2} (g \circ f) = \mathcal{E}_{\mathcal{C}}^{A_2,B_2}
  \circ g \circ f \circ \mathcal{E}_{\mathcal{C}}^{B_0,A_0} = \mathcal{E}_{\mathcal{C}}^{A_2,B_2} \circ g \circ 1^{A_1} \circ f
  \circ \mathcal{E}_{\mathcal{C}}^{B_0,A_0} = \mathcal{E}_{\mathcal{C}}^{A_2,B_2} \circ g \circ \id^{\mathcal{C}(\Dst f,\Src g)}_{A_1} \circ f
  \circ \mathcal{E}_{\mathcal{C}}^{B_0,A_0} = \mathcal{E}_{\mathcal{C}}^{A_2,B_2} \circ g \circ \mathcal{E}^{B_1,A_1}
  \circ \mathcal{E}^{A_1,B_1} \circ f \circ \mathcal{E}_{\mathcal{C}}^{B_0,A_0} = \iota_{B_1, B_2} g \circ \iota_{B_0,
  B_1} f$.
\end{proof}

\section{Image and domain}

Let define that
$\mathscr{S}\mathcal{A}=\setcond{K\in\mathfrak{Z}}{
\exists X\in\mathcal{A}:X\subseteq K}$
holds not only for filters but for any set~$\mathcal{A}$ of
sets.

\begin{obvious}
$\mathscr{S}\mathcal{A}\supseteq\mathcal{A}$.
\end{obvious}

\begin{defn}
~
\begin{enumerate}
\item $\operatorname{IM} f = \setcond{Y \in \mathfrak{Z}}{\mathcal{E}_{\mathcal{C}}^{Y, \Dst f} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f,
Y} \circ f = f} = \setcond{Y \in \mathfrak{Z}}{\id^{\mathcal{C}(\Dst f,\Dst f)}_{Y\sqcap\Dst f} \circ f = f}$;
\item $\operatorname{DOM} f = \setcond{X \in \mathfrak{Z}}{f\circ\mathcal{E}_{\mathcal{C}}^{\Src f, X} \circ \mathcal{E}_{\mathcal{C}}^{X, \Src f} = f} = \setcond{X \in \mathfrak{Z}}{f \circ \id^{\mathcal{C}(\Src f,\Src f)}_{X\sqcap\Src f} = f}$.
\end{enumerate}
\end{defn}

\begin{defn}
~
\begin{enumerate}
\item $\operatorname{Im} f = \setcond{Y\in\operatorname{IM} f}{Y\sqsubseteq\Dst f}$;
\item $\operatorname{Dom} f = \setcond{X\in\operatorname{DOM} f}{X\sqsubseteq\Src f}$.
\end{enumerate}
\end{defn}

\begin{prop}
~
\begin{enumerate}
\item $\operatorname{IM} f = \mathscr{S}\operatorname{Im} f$;
\item $\operatorname{DOM} f = \mathscr{S}\operatorname{Dom} f$;
\item $\operatorname{Im} f = \rsupfun{\Dst f\cap}\operatorname{IM} f$;
\item $\operatorname{Dom} f = \rsupfun{\Dst f\cap}\operatorname{DOM} f$.
\end{enumerate}
\end{prop}

\begin{proof}
$\operatorname{IM} f =
\setcond{Y \in \mathfrak{Z}}{\id^{\mathcal{C}(\Dst f,\Dst f)}_{Y\sqcap\Dst f} \circ f = f}$.

Suppose $Y\in\operatorname{IM}f$. Then take $Y'=Y\sqcap\Dst f$. We have $Y\sqsupseteq Y'$ and $Y'\in\operatorname{Im}f$. So $Y\in\mathscr{S}\operatorname{Im}f$. If $Y\in\mathscr{S}\operatorname{Im}f$ then $Y\in\operatorname{IM}f$ obviously.
So $\operatorname{IM} f = \mathscr{S}\operatorname{Im} f$.

$\rsupfun{\Dst f\cap}\operatorname{IM}f\subseteq
\operatorname{Im}f$ is obvious. If
$\operatorname{Im}f\subseteq\rsupfun{\Dst f\cap}\operatorname{IM}f$ is also obvious.

The rest follows from symmetry.
\end{proof}

\begin{conjecture}
$\operatorname{Im} f$ may be not a filter for an injective
category with restricted morphisms.
\end{conjecture}

\begin{prop}\label{dst-in-im}
$\Dst f\in\operatorname{Im} f$; $\Src f\in\operatorname{Dom} f$ for every morphism~$f$ of a category with restricted
identities.
\end{prop}

\begin{proof}
Prove $\Dst f\in\operatorname{Im} f$ (the other is similar):
We need to prove that $\mathcal{E}_{\mathcal{C}}^{\Dst f, \Dst f} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f,
\Dst f} \circ f = f$ what follows from
$\mathcal{E}_{\mathcal{C}}^{\Dst f, \Dst f} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f, \Dst f} = 1^{\Dst f}$.
\end{proof}

\begin{prop}
$\operatorname{IM}f$, $\operatorname{Im}f$,
$\operatorname{DOM}f$, $\operatorname{Dom}f$
are upper sets.
\end{prop}

\begin{proof}
For $\operatorname{Im}f$, $\operatorname{Dom}f$ it follows
from the previous proposition.

For $\operatorname{IM}f$, $\operatorname{DOM}f$ it follows
from the thesis for
$\operatorname{Im}f$, $\operatorname{Dom}f$.
\end{proof}

\begin{defn}
~
\begin{enumerate}
\item An ordered category with restricted identities is
\emph{with ordered image} iff $f\sqsubseteq g\Rightarrow
\operatorname{IM}f\subseteq\operatorname{IM}g$.
\item An ordered category with restricted identities is
\emph{with ordered domain} iff $f\sqsubseteq g\Rightarrow
\operatorname{DOM}f\subseteq\operatorname{DOM}g$.
\item An ordered category with restricted identities is
\emph{with ordered domain and image} iff it is both
with ordered domain and with ordered image.
\end{enumerate}
\end{defn}

\begin{obvious}
~
\begin{enumerate}
\item An ordered category with restricted identities is
with ordered image iff $f\sqsubseteq g\Rightarrow
\operatorname{Im}f\subseteq\operatorname{Im}g$.
\item An ordered category with restricted identities is
with ordered domain iff $f\sqsubseteq g\Rightarrow
\operatorname{Dom}f\subseteq\operatorname{Dom}g$.
\item An ordered category with restricted identities is
with ordered domain and image iff it is both
with ordered domain and with ordered image.
\end{enumerate}
\end{obvious}

\begin{obvious}
~
\begin{enumerate}
\item For an ordered category~$\mathcal{C}$ with restricted identities
to be with ordered image it's enough that
$\id^{\mathcal{C}(\Dst f,\Dst f)}_X\circ f=f\land
g\sqsubseteq f\Rightarrow
\id^{\mathcal{C}(\Dst f,\Dst f)}_X\circ g=g$
for every parallel morphisms~$f$ and $g$ and
$\mathfrak{Z}\ni X\sqsubseteq\Dst f$.
\item For an ordered category~$\mathcal{C}$ with restricted identities
to be with ordered domain it's enough that
$f\circ\id^{\mathcal{C}(\Src f,\Src f)}_X=f\land
g\sqsubseteq f\Rightarrow
g\circ\id^{\mathcal{C}(\Src f,\Src f)}_X=g$
for every parallel morphisms~$f$ and $g$ and
$\mathfrak{Z}\ni X\sqsubseteq\Src f$.
\end{enumerate}
\end{obvious}

\begin{conjecture}
There exists a category with restricted identities which
is not with ordered image.
\end{conjecture}

\begin{obvious}
For an ordered category with restricted identities with
ordered domain and image we have
$\iota_{\Src f,\Dst f}\iota_{A,B}f=f\land g\sqsubseteq f
\Rightarrow
\iota_{\Src f,\Dst f}\iota_{A,B}g=g$
for parallel morphisms~$f$ and~$g$.
\end{obvious}

\begin{defn}
~
\begin{enumerate}
\item $\im f = \min\operatorname{Im} f$;
\item $\dom f = \min\operatorname{Dom} f$.
\end{enumerate}
\end{defn}

\begin{note}
It seems that $\im$ and $\dom$ are defined not for every
category with restricted identities.
\end{note}

\begin{prop}
~
\begin{enumerate}
\item $\im f = \min\operatorname{IM} f$;
\item $\dom f = \min\operatorname{DOM} f$.
\end{enumerate}
\end{prop}

\begin{proof}
It follows from $\operatorname{IM}f=\mathscr{S}\operatorname{Im}f$
(and likewise for~$\dom f$).
\end{proof}

\section{Equivalent morphisms}

\begin{prop}\label{two-iotas}
  $\iota_{A, B} \iota_{X, Y} f = \iota_{A, B} f$ for every sets $A$, $B$, $X$,
  $Y$ whenever $\operatorname{DOM} f$ and $\operatorname{IM} f$ are filters and $X \in
  \operatorname{DOM} f$, $Y \in \operatorname{IM} f$.
\end{prop}

\begin{proof}
  $\iota_{A, B} f =\mathcal{E}_{\mathcal{C}}^{\Dst f, B} \circ f \circ
  \mathcal{E}_{\mathcal{C}}^{A, \Src f} = \text{(by definition of
  $\operatorname{IM} f$ and $\operatorname{DOM} f$)} =\mathcal{E}_{\mathcal{C}}^{\Dst f,
  B} \circ \mathcal{E}_{\mathcal{C}}^{Y, \Dst f} \circ
  \mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f \circ
  \mathcal{E}_{\mathcal{C}}^{X, \Src f} \circ
  \mathcal{E}_{\mathcal{C}}^{\Src f, X} \circ
  \mathcal{E}_{\mathcal{C}}^{A, \Src f} =\mathcal{E}_{\mathcal{C}}^{Y,
  B} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f \circ
  \mathcal{E}_{\mathcal{C}}^{X, \Src f} \circ
  \mathcal{E}_{\mathcal{C}}^{A, X} = \iota_{A, B} \iota_{X, Y} f$
  
  because $\mathcal{E}^{\Dst f, B} \circ \mathcal{E}^{Y, \Dst f}
  \circ \mathcal{E}^{\Dst f, Y} = \id^{\mathcal{C}(\Dst f, B)}_{Y \sqcap
  \Dst f \sqcap B} = \id^{\mathcal{C}(Y, B)}_{Y \sqcap B} \circ \id^{\mathcal{C}(\Dst f,Y)}_{Y \sqcap \Dst f} = \mathcal{E}^{Y, B} \circ
  \mathcal{E}^{\Dst f, Y}$ and thus
  $\mathcal{E}_{\mathcal{C}}^{\Dst f, B} \circ
  \mathcal{E}_{\mathcal{C}}^{Y, \Dst f} \circ
  \mathcal{E}_{\mathcal{C}}^{\Dst f, Y} =\mathcal{E}_{\mathcal{C}}^{Y,
  B} \circ \mathcal{E}_{\mathcal{C}}^{\Dst f, Y}$ and similarly for
  $\mathcal{E}_{\mathcal{C}}^{X, \Src f} \circ
  \mathcal{E}_{\mathcal{C}}^{\Src f, X} \circ
  \mathcal{E}_{\mathcal{C}}^{A, \Src f}$.
\end{proof}

\begin{defn}
I call two morphisms $f\in\mathcal{C}(A_0,B_0)$ and
$g\in\mathcal{C}(A_1,B_1)$
of a category with restricted morphisms \emph{equivalent}
(and denote $f\sim g$) when
\[\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g.\]
\end{defn}

\begin{prop}
$f\sim g$~iff $\iota_{A,B}f=\iota_{A,B}g$ for
some~$A\in\operatorname{DOM}f\cap\operatorname{DOM}g$,~$B\in\operatorname{IM}f\cap\operatorname{IM}g$.
\end{prop}

\begin{proof}
Both
\[\iota_{A,B}f=\iota_{A,B}g\Rightarrow
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g\]
and
\[\iota_{A,B}f=\iota_{A,B}g\Leftarrow
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g\]
follow from proposition~\ref{two-iotas}.
\end{proof}

\begin{thm}\label{uf-sim-cond}
Let
$f:A_0\to B_0$~and~$g:A_1\to B_1$
(for a partially ordered category with restricted identities).
The following are pairwise equivalent:
\begin{enumerate}
\item\label{uf-sim-cond-sim} $f\sim g$;
\item\label{uf-sim-cond-eq} $\iota_{A_1,B_1}f=g$ and $\iota_{A_0,B_0}g=f$;
\item\label{uf-sim-cond-sb} $\iota_{A_1,B_1}f\sqsupseteq g$ and $\iota_{A_0,B_0}g\sqsupseteq f$.
\end{enumerate}
\end{thm}

\begin{proof}
~
\begin{description}
\item[\ref{uf-sim-cond-sim}$\Rightarrow$\ref{uf-sim-cond-eq}]
$\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g$;
$\iota_{A_1,B_1}\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_1,B_1}\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g$;
$\iota_{A_1,B_1}f=\iota_{A_1,B_1}g$;
$\iota_{A_1,B_1}f=g$. $\iota_{A_0,B_0}g=f$ is similar.

\item[\ref{uf-sim-cond-sb}$\Rightarrow$\ref{uf-sim-cond-sim}]
Let $\iota_{A_1, B_1} f \sqsupseteq g$ and $\iota_{A_0, B_0} g \sqsupseteq f$.

$\iota_{A_1, B_1} \iota_{A_0, B_0} g \sqsupseteq g$;

$\mathcal{E}^{B_0, B_1} \circ \mathcal{E}^{B_1, B_0} \circ g \circ
\mathcal{E}^{A_0, A_1} \circ \mathcal{E}^{A_1, A_0}\sqsupseteq g$;

$\id^{\mathcal{C} (B_1, B_1)}_{B_0 \sqcap B_1} \circ g \circ
\id^{\mathcal{C} (A_1, A_1)}_{A_0 \sqcap A_1} \sqsupseteq g$;
$\id^{\mathcal{C} (B_1, B_1)}_{B_0 \sqcap B_1} \circ g \sqsupseteq g$;
$\id^{\mathcal{C} (B_1, B_1)}_{B_0 \sqcap B_1} \circ g = g$;

$\id^{\mathcal{C} (B_0 \sqcap B_1, B_1)}_{B_0 \sqcap B_1} \circ
\id^{\mathcal{C} (B_1, B_0 \sqcap B_1)}_{B_0 \sqcap B_1} \circ g = g$;
$\mathcal{E}^{B_0 \sqcap B_1, B_1} \circ \mathcal{E}^{B_1, B_0 \sqcap B_1}
\circ g = g$. Thus $B_0 \sqcap B_1 \in \operatorname{Im} g$. Similarly $A_0 \sqcap A_1
\in \operatorname{Dom} g$.

So $\iota_{A_0 \sqcup A_1, B_0 \sqcup B_1} f = \iota_{A_0 \sqcup A_1, B_0
\sqcup B_1} \iota_{A_0, B_0} g = \iota_{A_0 \sqcup A_1, B_0 \sqcup B_1} g$.

\item[\ref{uf-sim-cond-eq}$\Rightarrow$\ref{uf-sim-cond-sb}]
Obvious.
\end{description}
\end{proof}

\begin{prop}
Above defined equivalence of morphisms (for a small category)
is an equivalence relation.
\end{prop}

\begin{proof}
~
\begin{description}
\item[Reflexivity] Obvious.

\item[Symmetry] Obvious.

\item[Transitivity] Let $f\sim g$ and $g\sim h$ for
$f:A_0\to B_0$, $g:A_1\to B_1$, $h:A_2\to B_2$.
Then
$\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g$ and
$\iota_{A_1\sqcup A_2,B_1\sqcup B_2}g=\iota_{A_1\sqcup A_2,B_1\sqcup B_2}h$.

Thus
\[\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}\iota_{A_0\sqcup A_1,B_0\sqcup B_1}g\] and
\[\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}\iota_{A_1\sqcup A_2,B_1\sqcup B_2}g=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}\iota_{A_1\sqcup A_2,B_1\sqcup B_2}h\]
that is (proposition~\ref{two-iotas})
\[\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}f=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}g\]
and
\[\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}g=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}h.\]
Combining,
$\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}f=\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}h$ and thus
\[\iota_{A_0\sqcup A_2,B_0\sqcup B_2}\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}f=\iota_{A_0\sqcup A_2,B_0\sqcup B_2}\iota_{A_0\sqcup A_1\sqcup A_2,B_0\sqcup B_1\sqcup B_2}h;\]
(again proposition~\ref{two-iotas}) $\iota_{A_0\sqcup A_2,B_0\sqcup B_2}f=\iota_{A_0\sqcup A_2,B_0\sqcup B_2}h$
that is $f\sim h$.
\end{description}
\end{proof}

\begin{prop}
$[f] = \setcond{\iota_{A,B}f}{
A\in\operatorname{DOM}f,B\in\operatorname{IM}f}$.
\end{prop}

\begin{proof}
If~$A\in\operatorname{DOM}f$,~$B\in\operatorname{IM}f$
then
\[\iota_{A\sqcup\Src f,B\sqcup\Dst f}\iota_{A,B}f =
\iota_{A\sqcup\Src f,B\sqcup\Dst f}f.\] Thus
$\iota_{A,B}f\sim f$ that is $\iota_{A,B}f\in[f]$.

Let now $g\in[f]$ that is $f\sim g$;
\[\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}f=
\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}g.\]
Take $A=\Src g$, $B=\Dst g$. We have
\begin{gather*}
\iota_{A,B}\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}f=
\iota_{A,B}\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}g;\\
\iota_{A,B}f=\iota_{A,B}g = g.
\end{gather*}
\end{proof}

\begin{prop}
~
\begin{enumerate}
\item $\operatorname{IM} f = \setcond{Y \in \mathfrak{Z}}{
  \mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f \sim f}$;
\item $\operatorname{DOM} f = \setcond{X \in \mathfrak{Z}}{
  f\circ\mathcal{E}_{\mathcal{C}}^{X, \Src f} \sim f}$.
\end{enumerate}
\end{prop}

\begin{proof}
~
\begin{multline*}
\mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f \sim f
\Leftrightarrow
\iota_{\Src f,Y\sqcup\Dst f}
(\mathcal{E}_{\mathcal{C}}^{\Dst f, Y} \circ f) =
\iota_{\Src f,Y\sqcup\Dst f}f \Leftrightarrow \\
\mathcal{E}^{Y,Y\sqcup\Dst f}\circ\mathcal{E}^{\Dst f, Y} \circ f \circ \mathcal{E}^{\Src f,\Src f} =
\mathcal{E}^{\Dst f,Y\sqcup\Dst f}\circ f\circ\mathcal{E}^{\Src f,\Src f} \Leftrightarrow \\
\mathcal{E}^{Y,Y\sqcup\Dst f}\circ\mathcal{E}^{\Dst f, Y}\circ f=\mathcal{E}^{\Dst f,Y\sqcup\Dst f}\circ f
\Leftrightarrow \text{(proposition~\ref{e-mono-epi})} \\ \Leftrightarrow
\mathcal{E}^{Y\sqcup\Dst f,\Dst f}\circ \mathcal{E}^{Y,Y\sqcup\Dst f}\circ\mathcal{E}^{\Dst f, Y}\circ f=\mathcal{E}^{Y\sqcup\Dst f,\Dst f}\circ \mathcal{E}^{\Dst f,Y\sqcup\Dst f}\circ f \Leftrightarrow \\
\mathcal{E}^{Y,\Dst f}\circ\mathcal{E}^{\Dst f,Y}\circ f = f.
\end{multline*}
From this our thesis follows obviously.
\end{proof}

\begin{prop}\label{iota-less}
$\iota_{A_1,B_1}\iota_{A_0,B_0}f\sqsubseteq\iota_{A_1,B_1}f$.
\end{prop}

\begin{proof}
$\iota_{A_1,B_1}\iota_{A_0,B_0}f=
\mathcal{E}^{B_0,B_1}\circ\mathcal{E}^{\Dst f,B_0}\circ f\circ
\mathcal{E}^{A_0,\Src f}\circ\mathcal{E}^{A_1,A_0}=
\id^{\mathcal{C}(B_0,B_1)}_{B_0\sqcap B_1}\circ\id^{\mathcal{C}(\Dst f,B_0)}_{\Dst f\sqcap B_0}
\circ f\circ
\id^{\mathcal{C}(A_0,\Src f)}_{A_0\sqcap\Src f}\circ
\id^{\mathcal{C}(A_1,A_0)}_{A_1\sqcap A_0}=
\id^{\mathcal{C}(\Dst f,B_1)}_{\Dst f\sqcap B_0\sqcap B_1}
\circ f\circ
\id^{\mathcal{C}(A_1,\Src f)}_{A_0\sqcap A_1\sqcap\Src f}
\sqsubseteq
\id^{\mathcal{C}(\Dst f,B_1)}_{\Dst f\sqcap B_1}
\circ f\circ
\id^{\mathcal{C}(A_1,\Src f)}_{A_1\sqcap\Src f}=
\iota_{A_1,B_1}f$.
\end{proof}

\section{Binary product}

\begin{defn}
The category \emph{with binary product morphism}
is a category with restricted identities and additional axioms
\begin{enumerate}
\item $\id^{\mathcal{C}(B,B)}_Y\circ f\circ\id^{\mathcal{C}(A,A)}_X=f\sqcap(X\times_{A,B}Y)$
(holding for every $A,B\in\mathfrak{Z}$,
$\mathfrak{A}\ni X\sqsubseteq A$,
$\mathfrak{A}\ni Y\sqsubseteq B$,
$X\times_{A,B}Y\in\mathcal{C}(A,B)$
and morphism~$f\in\mathcal{C}(A,B)$);
\item $\iota_{A_1,B_1}(X\times_{A_0,B_0}Y)=
X\times_{A_1,B_1}Y$ whenever
$X\sqsubseteq A_0\sqcap A_1$ and $Y\sqsubseteq B_0\sqcap B_1$.
\end{enumerate}
\end{defn}

\begin{prop}
$A\times_{A,B}B$ is the greatest morphism
$\top^{\mathcal{C}(A,B)}:A\to B$.
\end{prop}

\begin{proof}
It's enough to prove $f\sqcap(A\times_{A,B}B)=f$ for every
$f:A\to B$. Really,
$f\sqcap(A\times_{A,B}B)=
\id^{\mathcal{C}(B,B)}_B\circ f\circ\id^{\mathcal{C}(A,A)}_A=
1^B\circ f\circ 1^A=f$.
\end{proof}

\begin{prop}
For every category with binary product morphism
\[X\times_{A,B}Y=
\id^{\mathcal{C}(B,B)}_Y\circ\top^{\mathcal{C}(A,B)}\circ
\id^{\mathcal{C}(A,A)}_X\]
\end{prop}

\begin{proof}
$X\times_{A,B}Y\sqsupseteq
\id^{\mathcal{C}(B,B)}_Y\circ\top^{\mathcal{C}(A,B)}\circ\id^{\mathcal{C}(A,A)}_X$
because
$\id^{\mathcal{C}(B,B)}_Y\circ\top^{\mathcal{C}(A,B)}\circ\id^{\mathcal{C}(A,A)}_X=
\top^{\mathcal{C}(A,B)}\sqcap(X\times_{A,B}Y)$.

$\id^{\mathcal{C}(B,B)}_Y\circ\top^{\mathcal{C}(A,B)}\circ\id^{\mathcal{C}(A,A)}_X\sqsupseteq
\id^{\mathcal{C}(B,B)}_Y\circ(X\times_{A,B}Y)\circ
\id^{\mathcal{C}(A,A)}_X=
(X\times_{A,B}Y)\sqcap(X\times_{A,B}Y)=X\times_{A,B}Y$.
\end{proof}

\begin{prop}
$\iota_{A,B}(f\sqcap g)=\iota_{A,B}f\sqcap\iota_{A,B}g$
for every parallel morphisms~$f$ and~$g$ and objects~$A$
and~$B$, whenever all $\mathcal{E}^{X,Y}$ are metamonovalued
and metainjective.
\end{prop}

\begin{proof}
$\iota_{A,B}(f\sqcap g)=
\mathcal{E}^{\Dst f,B}\circ(f\sqcap g)\circ
\mathcal{E}^{A,\Src f}=
(\mathcal{E}^{\Dst f,B}\circ f\circ\mathcal{E}^{A,\Src f})\sqcap
(\mathcal{E}^{\Dst f,B}\circ g\circ\mathcal{E}^{A,\Src f})=
\iota_{A,B}f\sqcap\iota_{A,B}g$.
\end{proof}

\begin{prop}
$(X_0\times_{A,B}Y_0)\sqcap(X_1\times_{A,B}Y_1)=
(X_0\sqcap X_1)\times_{A,B}(Y_0\sqcap Y_1)$.
\end{prop}

\begin{proof}
$(X_0\times_{A,B}Y_0)\sqcap(X_1\times_{A,B}Y_1)=
\id^{\mathcal{C}(B,B)}_{Y_1}\circ(X_0\times_{A,B}Y_0)\circ
\id^{\mathcal{C}(A,A)}_{X_1}=
\id^{\mathcal{C}(B,B)}_{Y_1}\circ
\id^{\mathcal{C}(B,B)}_{Y_0}\circ
\top^{\mathcal{C}(A,B)}\circ
\id^{\mathcal{C}(A,A)}_{X_1}\circ
\id^{\mathcal{C}(A,A)}_{X_0}=
\id^{\mathcal{C}(B,B)}_{Y_0\sqcap Y_1}\circ
\top^{\mathcal{C}(A,B)}\circ
\id^{\mathcal{C}(A,A)}_{X_0\sqcap X_1}=
(X_0\sqcap X_1)\times_{A,B}(Y_0\sqcap Y_1)$.
\end{proof}

\begin{prop}
For a category with binary product morphism
$\operatorname{Im}f$, $\operatorname{Dom}f$,
$\operatorname{IM}f$, and $\operatorname{DOM}f$
are filters.
\end{prop}

\begin{proof}
That they are upper sets was proved above.

To prove that $\operatorname{Im} f$ is a filter it remains
to show $A, B \in \operatorname{Im} f \Leftrightarrow
A \sqcap B \in \operatorname{Im} f$. Really,
$A, B \in \operatorname{Im} f \Leftrightarrow \top \times A \sqsupseteq f \land \top
\times B \sqsupseteq f \Rightarrow \top \times (A \sqcap B) \sqsupseteq f
\Leftrightarrow A \sqcap B \in \operatorname{Im} f$.

$\operatorname{Dom} f$ is similar.

The thesis for~$\operatorname{IM}f$,~$\operatorname{DOM}f$
follows from above proved
for~$\operatorname{Im}f$,~$\operatorname{Dom}f$.
\end{proof}

\begin{note}
For example for below defined category of funcoids
(with binary product morphism), these filters are filters
on filters on sets not filters of sets and thus are not
the same as~$\im$ and~$\dom$.
\end{note}

\section{Operations on the set of unfixed morphisms}

\subsection{Semigroup of unfixed morphisms}

\begin{defn}
We will turn the category~$\mathcal{C}$ into a semigroup
$\mathcal{U}\mathcal{C}$
(\emph{the semigroup of unfixed morphisms}) by
the formula $[g]\circ[f] = [g\circ f]$ whenever~$f$ and~$g$
are composable morphisms.
\end{defn}

We need to prove that $[g]\circ[f]$ does not depend on
choice of~$f$ and~$g$ (provided that~$f$ and~$g$
are composable). We also need to prove that $[g]\circ[f]$
is always defined for every morphisms (not necessarily
composable)~$f$ and~$g$. That the resulting structure is
a semigroup (that is,~$\circ$ is associative) is then
obvious.

\begin{proof}
That $[g]\circ[f]$ is defined in at least one way for every
morphisms~$f$ and~$g$ is simple to prove. Just consider the
morphisms
$f'=\iota_{\Src f,\Dst f\sqcup\Src g}f\sim f$ and
$g'=\iota_{\Dst f\sqcup\Src g,\Dst g}g\sim g$.
Then we can take $[g]\circ[f]=[g'\circ f']$.

It remains to prove that $[g]\circ[f]$ does not depend on
choice of~$f$ and~$g$. Really, take arbitrary composable
pairs of morphisms $(f_0:A_0\to B_0,g_0:B_0\to C_0)$ and
$(f_1:A_1\to B_1,g_1:B_1\to C_1)$ such that
$f_0\sim f_1$ and $g_0\sim g_1$. It remains to prove that
$g_0\circ f_0\sim g_1\circ f_1$.
We have
\begin{multline*}
\iota_{B_0\sqcup B_1,C_0\sqcup C_1}g_0 \circ
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f_0
= \text{(proposition~\ref{iota-comp})} = \\
\mathcal{E}_{\mathcal{C}}^{C_0,C_0\sqcup C_1}\circ g_0 \circ
f_0\circ\mathcal{E}_{\mathcal{C}}^{A_0\sqcup A_1,B_0} =
\iota_{A_0\sqcup A_1,C_0\sqcup C_1}(g_0\circ f_0).
\end{multline*}
Similarly
\[\iota_{B_0\sqcup B_1,C_0\sqcup C_1}g_1 \circ
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f_1 =
\iota_{A_0\sqcup A_1,C_0\sqcup C_1}(g_1\circ f_1).\]

But
\[\iota_{B_0\sqcup B_1,C_0\sqcup C_1}g_0 \circ
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f_0 =
\iota_{B_0\sqcup B_1,C_0\sqcup C_1}g_1 \circ
\iota_{A_0\sqcup A_1,B_0\sqcup B_1}f_1\]
thus having
$\iota_{A_0\sqcup A_1,C_0\sqcup C_1}(g_0\circ f_0) =
\iota_{A_0\sqcup A_1,C_0\sqcup C_1}(g_1\circ f_1)$ and so
$g_0\circ f_0\sim g_1\circ f_1$.
\end{proof}

\subsection{Restricted identities}

\begin{defn}
\emph{Restricted identity} for unfixed morphisms is
defined as: $\id_X = [\id^{\mathcal{C}(A,B)}_X]$ for
an $X\sqsubseteq A\sqcap B$.
\end{defn}

We need to prove that it does not depend on the choice
of~$A$ and~$B$.

\begin{proof}
Let $\mathfrak{A}\ni X\sqsubseteq A_0\sqcap B_0$ and
$\mathfrak{A}\ni X\sqsubseteq A_1\sqcap B_1$ for
$A_0,B_0,A_1,B_1\in\mathfrak{Z}$. We need to prove
$\id^{\mathcal{C}(A_0,B_0)}_X\sim
\id^{\mathcal{C}(A_1,B_1)}_X$.

Really, $\iota_{A_1,B_1}\id^{\mathcal{C}(A_0,B_0)}_X =
\mathcal{E}^{B_0,B_1}\circ\id^{\mathcal{C}(A_0,B_0)}_X
\circ \mathcal{E}^{A_1,A_0} =
\id^{\mathcal{C}(B_0,B_1)}_{B_0\sqcap B_1}\circ
\id^{\mathcal{C}(A_0,B_0)}_X\circ
\id^{\mathcal{C}(A_1,A_0)}_{A_0\sqcap A_1} =
\id^{\mathcal{C}(A_1,B_1)}_{A_0\sqcap A_1\sqcap B_0\sqcap B_1\sqcap X} =
\id^{\mathcal{C}(A_1,B_1)}_X$.
Similarly
$\iota_{A_0,B_0}\id^{\mathcal{C}(A_1,B_1)}_X =
\id^{\mathcal{C}(A_0,B_0)}_X$.

So $\id^{\mathcal{C}(A_0,B_0)}_X\sim
\id^{\mathcal{C}(A_1,B_1)}_X$.
\end{proof}

\begin{prop}
$\id_Y\circ\id_X=\id_{X\sqcap Y}$ for
every~$X,Y\in\mathcal{A}$.
\end{prop}

\begin{proof}
Take arbitrary $\id^{\mathcal{C}(A,B_0)}_X\in\id_X$ and
$\id^{\mathcal{C}(B_1,C)}_Y\in\id_Y$.

Obviously,
$\id^{\mathcal{C}(A,B_0\sqcup B_1)}_X\in\id_X$ and
$\id^{\mathcal{C}(B_0\sqcup B_1,C)}_Y\in\id_Y$.
Thus
$\id_Y\circ\id_X=
[\id^{\mathcal{C}(B_0\sqcup B_1,C)}_Y]\circ
[\id^{\mathcal{C}(A,B_0\sqcup B_1)}_X]=
[\id^{\mathcal{C}(A,C)}_{X\sqcap Y}]=
\id_{X\sqcap Y}$.
\end{proof}

\subsection{Poset of unfixed morphisms}

\begin{lem}
$f\sqsubseteq g\Rightarrow
\iota_{A,B}f\sqsubseteq\iota_{A,B}g$ for every
morphisms~$f$ and~$g$ such that
$\Src f=\Src g$ and $\Dst f=\Dst g$.
\end{lem}

\begin{proof}
$\iota_{A,B}f\sqsubseteq\iota_{A,B}g \Leftrightarrow
\mathcal{E}^{\Dst f,B}\circ f\circ\mathcal{E}^{A,\Src f}
\sqsubseteq
\mathcal{E}^{\Dst g,B}\circ g\circ\mathcal{E}^{A,\Src g}
\Leftrightarrow
\id^{\mathcal{C}(\Dst f,B)}_{B\sqcap\Dst f}\circ f\circ\id^{\mathcal{C}(A,\Src f)}_{A\sqcap\Src f}
\sqsubseteq
\id^{\mathcal{C}(\Dst g,B)}_{B\sqcap\Dst g}\circ g\circ\id^{\mathcal{C}(A,\Src g)}_{A\sqcap\Src g}
\Leftarrow f\sqsubseteq g$ because
$\id^{\mathcal{C}(\Dst f,B)}_{B\sqcap\Dst f}=
\id^{\mathcal{C}(\Dst g,B)}_{B\sqcap\Dst g}$ and
$\id^{\mathcal{C}(A,\Src f)}_{A\sqcap\Src f}=
\id^{\mathcal{C}(A,\Src g)}_{A\sqcap\Src g}$.
\end{proof}

\begin{cor}\label{unxif-org-cong}
~
\begin{enumerate}
\item\label{unxif-org-cong-impl}
$f_0\sqsubseteq g_0\land f_0\sim f_1\land g_0\sim g_1
\Rightarrow f_1\sqsubseteq g_1$ whenever
$\Src f_0=\Src g_0$ and $\Dst f_0=\Dst g_0$ and
$\Src f_1=\Src g_1$ and $\Dst f_1=\Dst g_1$.
\item\label{unxif-org-cong-eq}
$f_0\sqsubseteq g_0\Leftrightarrow f_1\sqsubseteq g_1$ whenever
$\Src f_0=\Src g_0$ and $\Dst f_0=\Dst g_0$ and
$\Src f_1=\Src g_1$ and $\Dst f_1=\Dst g_1$ and
$f_0\sim f_1\land g_0\sim g_1$.
\end{enumerate}
\end{cor}

\begin{proof}
~
\begin{disorder}
\item[\ref{unxif-org-cong-impl}] Because
$f_1=\iota_{\Src f_1,\Dst f_1}f_0$ and
$g_1=\iota_{\Src g_1,\Dst g_1}f_0$.
\item[\ref{unxif-org-cong-eq}] A consequence of the
previous.
\end{disorder}
\end{proof}

The above corollary warrants validity of the following
definition:

\begin{defn}
The order on the set of unfixed morphisms is defined
by the formula
$[f]\sqsubseteq[g]\Leftrightarrow f\sqsubseteq g$
whenever $\Src f=\Src g\land\Dst f=\Dst g$.
\end{defn}

It is really an order:

\begin{proof}
~
\begin{description}
\item[Reflexivity] Obvious.
\item[Transitivity] Obvious.
\item[Antisymmetry] Let $[f]\sqsubseteq[g]$ and
$[g]\sqsubseteq[f]$ and $\Src f=\Src g\land\Dst f=\Dst g$.
Then $f\sqsubseteq g$ and $g\sqsubseteq f$ and thus
$f=g$ so having $[f]=[g]$.
\end{description}
\end{proof}

\begin{obvious}\label{unfix-mor-emb}
$f\mapsto[f]$ is an order embedding from the set
$\mathcal{C}(A,B)$ to unfixed morphisms, for every
objects~$A$,~$B$.
\end{obvious}

\begin{prop}\label{cmpl-lat-par}
If $S$ is a set of parallel morphisms of a partially ordered
category with an equivalence relation respecting the order, then
\begin{enumerate}
\item\label{cmpl-lat-par-cap}
$\bigsqcap_{X\in S}[X]$ exists and 
$\bigsqcap_{X\in S}[X]=[\bigsqcap S]$;

\item\label{cmpl-lat-par-cup}
$\bigsqcup_{X\in S}[X]$ exists and 
$\bigsqcup_{X\in S}[X]=[\bigsqcup S]$.
\end{enumerate}
\end{prop}

\begin{proof}
~
\begin{widedisorder}
\item[\ref{cmpl-lat-par-cap}]
$[\bigsqcap S]\sqsubseteq[X]$ for every~$X\in S$ because
$\bigsqcap S\sqsubseteq X$.

Let now $L\sqsubseteq[X]$ for every~$X\in S$ for an
equivalence class~$L$. Then $L\sqsubseteq[\bigsqcap S]$
because $l\sqsubseteq\bigsqcap S$ for~$l\in L$ because
$l\sqsubseteq X$ for every~$X\in S$.

Thus $[\bigsqcap S]$ is the greatest lower bound of
$\setcond{[X]}{X\in S}$.

\item[\ref{cmpl-lat-par-cup}] By duality.
\end{widedisorder}
\end{proof}

\begin{prop}
~
\begin{enumerate}
\item If every $\Hom$-set is a join-semilattice, then
the poset of unfixed morphism is a join-semilattice.
\item If every $\Hom$-set is a join-semilattice, then
the poset of unfixed morphism is a meet-semilattice.
\end{enumerate}
\end{prop}

\begin{proof}
Let~$f$ and~$g$ be arbitrary morphisms.
\begin{multline*}
[f]\sqcup[g] =
[\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}f]\sqcup
[\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}g] = \\
\text{(obvious~\ref{unfix-mor-emb})} =
[\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}f\sqcup
\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}g]
\end{multline*}
and
\begin{multline*}
[f]\sqcap[g] =
[\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}f]\sqcap
[\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}g] = \\
\text{(obvious~\ref{unfix-mor-emb})} =
[\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}f\sqcap
\iota_{\Src f\sqcup\Src g,\Dst f\sqcup\Dst g}g].
\end{multline*}
\end{proof}

\begin{cor}
If every $\Hom$-set is a lattice, then
the poset of unfixed morphisms is a lattice.
\end{cor}

\begin{thm}
Meet of nonempty set of unfixed morphisms
exists provided that the orders of $\Hom$-sets are
posets, every nonempty subset of which has a meet, and
our category is with ordered domain
and image and that morphisms~$\mathcal{E}$ are metamonovalued
and metainjective.
\end{thm}

\begin{proof}
Let~$S$ be a nonempty set of unfixed morphisms. Take
an arbitrary unfixed morphism~$f\in S$. Take an
arbitrary $F\in f$. Let $A=\Src F$ and $B=\Dst F$.

$\bigsqcap S=\bigsqcap\rsupfun{f\sqcap}S=
\bigsqcap\rsupfun{[F]\sqcap}S=
\bigsqcap\setcond{[F]\sqcap[G]}{g\in S,G\in g}=
\bigsqcap\setcond{[\iota_{A\sqcup\Src G,B\sqcup\Dst G}F\sqcap\iota_{A\sqcup\Src G,B\sqcup\Dst G}G]}{g\in S,G\in g}$

We will prove
$\iota_{A\sqcup\Src G,B\sqcup\Dst G}F\sqcap\iota_{A\sqcup\Src G,B\sqcup\Dst G}G \sim F\sqcap\iota_{A,B}G$.

$\iota_{A\sqcup\Src G,B\sqcup\Dst G}F\sqcap\iota_{A\sqcup\Src G,B\sqcup\Dst G}G\sqsubseteq
\iota_{A\sqcup\Src G,B\sqcup\Dst G}F$ and
$\iota_{A\sqcup\Src G,B\sqcup\Dst G}\iota_{A,B}\iota_{A\sqcup\Src G,B\sqcup\Dst G}F=
\iota_{A\sqcup\Src G,B\sqcup\Dst G}F$, thus by
being with ordered domain and image
\begin{multline*}
\iota_{A\sqcup\Src G,B\sqcup\Dst G}F\sqcap\iota_{A\sqcup\Src G,B\sqcup\Dst G}G = \\
\iota_{A\sqcup\Src G,B\sqcup\Dst G}\iota_{A,B}(\iota_{A\sqcup\Src G,B\sqcup\Dst G}F\sqcap\iota_{A\sqcup\Src G,B\sqcup\Dst G}G) = \\
\text{(by being metamonovalued and metainjective)} = \\
\iota_{A\sqcup\Src G,B\sqcup\Dst G}(
\iota_{A,B}\iota_{A\sqcup\Src G,B\sqcup\Dst G}F\sqcap
\iota_{A,B}\iota_{A\sqcup\Src G,B\sqcup\Dst G}G) = \\
\iota_{A\sqcup\Src G,B\sqcup\Dst G}(
\iota_{A,B}F\sqcap\iota_{A,B}G) \sim
\iota_{A,B}F\sqcap\iota_{A,B}G=
F\sqcap\iota_{A,B}G.
\end{multline*}

Due the proved equivalence we have
$\bigsqcap S=
\bigsqcap\setcond{[F\sqcap\iota_{A,B}G]}{g\in S,G\in g}$.
Now we can apply proposition~\ref{cmpl-lat-par}:
$\bigsqcap S=
\left[\bigsqcap\setcond{F\sqcap\iota_{A,B}G}{g\in S,G\in g}\right]$. We have provided an explicit formula
for~$\bigsqcap S$.
\end{proof}

The poset of unfixed morphisms may be not a complete
lattice even if every $\Hom$-set is a complete lattice.
We will show this below for funcoids.

\subsection{Domain and image of unfixed morphisms}

\begin{prop}
$\operatorname{IM}f=
\setcond{Y\in\mathfrak{Z}}{\id_Y\circ[f]=[f]}$;
$\operatorname{DOM}f=
\setcond{X\in\mathfrak{Z}}{[f]\circ\id_X=[f]}$.
\end{prop}

\begin{proof}
We will prove only the first, as the second is similar.
$\id_Y\circ[f]=[f]\Leftrightarrow
\id^{\mathcal{C}(Y\sqcup\Dst f,Y\sqcup\Dst f)}_{Y}\circ
\mathcal{E}^{\Dst f,Y\sqcup\Dst f}\circ f=
\mathcal{E}^{\Dst f,Y\sqcup\Dst f}\circ f\Leftrightarrow
\id^{\mathcal{C}(\Dst f,Y\sqcup\Dst f)}_{Y\sqcap\Dst f}
\circ f=\mathcal{E}^{\Dst f,Y\sqcup\Dst f}
\circ f\Leftrightarrow
\mathcal{E}^{Y\sqcup\Dst f,\Dst f}
\circ \id^{\mathcal{C}(\Dst f,Y\sqcup\Dst f)}_{Y\sqcap\Dst f}
\circ f=f\Leftrightarrow
\id^{\mathcal{C}(\Dst f,\Dst f)}_{Y\sqcap\Dst f}\circ f=f
Y\in\operatorname{IM}f$.
\end{proof}

The above proposition allows to define:

\begin{defn}
$\operatorname{DOM}f=\operatorname{DOM}F$ and
$\operatorname{IM}f=\operatorname{IM}F$
for $F\in f$.
\end{defn}

\subsection{Rectangular restriction}

\begin{prop}
$\iota_{A,B}f=\iota_{A,B}g$ if $f\sim g$.
\end{prop}

\begin{proof}
Let $f\sim g$. Then $g=\iota_{\Src g,\Dst g}f$.
So $\iota_{A,B}g=\iota_{A,B}\iota_{\Src g,\Dst g}f
\sqsubseteq\text{(proposition~\ref{iota-less})}\sqsubseteq
\iota_{A,B}f$. Similarly,
$\iota_{A,B}f\sqsubseteq\iota_{A,B}g$. So
$\iota_{A,B}f=\iota_{A,B}g$.
\end{proof}

The above proposition allows to define:

\begin{defn}
$\iota_{A,B}F=\iota_{A,B}f$ for
an unfixed morphism~$F$ and arbitrary $f\in F$.
\end{defn}

\begin{defn}
$F\square_{A,B}=[\iota_{A,B}F]$ for every unfixed
morphism~$F$.
\end{defn}

\begin{prop}
$F\square_{A,B}=\id_B\circ F\circ\id_A$ for every
unfixed morphism~$F$ and objects~$A$ and~$B$.
\end{prop}

\begin{proof}
Take $f\in F$.
$F\square_{A,B}=[\iota_{A,B}F]=[\iota_{A,B}f]=
[\mathcal{E}^{\Dst f,B}\circ f\circ\mathcal{E}^{A,\Src f}]=
[\id^{\mathcal{C}(\Dst f,B)}_{B\sqcap\Dst f}\circ f\circ
\id^{\mathcal{C}(A,\Src f)}_{A\sqcap\Src f}]=
[\id^{\mathcal{C}(\Dst f,B)}_{B}\circ
\id^{\mathcal{C}(\Dst f,\Dst f)}_{\Dst f}\circ
f\circ
\id^{\mathcal{C}(\Src f,\Src f)}_{\Src f}\circ
\id^{\mathcal{C}(A,\Src f)}_{A}]=
[\id^{\mathcal{C}(\Dst f,B)}_{B}\circ f\circ
\id^{\mathcal{C}(A,\Src f)}_{A}]=
[\id^{\mathcal{C}(\Dst f,B)}_{B}]\circ [f]\circ
[\id^{\mathcal{C}(A,\Src f)}_{A}]=
\id_B\circ F\circ\id_A$.
\end{proof}

\begin{prop}
$f\square_{A_0,B_0}\square_{A_1,B_1}=
f\square_{A_0\sqcap A_1,A_1\sqcap B_1}$.
\end{prop}

\begin{proof}
From the previous
$f\square_{A_0,B_0}\square_{A_1,B_1}=
\id_{B_1}\circ\id_{B_0}\circ f\circ\id_{A_0}\circ\id_{A_1}=
\id_{B_0\sqcap B_1}\circ f\circ\id_{A_0\sqcap A_1}=
f\square_{A_0\sqcap A_1,A_1\sqcap B_1}$.
\end{proof}

\begin{defn}
$f|_X=f\circ\id_X$ for every unfixed morphism~$f$ and
$X\in\mathfrak{A}$.
\end{defn}

\begin{obvious}
$(f|_X)|_Y=f_{X\sqcap Y}$.
\end{obvious}

\subsection{Algebraic properties of the lattice of unfixed
morphisms}

The following proposition allows to easily prove algebraic
properties (cf. distributivity) of the poset of unfixed morphisms:

\begin{thm}\label{unfix-fix-bij}
The following are mutually inverse bijections:
\begin{enumerate}
\item\label{unfix-fix-bij-sd} Let~$A$ and~$B$ be objects. $f\mapsto[f]$ and $F\mapsto\iota_{A,B}F$
are mutually inverse order isomorphisms between
$\setcond{f\in\text{unfixed morphisms}}{A\in\operatorname{DOM}f,B\in\operatorname{IM}f}$
and~$\mathcal{C}(A,B)$.
If $A=B$ they are also semigroup isomorphisms.
\item\label{unfix-fix-bij-d} Let~$T$ be an unfixed morphism. $f\mapsto[f]$ and $F\mapsto\iota_{\Src t,\Dst t}F$ are mutually inverse order isomorphisms
between the lattice~$DT$ and $Dt$ whenever~$t\in T$.
\end{enumerate}
\end{thm}

\begin{proof}
We will prove that these functions are mutually inverse
bijections. That they are order-preserving is obvious.
\begin{widedisorder}
\item[\ref{unfix-fix-bij-sd}]
$\iota_{A,B}F\in\mathcal{C}(A,B)$ is obvious.

We need to prove that
$[f]\in\setcond{f\in\text{unfixed morphisms}}{A\in\operatorname{DOM}f,B\in\operatorname{IM}f}$.
For this it's enough to prove
$A\in\operatorname{DOM}[f]\land B\in\operatorname{IM}[f]$
what is the same as
$A\in\operatorname{DOM}f\land B\in\operatorname{IM}f$
what follows from proposition~\ref{dst-in-im}.

Because $f\mapsto[f]$ is an injection, it is
enough\footnote{\url{https://math.stackexchange.com/a/3007051/4876}}
to prove that 
$\iota_{A,B}[f]=f$. Really, $\iota_{A,B}[f]=\iota_{A,B}f=f$.

That they are semigroup isomorphisms follows from the
already proved formula $[g\circ f]=[g]\circ[f]$.

\item[\ref{unfix-fix-bij-d}]
Because of the previous, it is enough to prove that
$[f]\in DT\Leftrightarrow f\in Dt$. Really, it is equivalent
to $[f]\sqsubseteq T\Leftrightarrow f\sqsubseteq t$
what is obvious.
\end{widedisorder}
\end{proof}

\begin{prop}
If every $\Hom$-set is a distributive lattice, then
the poset of unfixed morphisms is a distributive lattice.
\end{prop}

\begin{proof}
It follows from the above isomorphism.
\end{proof}

\begin{prop}
If every $\Hom$-set is a co-brouwerian lattice, then
the poset of unfixed morphisms is a co-brouwerian lattice.
\end{prop}

\begin{proof}
It follows from the above isomorphism and the definition
of pseudodifference.
\end{proof}

\begin{prop}
If every $\Hom$-set is a lattice with quasidifference, then
the poset of unfixed morphisms is a lattice with
quasidifference.
\end{prop}

\begin{proof}
It follows from the above isomorphism and the definition
of quasidifference.
\end{proof}

\begin{prop}
~
\begin{enumerate}
\item If every $\Hom$-set is an atomic lattice, then
the poset of unfixed morphisms is an atomic lattice.
\item If every $\Hom$-set is an atomistic lattice, then
the poset of unfixed morphisms is an atomistic lattice.
\end{enumerate}
\end{prop}

\begin{proof}
Follows from the above isomorphism.
\end{proof}

\subsection{Binary product morphism}

\begin{defn}
For a category~$\mathcal{C}$ with binary product morphism
and $X,Y\in\mathfrak{A}$ define
$X\times Y=[X\times_{A,B}Y]$ where
$\mathfrak{Z}\ni A\sqsupseteq X$ and
$\mathfrak{Z}\ni B\sqsupseteq Y$.
(Such~$A$ and~$B$ exist by an axiom of categories with
restricted identities.)
\end{defn}

We need to prove validity of this definition:

\begin{proof}
Let
$\mathfrak{Z}\ni A_0\sqsupseteq X$,
$\mathfrak{Z}\ni B_0\sqsupseteq Y$,
$\mathfrak{Z}\ni A_1\sqsupseteq X$,
$\mathfrak{Z}\ni B_1\sqsupseteq Y$.
We need to prove $X\times_{A_0,B_0}Y\sim X\times_{A_1,B_1}Y$,
but it trivially follows from an axiom in the definition of
category with binary product morphism.
\end{proof}

\begin{prop}
$(X_0\times Y_0)\sqcap(X_1\times Y_1)=
(X_0\sqcap X_1)\times(Y_0\sqcap Y_1)$ for every
$X_0,X_1,Y_0,Y_1\in\mathfrak{A}$.
\end{prop}

\begin{proof}
Take $\mathfrak{Z}\ni A_0\sqsupseteq X_0$,
Take $\mathfrak{Z}\ni A_1\sqsupseteq X_1$,
Take $\mathfrak{Z}\ni B_0\sqsupseteq Y_0$,
Take $\mathfrak{Z}\ni B_1\sqsupseteq Y_1$.

Then
$(X_0\times Y_0)\sqcap(X_1\times Y_1)=
[X_0\times_{A_0\sqcup A_1,B_0\sqcup B_1}Y_0]\sqcap
[X_1\times_{A_0\sqcup A_1,B_0\sqcup B_1}Y_1]=
[(X_0\times_{A_0\sqcup A_1,B_0\sqcup B_1}Y_0)\sqcap
(X_1\times_{A_0\sqcup A_1,B_0\sqcup B_1}Y_1)]=
[(X_0\sqcap X_1)\times_{A_0\sqcup A_1,B_0\sqcup B_1}
(Y_0\sqcap Y_1)]=
(X_0\sqcap X_1)\times(Y_0\sqcap Y_1)$.
\end{proof}

\begin{prop}
$f\square_{A,B}=f\sqcap(A\times B)$.
\end{prop}

\begin{proof}
Take $F\in f$. Let $F'=\iota_{A\sqcup\Src F,B\sqcup\Dst F}F$.
We have $F'\in f$.
$f\square_{A,B}=[\iota_{A,B}F']=
[\mathcal{E}^{B\sqcup\Dst F,B}\circ F'\circ
\mathcal{E}^{A,A\sqcup\Src F}]=
[\id^{\mathcal{C}(B\sqcup\Dst F,B)}_B\circ F'\circ
\id^{\mathcal{C}(A,A\sqcup\Src F)}_A]=
[\id^{\mathcal{C}(B\sqcup\Dst F,B)}_B]\circ [F']\circ
[\id^{\mathcal{C}(A,A\sqcup\Src F)}_A]=
[\id^{\mathcal{C}(B\sqcup\Dst F,B\sqcup\Dst F)}_B]\circ
[F']\circ
[\id^{\mathcal{C}(A\sqcup\Src F,A\sqcup\Src F)}_A]=
[\id^{\mathcal{C}(B\sqcup\Dst F,B\sqcup\Dst F)}_B\circ
F'\circ
\id^{\mathcal{C}(A\sqcup\Src F,A\sqcup\Src F)}_A]=
[F'\sqcap(A\times_{A\sqcup\Src F,B\sqcup\Dst F}B)]=
[F']\sqcap[A\times_{A\sqcup\Src F,B\sqcup\Dst F}B]=
f\sqcap(A\times B)$.
\end{proof}

\section{Categories with embeddings}

\begin{note}
This section in not used below, it is just to feed your intuition.
\end{note}

The following generalizes the well known concept of embedding function $A
\hookrightarrow B$ for from a set $A$ to a set $B$ where $A \subseteq B$.

I will set that the unique morphism from an object $A$ to an object $B$ of a
thin category is equal to the pair $(A , B)$.

\begin{defn}
  A \emph{category with embeddings of objects} is a dagger category with a
  preorder of the set of objects together with a functor $\hookrightarrow$ (we
  will denote applying this functor to the object $(A , B)$ as $A
  \hookrightarrow B$.) such that:
  \begin{itemize}
    \item $\hookrightarrow$ is an identity on objects.
    
    \item Every $A \hookrightarrow B$ is a monomorphism.
    
    \item $(A \hookrightarrow B)^{\dagger} \circ (A \hookrightarrow B) = 1_A$.
  \end{itemize}
\end{defn}

\begin{obvious}
$A\hookrightarrow B$ is defined when $(A , B)$ is a morphism of the preorder
that is when $A \sqsubseteq B$.
\end{obvious}

\begin{obvious}
$A \hookrightarrow B : A \rightarrow B$ when $A \sqsubseteq B$.
\end{obvious}

\begin{prop}
  $A \hookrightarrow A = 1_A$.
\end{prop}

\begin{proof}
  Because $(A , A)$ is an identity morphism and $\hookrightarrow$ preserves
  identities.
\end{proof}

\begin{prop}
  $(B \hookrightarrow C) \circ (A \hookrightarrow B) = A \hookrightarrow C$
  whenever $A \sqsubseteq B \sqsubseteq C$.
\end{prop}

\begin{proof}
  $(B \hookrightarrow C) \circ (A \hookrightarrow B) = \hookrightarrow (B , C)
  \circ \hookrightarrow (A , B) = \hookrightarrow ((B , C) \circ (A , B)) =
  \hookrightarrow (A , C) = A \hookrightarrow C$.
\end{proof}

\section{\texorpdfstring{Categories under $\mathbf{Rel}$}{Categories under Rel}}

TODO: Filtrators of unfixed morphisms.

\begin{defn}
  The $\mathbf{Rel}$-morphism $\mathcal{E}^{A,B}$
  (\emph{restriction-embedding}) is defined by the formula: $\mathcal{E}^{A,B}
  = (A , B , \id_{A \cap B})$.
  
  When $A$ is clear from context, I will denote it just as $\mathcal{E}^B$.
\end{defn}

\begin{obvious}
If $A \subseteq B$ then $\mathcal{E}^{A,B}$ is an embedding $A \hookrightarrow B
= (A , B , \id_A)$.
\end{obvious}

\begin{obvious}
If $A \supseteq B$ then $\mathcal{E}^{A,B} = (A , B ,
\id_B)$.
\end{obvious}

\begin{obvious}
$\mathcal{E}^{A,A} = 1^{\mathbf{Rel}}_A$.
\end{obvious}

\begin{obvious}
$(\mathcal{E}^{A,B})^{- 1} = \mathcal{E}^{B,A}$.
\end{obvious}

\begin{defn}
\emph{Dagger functor} between two dagger categories is a functor between
these categories, which commutes with the daggers.
\fxwarning{Clearer wording.}
\end{defn}

\begin{defn}
\emph{Category under $\mathbf{Rel}$} is a pair $(C , \uparrow)$
where $C$ is a category whose objects are small sets and $\uparrow$ is an
identity-on-objects functor $\mathbf{Rel} \rightarrow C$. I call
$\uparrow$ \emph{up-arrow functor}.
\fxnote{We can use any category conforming to the above
axioms instead of~$\mathbf{Rel}$.}
\end{defn}

\begin{defn}
  \emph{Dagger category under $\mathbf{Rel}$} is a pair $(C ,
  \uparrow)$ where $C$ is a dagger category whose objects are small sets and
  $\uparrow$ is a dagger identity-on-objects functor $\mathbf{Rel}
  \rightarrow C$.
\end{defn}

\begin{defn}
  $\mathcal{E}_{\mathcal{C}}^{A,B} = \uparrow \mathcal{E}^{A,B}$. In
  other words, $\mathcal{E}_{\mathcal{C}} = \uparrow \circ \mathcal{E}$.
  
  When $A$ is clear from context, I will denote it just as $\mathcal{E}_{\mathcal{C}}^B$.
\end{defn}

\begin{prop}
  $\mathcal{E}_{\mathcal{C}}^{A,A} = 1_{\mathcal{C}}^A$.
\end{prop}

\begin{proof}
  $\mathcal{E}_{\mathcal{C}}^{A,A} = \uparrow \mathcal{E}^{A,A} =
  \uparrow 1_{\mathbf{Rel}} = 1_{\mathcal{C}}^A$.
\end{proof}

\begin{prop}
  If $f : X \rightarrow Y$ is a $\mathbf{Rel}$-morphism and
  $\im f = A \subseteq Y$ then
  \[ \mathcal{E}^{A,Y} \circ \mathcal{E}^{Y,A} \circ f = f. \]
\end{prop}

\begin{proof}
  $\mathcal{E}^{A,Y} \circ \mathcal{E}^{Y,A} \circ f = 1_{\mathcal{C}}^A
  \circ f = f$.
\end{proof}

\begin{defn}
  \emph{Partially ordered dagger category under $\mathbf{Rel}$} is
  a category which is both a partially ordered dagger category and a category
  under $\mathbf{Rel}$ such that $\uparrow \circ f^{- 1} = (\uparrow
  \circ f)^{\dagger}$ and $A \sqsubseteq B \Rightarrow \uparrow A \sqsubseteq
  \uparrow B$.
\end{defn}

\begin{prop}
  $(\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} = \mathcal{E}_{\mathcal{C}}^{B,A}$ for a dagger category under
  $\mathbf{Rel}$.
\end{prop}

\begin{proof}
  $(\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} = (\uparrow \mathcal{E}^{A,B})^{\dagger} = \uparrow (\mathcal{E}^{A,B})^{- 1} =
  \uparrow \mathcal{E}^{B,A} = \mathcal{E}_{\mathcal{C}}^{B,A}$.
\end{proof}

\begin{prop}
  For a partially ordered dagger category $\mathcal{C}$ under
  $\mathbf{Rel}$ we have $\mathcal{E}_{\mathcal{C}}^{A,B}$ is:
  \begin{enumerate}
    \item monovalued;
    
    \item injective;
    
    \item entirely defined if $A \subseteq B$;
    
    \item surjective if $B \subseteq A$.
  \end{enumerate}
\end{prop}

\begin{proof}
  ~
  \begin{enumerate}
    \item $\mathcal{E}^{A,B} \circ \mathcal{E}^{B,A} \sqsubseteq
    1^{\mathbf{Rel}}_B$; $\mathcal{E}^{A,B} \circ (\mathcal{E}^{A,B})^{- 1} \sqsubseteq 1^{\mathbf{Rel}}_B$;
    $\mathcal{E}_{\mathcal{C}}^{A,B} \circ (\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} \sqsubseteq 1^{\mathcal{C}}_B$.
    
    \item $\mathcal{E}^{B,A} \circ \mathcal{E}^{A,B} \sqsubseteq
    1^{\mathbf{Rel}}_A$; $(\mathcal{E}^{A,B})^{- 1} \circ \mathcal{E}^{A,B} \sqsubseteq 1^{\mathbf{Rel}}_A$;
    $(\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} \circ \mathcal{E}^{A,B} \sqsubseteq 1^{\mathcal{C}}_A$.
    
    \item $\mathcal{E}^{B,A} \circ \mathcal{E}^{A,B} \sqsupseteq
    1^{\mathbf{Rel}}_A$; $(\mathcal{E}^{A,B})^{- 1} \circ \mathcal{E}^{A,B} \sqsupseteq 1^{\mathbf{Rel}}_A$;
    $(\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} \circ \mathcal{E}_{\mathcal{C}}^{A,B} \sqsupseteq 1^{\mathcal{C}}_A$.
    
    \item $\mathcal{E}^{A,B} \circ \mathcal{E}^{B,A} \sqsupseteq
    1^{\mathbf{Rel}}_A$; $\mathcal{E}^{A,B} \circ (\mathcal{E}^{A,B})^{- 1} \sqsupseteq 1^{\mathbf{Rel}}_A$;
    $\mathcal{E}_{\mathcal{C}}^{A,B} \circ (\mathcal{E}_{\mathcal{C}}^{A,B})^{\dagger} \sqsupseteq 1^{\mathcal{C}}_A$.
  \end{enumerate}
\end{proof}

??

\section{\texorpdfstring{Examples of partially ordered dagger categories under
$\mathbf{Rel}$}{Examples of partially ordered dagger categories under Rel}}

\subsection{\texorpdfstring{Category $\mathbf{Rel}$}{Category Rel}}

Category $\mathbf{Rel}$ with the identity up-arrow functor to itself
and ``reverse relation'' as the dagger is an obvious example of a partially
ordered dagger category under $\mathbf{Rel}$.

\begin{prop}
  $\iota_{A, B} f = (A , B , \GR f \cap (A \times B))$.
\end{prop}

\begin{proof}
  $\iota_{A, B} f = \mathcal{E}^{B} \circ f \circ (\mathcal{E}^{A})^{-1} = (A , B , \GR f \cap (A \times B))$.
\end{proof}

\subsection{\texorpdfstring{Category $\mathsf{FCD}$}{Category FCD}}

Category $\mathsf{FCD}$ with the up-arrow functor
$\uparrow^{\mathsf{FCD}}$ and ``reverse funcoid'' as the dagger is a
partially ordered dagger category under $\mathbf{Rel}$.

\begin{prop}
  $\mathcal{E}_{\mathsf{FCD}}^{A,B} = (A , B , \lambda \mathcal{X}
  \in \mathfrak{F} (A) : \mathcal{X} \div B , \lambda \mathcal{Y} \in
  \mathfrak{F} (B) : \mathcal{Y} \div A)$ for objects $A \subseteq B$ of
  $\mathsf{FCD}$.
\end{prop}

\begin{proof}
  $\langle \mathcal{E}_{\mathsf{FCD}}^{A,B} \rangle \mathcal{X} =
  \bigsqcap \setcond{ \langle \mathcal{E}_{\mathsf{FCD}}^{A,B}
  \rangle^{\ast} X }{ X \in \mathcal{X} } =
  \bigsqcap \setcond{ \uparrow^B  \langle \mathcal{E}^{A,B} \rangle X
  }{ X \in \mathcal{X} } = \bigsqcap \setcond{
  \uparrow^B  (X \cap A \cap B) }{ X \in \mathcal{X}
  } = \bigsqcap \setcond{ \uparrow^B  (X \cap B) }{
  X \in \mathcal{X} } = \mathcal{X} \div B$.
  
  Rest follows from symmetry.
\end{proof}

\begin{prop}
  ~
  \begin{enumerate}
    \item $\langle \mathcal{E}_{\mathsf{FCD}}^{A,B} \rangle^{\ast} X
    = \uparrow^B X$ for every $X \in \subsets A$ if $A \subseteq B$.
    
    \item $\langle \mathcal{E}_{\mathsf{FCD}}^{B,A} \rangle^{\ast}
    Y = \uparrow^A (Y \cap A)$ for every $Y \in \subsets B$ if $A \subseteq
    B$.
  \end{enumerate}
\end{prop}

\begin{proof}
  By definition of principal funcoid.
\end{proof}

\fxnote{Unfixed funcoids seem to be embedded into pointfree 
funcoids between unfixed filters.
Also unfixed reloids can be embedded into reloids
between the Grothendieck universes.}

\subsection{\texorpdfstring{Category $\mathsf{RLD}$}{Category RLD}}

Category $\mathsf{RLD}$ with the up-arrow functor
$\uparrow^{\mathsf{RLD}}$ and ``reverse reloid'' as the dagger is a
partially ordered dagger category under $\mathbf{Rel}$.

\begin{obvious}
$\mathcal{E}_{\mathsf{RLD}}^{A,B} = \uparrow^{\mathsf{RLD} (A ,
B)} \id_{A \cap B}$.
\end{obvious}

\begin{defn}
  $f \div (A \times B) = (A , B , (\GR f) \div (A \times B))$ for every
  reloid $f$.
\end{defn}

\begin{prop}
  $\iota_{A, B} f = f \div (A \times B)$.
\end{prop}

\begin{proof}
  $\iota_{A, B} f = \mathcal{E}_{\mathsf{RLD}}^{B}
\circ f \circ (\mathcal{E}_{\mathsf{RLD}}^{A})^{-1} =
\bigsqcap \setcond{ \uparrow^{\mathsf{RLD}} (\mathcal{E}^{B} \circ F \circ (\mathcal{E}^{A})^{-1}
}{ F \in \GR f } = \bigsqcap \setcond{
\uparrow^{\mathsf{RLD}} (F \cap (A \times B))}
{F \in \GR f } = f \div (A \times B)$.

\fxwarning{Filters on Cartesian products vs reloids.}
\end{proof}

\fxnote{Unfixed reloids seem to be equivalent to
endoreloids on the set of unfixed filters.}

\subsection{Some isomorphisms}

\begin{prop}
  $\setcond{ (\mathcal{A} \div A , \mathcal{A} \sqcap A) }{
  \mathcal{A} \in \mathfrak{F} (U) }$ is a function and
  moreover is an order isomorphism for a set $A \subseteq U$.
\end{prop}

\begin{proof}
  $\mathcal{A} \div A$ and $\mathcal{A} \sqcap A$ are determined by each other
  by the following formulas:
  \[ \mathcal{A} \div A = (\mathcal{A} \sqcap A) \div A \quad
     \text{and} \quad \mathcal{A} \sqcap A = (\mathcal{A} \div A) \div
     \Base (\mathcal{A}) . \]
  Prove the formulas: $(\mathcal{A} \sqcap A) \div A = \bigsqcap \setcond{
  \uparrow^A (X \cap A) }{ X \in \mathcal{A} \sqcap A
  } = \bigsqcap \setcond{ \uparrow^A (X \cap A) }{
  X \in \mathcal{A} } = \mathcal{A} \div A$.
  
  $(\mathcal{A} \div A) \div \Base (\mathcal{A}) = \bigsqcap \setcond{
  \uparrow^A (X \cap A) }{ X \in \mathcal{A} }
  \div \Base (\mathcal{A}) = \bigsqcap \setcond{ \uparrow^{\Base
  (\mathcal{A})} (Y \cap \Base (\mathcal{A})) }{
  Y \in \bigsqcap \setcond{ \uparrow^A (X \cap A) }{
  X \in \mathcal{A} } } = \text{(by properties of
  filter bases)} = \bigsqcap \setcond{ \uparrow^{\Base (\mathcal{A})} (X
  \cap A \cap \Base (\mathcal{A})) }{ X \in
  } = \bigsqcap \setcond{ \uparrow^{\Base
  (\mathcal{A})} (X \cap A) }{ X \in \mathcal{A}
  } = \mathcal{A} \sqcap A$.
  
  That this defines a bijection, follows from $\mathcal{A} \div A \sim
  \mathcal{A} \sqcap A$ what easily follows from the above formulas.
\end{proof}

\begin{prop}
  $\setcond{ (\iota_{X, Y} f , \id^{\mathbf{Rel}}_Y \circ f \circ
  \id^{\mathbf{Rel}}_X) }{ f \in
  \mathbf{Rel} (A , B) }$ is a function and moreover is an
  (order and semigroup) isomorphism, for sets $X \subseteq \Src f$, $Y
  \subseteq \Dst f$.
\end{prop}

\begin{proof}
  $\iota_{X, Y} f = (X , Y , \GR f \cap (X \times Y))$;
  $\id^{\mathbf{Rel}}_Y \circ f \circ
  \id^{\mathbf{Rel}}_X = (\Src f , \Dst f ,
  \GR f \cap (X \times Y))$. The isomorphism (both order and semigroup)
  is evident.
\end{proof}

\begin{prop}
  $\setcond{ (\iota_{X, Y} f , \id^{\mathsf{FCD}}_Y
  \circ f \circ \id^{\mathsf{FCD}}_X) }{
  f \in \mathsf{FCD} (A , B) }$ is a function and moreover is an
  (order and semigroup) isomorphism, for sets $X \subseteq \Src f$, $Y
  \subseteq \Dst f$.
\end{prop}

\begin{proof}
  From symmetry it follows that it's enough to prove that $\setcond{ \left(
  \mathcal{E}^Y \circ f , \id^{\mathsf{FCD}}_Y \circ f \right)
  }{ f \in \mathsf{FCD} (A , B) }$ is a
  function and moreover is an (order and semigroup) isomorphism, for a set $Y
  \subseteq \Dst f$.
  
  Really, $\setcond{ (\langle \mathcal{E}^Y \rangle x , \langle
  \id^{\mathsf{FCD}}_Y \rangle x) }{ x
  \in \Dst f } = \setcond{ (x \div Y , x \sqcap Y) }{
  x \in \Dst f }$ is an order isomorphism by proved
  above. This implies that $\setcond{ \left( \mathcal{E}^Y \circ f ,
  \id^{\mathsf{FCD}}_Y \circ f \right) }{
  f \in \mathsf{FCD} (A , B) }$ is an isomorphism
  (both order and semigroup).
\end{proof}

\begin{prop}
  $\setcond{ (\iota_{X, Y} f , \id^{\mathsf{RLD}}_Y \circ f \circ
  \id^{\mathsf{RLD}}_X) }{ f \in
  \mathsf{RLD} (A , B) }$ is a function and moreover is an
  (order and semigroup) isomorphism, for sets $X \subseteq \Src f$, $Y
  \subseteq \Dst f$.
\end{prop}

\begin{proof}
  $\iota_{X, Y} f = (X , Y , (\up f) \div (X \times Y))$;
  $\id^{\mathsf{RLD}}_Y \circ f \circ
  \id^{\mathsf{RLD}}_X = (\Src f , \Dst f ,
  (\up f) \sqcap (X \times Y))$. They are order isomorphic by proved
  above.
  
  $\iota_{Y, Z} g \circ \iota_{X, Y} f =\mathcal{E}^Z \circ g \circ
  (\mathcal{E}^Y)^{- 1} \circ \mathcal{E}^Y \circ f \circ (\mathcal{E}^X)^{-
  1} =\mathcal{E}^Z \circ g \circ \id^{\mathsf{RLD}}_Y \circ
  \id^{\mathsf{RLD}}_Y \circ f \circ (\mathcal{E}^X)^{- 1}$
  because $(\mathcal{E}^Y)^{- 1} \circ \mathcal{E}^Y =
  \id^{\mathbf{Rel}}_Y = \id^{\mathbf{Rel}}_Y
  \circ \id^{\mathbf{Rel}}_Y$. Thus by proved above
  \[ \setcond{ (\iota_{Y, Z} g \circ \iota_{X, Y} f ,
     \id^{\mathsf{RLD}}_Z \circ g \circ
     \id^{\mathsf{RLD}}_Y \circ \id^{\mathsf{RLD}}_Y
     \circ f \circ \id^{\mathsf{RLD}}_X) }{
     f \in \mathsf{RLD} (A , B) } \]
  is a bijection.
\end{proof}

\fxnote{Research the semigroups (Wikipedia) of funcoids and
reloids.}
