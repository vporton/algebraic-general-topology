\chapter{Reloids}

\section{Basic definitions}

\begin{defn}
Let $A$, $B$ be sets.
$\mathsf{RLD}\sharp(A,B)$ is the base of an arbitrary but fixed primary filtrator over $\mathbf{Rel}(A,B)$.
\end{defn}

\begin{obvious}
$(\mathsf{RLD}\sharp(A,B),\mathbf{Rel}(A,B))$ is a powerset filtrator.
\end{obvious}

\begin{defn}
\index{reloid}I call a reloid from a set $A$ to a set $B$ a triple
$(A,B,F)$ where $F\in\mathsf{RLD}\sharp(A,B)$.
\end{defn}

\begin{defn}
\index{reloid!source}\index{reloid!destination}\emph{Source} and
\emph{destination} of every reloid $(A,B,F)$ are defined as
\[
\Src(A,B,F)=A\quad\text{and}\quad\Dst(A,B,F)=B.
\]

\end{defn}
I will denote $\mathsf{RLD}(A,B)$ the set of reloids from $A$ to
$B$.

I will denote $\mathsf{RLD}$ the set of all reloids (for small sets).

\begin{defn}
\index{endo-reloid}I will call \emph{endoreloids} reloids with the
same source and destination.
\end{defn}

\begin{defn}
~
\begin{itemize}
\item $\uparrow^{\mathsf{RLD}\sharp}f$ is the principal filter object corresponding to a $\mathbf{Rel}$-morphism~$f$.
\item $\uparrow^{\mathsf{RLD}\sharp(A,B)} f=\uparrow^{\mathsf{RLD}\sharp}(A,B,f)$ for every binary relation $f\in\subsets(A\times B)$.
\item $\uparrow^{\mathsf{RLD}}f=(\Src f,\Dst f,\uparrow^{\mathsf{RLD}\sharp}f)$
for every $\mathbf{Rel}$-morphism $f$.
\item $\uparrow^{\mathsf{RLD}(A,B)}f=\uparrow^{\mathsf{RLD}}(A,B,f)$ for every binary relation $f\in\subsets(A\times B)$.
\end{itemize}
\end{defn}

\begin{defn}
\index{reloid!principal}I call members of a set $\rsupfun{\uparrow^{\mathsf{RLD}}}\mathbf{Rel}(A,B)$
as \emph{principal} reloids.
\end{defn}

Reloids are a generalization of uniform spaces. Also reloids are generalization
of binary relations.

\begin{defn}
$\up f^{-1} = \setcond{F^{-1}}{F\in\up f}$ for every $f\in\mathsf{RLD}\sharp(A,B)$.
\end{defn}

\begin{prop}
$f^{-1}$ exists and $f^{-1}\in\mathsf{RLD}\sharp(B,A)$.
\end{prop}

\begin{proof}
We need to prove that $\setcond{F^{-1}}{F\in\up f}$ is a filter, but that's obvious.
\end{proof}

\begin{defn}
\index{reloid!reverse}The \emph{reverse} reloid of a reloid is defined
by the formula
\[
(A,B,F)^{-1}=(B,A,F^{-1}).
\]
\end{defn}
\begin{note}
The reverse reloid is \emph{not} an inverse in the sense of group
theory or category theory.
\end{note}
Reverse reloid is a generalization of conjugate quasi-uniformity.
\begin{defn}
Every set $\mathsf{RLD}(A,B)$ is a poset by the formula $f\sqsubseteq g\Leftrightarrow\GR f\sqsubseteq\GR g$.
We will apply lattice operations to subsets of $\mathsf{RLD}(A,B)$
without explicitly mentioning $\mathsf{RLD}(A,B)$.\end{defn}

\emph{Filtrators of reloids} are $(\mathsf{RLD}(A,B),\mathbf{Rel}(A,B))$
(for all sets $A$, $B$). Here I equate principal reloids with corresponding $\mathbf{Rel}$-morphisms.

\begin{obvious}
$(\mathsf{RLD}(A,B),\mathbf{Rel}(A,B))$ is a powerset filtrator isomorphic to the filtrator
$(\mathsf{RLD}\sharp(A,B),\mathbf{Rel}(A,B))$. Thus $\mathsf{RLD}(A,B)$ is a special case of $\mathsf{RLD}\sharp(A,B)$.
\end{obvious}

\section{Composition of reloids}
\begin{defn}
\index{composable!reloids}Reloids $f$ and $g$ are \emph{composable}
when $\Dst f=\Src g$.
\end{defn}

\begin{defn}
\index{composition!of reloids}\emph{Composition} of (composable)
reloids is defined by the formula
\[
g\circ f=\bigsqcap^{\mathsf{RLD}}\setcond{G\circ F}{F\in\up f,G\in\up g}.
\]
\end{defn}
\begin{obvious}
Composition of reloids is a reloid.
\end{obvious}

\begin{obvious}
$\uparrow^{\mathsf{RLD}}g\circ\uparrow^{\mathsf{RLD}}f=\uparrow^{\mathsf{RLD}}(g\circ f)$
for composable morphisms~$f$,~$g$ of category~$\mathbf{Rel}$.\end{obvious}
\begin{thm}
$(h\circ g)\circ f=h\circ(g\circ f)$ for every composable reloids
$f$, $g$, $h$.\end{thm}
\begin{proof}
For two nonempty collections~$A$ and~$B$ of sets I will denote
\[
A\sim B\Leftrightarrow\forall K\in A\exists L\in B:L\subseteq K\wedge\forall K\in B\exists L\in A:L\subseteq K.
\]
It is easy to see that $\sim$ is a transitive relation.

I will denote $B\circ A=\setcond{L\circ K}{K\in A,L\in B}$.

Let first prove that for every nonempty collections of relations $A$,
$B$, $C$
\[
A\sim B\Rightarrow A\circ C\sim B\circ C.
\]
Suppose $A\sim B$ and $P\in A\circ C$ that is $K\in A$ and $M\in C$
such that $P=K\circ M$. $\exists K'\in B:K'\subseteq K$ because
$A\sim B$. We have $P'=K'\circ M\in B\circ C$. Obviously $P'\subseteq P$.
So for every $P\in A\circ C$ there exists $P'\in B\circ C$ such
that $P'\subseteq P$; the vice versa is analogous. So $A\circ C\sim B\circ C$.

$\up((h\circ g)\circ f)\sim\up(h\circ g)\circ\up f$, $\up(h\circ g)\sim(\up h)\circ(\up g)$.
By proven above $\up((h\circ g)\circ f)\sim(\up h)\circ(\up g)\circ(\up f)$.

Analogously $\up(h\circ(g\circ f))\sim(\up h)\circ(\up g)\circ(\up f)$.

So $\up(h\circ(g\circ f))\sim\up((h\circ g)\circ f)$ what is possible
only if $\up(h\circ(g\circ f))=\up((h\circ g)\circ f)$. Thus $(h\circ g)\circ f=h\circ(g\circ f)$.\end{proof}
\begin{xca}
Prove $f_n\circ\dots\circ f_0 = \bigsqcap^{\mathsf{RLD}}\setcond{F_n\circ\dots\circ F_0}{F_i\in\up f_i}$
for every composable reloids~$f_0,\dots,f_n$ where $n$ is an integer, independently of the inserted parentheses.
(Hint: Use generalized filter bases.)
\end{xca}
\begin{thm}
\label{rld-prod-ff}For every reloid $f$:
\begin{enumerate}
\item \label{rld-ff}$f\circ f=\bigsqcap^{\mathsf{RLD}}\setcond{F\circ F}{F\in\up f}$
if $\Src f=\Dst f$;
\item \label{rld-f1f}$f^{-1}\circ f=\bigsqcap^{\mathsf{RLD}}\setcond{F^{-1}\circ F}{F\in\up f}$;
\item \label{rld-ff1}$f\circ f^{-1}=\bigsqcap^{\mathsf{RLD}}\setcond{F\circ F^{-1}}{F\in\up f}$.
\end{enumerate}
\end{thm}
\begin{proof}
I will prove only \ref{rld-ff} and \ref{rld-f1f} because \ref{rld-ff1}
is analogous to \ref{rld-f1f}.
\begin{widedisorder}
\item [{\ref{rld-ff}}] It's enough to show that $\forall F,G\in\up f\exists H\in\up f:H\circ H\sqsubseteq G\circ F$.
To prove it take $H=F\sqcap G$.
\item [{\ref{rld-f1f}}] It's enough to show that $\forall F,G\in\up f\exists H\in\up f:H^{-1}\circ H\sqsubseteq G^{-1}\circ F$.
To prove it take $H=F\sqcap G$. Then $H^{-1}\circ H=(F\sqcap G)^{-1}\circ(F\sqcap G)\sqsubseteq G^{-1}\circ F$.
\end{widedisorder}
\end{proof}
\begin{xca}\label{rld-fn}
Prove $f^n = \bigsqcap^{\mathsf{RLD}}\setcond{F^n}{F\in\up f}$ for every endofuncoid~$f$ and positive integer~$n$.
\end{xca}

\section{Restricting reloid to a filter}

\begin{defn}
\index{reloid!identity}\emph{Identity reloid} for a set $A$ is defined
by the formula $1_{A}^{\mathsf{RLD}}=\uparrow^{\mathsf{RLD}(A,A)}\id_{A}$.\end{defn}
\begin{obvious}
$(1_{A}^{\mathsf{RLD}})^{-1}=1_{A}^{\mathsf{RLD}}$.\end{obvious}
\begin{defn}
\index{restricting!reloid}I define \emph{restricting} a reloid $f$
to a filter $\mathcal{A}$ as $f|_{\mathcal{A}}=f\sqcap(\mathcal{A}\times^{\mathsf{RLD}}\top^{\mathscr{F}(\Dst f)})$.
\end{defn}

\begin{defn}
\index{restricted identity reloid}I call \emph{restricted identity
reloid} for a filter $\mathcal{A}$ the reloid
\[
\id_{\mathcal{A}}^{\mathsf{RLD}}=(1_{\Base(\mathcal{A})}^{\mathsf{RLD}})|_{\mathcal{A}}.
\]
\end{defn}
\begin{thm}
$\id_{\mathcal{A}}^{\mathsf{RLD}}=\bigsqcap_{A\in\up\mathcal{A}}^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}\id_{A}$
for every filter $\mathcal{A}$.\end{thm}
\begin{proof}
Let $K\in\up\bigsqcap_{A\in\up\mathcal{A}}^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}\id_{A}$,
then there exists $A\in\up\mathcal{A}$ such that $\GR K\supseteq\id_{A}$.
Then
\begin{align*}
\id_{\mathcal{A}}^{\mathsf{RLD}} & \sqsubseteq\\
\uparrow^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}\id_{\Base(\mathcal{A})}\sqcap(\mathcal{A}\times^{\mathsf{RLD}}\top) & \sqsubseteq\\
\uparrow^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}\id_{\Base(\mathcal{A})}\sqcap(A\times^{\mathsf{RLD}}\top) & =\\
\uparrow^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}\id_{\Base(\mathcal{A})}\sqcap\uparrow^{\mathsf{RLD}}(A\times\top) & =\\
\uparrow^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}(\id_{\Base(\mathcal{A})}\cap\GR(A\times\top)) & =\\
\uparrow^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}\id_{A} & \sqsubseteq K.
\end{align*}
Thus $K\in\up\id_{\mathcal{A}}^{\mathsf{RLD}}$.

Reversely let $K\in\up\id_{\mathcal{A}}^{\mathsf{RLD}}=\up(1_{\Base(\mathcal{A})}^{\mathsf{RLD}}\sqcap(\mathcal{A}\times^{\mathsf{RLD}}\top))$,
then there exists $A\in\up\mathcal{A}$ such that 
\begin{align*}
K\in\up\uparrow^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}(\id_{\Base(\mathcal{A})}\cap\GR(A\times\top)) & =\\
\up\uparrow^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}\id_{A} & \sqsupseteq\\
\up\bigsqcap_{A\in\up\mathcal{A}}^{\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{A}))}\id_{A}.
\end{align*}
\end{proof}
\begin{cor}
$(\id_{\mathcal{A}}^{\mathsf{RLD}})^{-1}=\id_{\mathcal{A}}^{\mathsf{RLD}}$.\end{cor}
\begin{thm}
$f|_{\mathcal{A}}=f\circ\id_{\mathcal{A}}^{\mathsf{RLD}}$ for every
reloid $f$ and $\mathcal{A}\in\mathscr{F}(\Src f)$.\end{thm}
\begin{proof}
We need to prove that 
\[
f\sqcap(\mathcal{A}\times^{\mathsf{RLD}}\top)=f\circ\bigsqcap^{\mathsf{RLD}(\Src f,\Src f)}\setcond{\id_{A}}{A\in\up\mathcal{A}}.
\]


We have
\begin{align*}
f\circ\bigsqcap^{\mathsf{RLD}(\Src f,\Src f)}\setcond{\id_{A}}{A\in\up\mathcal{A}} & =\\
\bigsqcap^{\mathsf{RLD}(\Src f,\Src f)}\setcond{\GR(F)\circ\id_{A}}{F\in\up f,A\in\up\mathcal{A}} & =\\
\bigsqcap^{\mathsf{RLD}}\setcond{F|_{A}}{F\in\up f,A\in\up\mathcal{A}} & =\\
\bigsqcap^{\mathsf{RLD}}\setcond{F\sqcap(A\times\top^{\mathscr{T}(\Dst f)})}{F\in\up f,A\in\up\mathcal{A}} & =\\
\bigsqcap^{\mathsf{RLD}}\setcond F{F\in\up f}\sqcap\bigsqcap^{\mathsf{RLD}}\setcond{A\times\top^{\mathscr{T}(\Dst f)}}{A\in\up\mathcal{A}} & =\\
f\sqcap(\mathcal{A}\times^{\mathsf{RLD}}\top).
\end{align*}
\end{proof}
\begin{thm}
$(g\circ f)|_{\mathcal{A}}=g\circ(f|_{\mathcal{A}})$ for every composable
reloids $f$ and $g$ and $\mathcal{A}\in\mathscr{F}(\Src f)$.\end{thm}
\begin{proof}
$(g\circ f)|_{\mathcal{A}}=(g\circ f)\circ\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}}=g\circ(f\circ\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}})=g\circ(f|_{\mathcal{A}})$.\end{proof}

\begin{prop}\label{rld-id-comp}
$\id_{\mathcal{B}}\circ\id_{\mathcal{A}} = \id_{\mathcal{A}\sqcap\mathcal{B}}$ for all filters~$\mathcal{A}$,~$\mathcal{B}$ (on some set~$U$).
\end{prop}

\begin{proof}
$\id_{\mathcal{B}}\circ\id_{\mathcal{A}} =
(\id_{\mathcal{B}})|_{\mathcal{A}} = (1^{\mathsf{RLD}}_U|_{\mathcal{B}})|_{\mathcal{A}} = 1^{\mathsf{RLD}}_U|_{\mathcal{A}\sqcap\mathcal{B}} = 
\id_{\mathcal{A}\sqcap\mathcal{B}}$.
\end{proof}

\section{Categories of reloids}

I will define two categories, the \emph{category of reloids} and the
\emph{category of reloid triples}.

\index{category!of reloids}The \emph{category of reloids} is defined
as follows:
\begin{itemize}
\item Objects are small sets.
\item The set of morphisms from a set $A$ to a set $B$ is $\mathsf{RLD}(A,B)$.
\item The composition is the composition of reloids.
\item Identity morphism for a set is the identity reloid for that set.
\end{itemize}
To show it is really a category is trivial.

\index{category!of reloid triples}The \emph{category of reloid triples}
is defined as follows:
\begin{itemize}
\item Objects are small sets.
\item The morphisms from a filter $\mathcal{A}$ to a filter $\mathcal{B}$
are triples $(\mathcal{A},\mathcal{B},f)$ where $f\in\mathsf{RLD}(\Base(\mathcal{A}),\Base(\mathcal{B}))$
and $\dom f\sqsubseteq\mathcal{A}$, $\im f\sqsubseteq\mathcal{B}$.
\item The composition is defined by the formula $(\mathcal{B},\mathcal{C},g)\circ(\mathcal{A},\mathcal{B},f)=(\mathcal{A},\mathcal{C},g\circ f)$.
\item Identity morphism for a filter $\mathcal{A}$ is $\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}}$.
\end{itemize}
To prove that it is really a category is trivial.
\begin{prop}
$\uparrow^{\mathsf{RLD}}$ is a functor from $\mathbf{Rel}$ to $\mathsf{RLD}$.\end{prop}
\begin{proof}
$\uparrow^{\mathsf{RLD}}(g\circ f)=\uparrow^{\mathsf{RLD}}g\circ\uparrow^{\mathsf{RLD}}f$
was proved above. $\uparrow^{\mathsf{RLD}}1_{A}^{\mathbf{Rel}}=1_{A}^{\mathsf{RLD}}$
is by definition.
\end{proof}

\section{Reloidal product of filters}

\begin{defn}
\index{product!reloidal}Reloidal product of filters $\mathcal{A}$
and $\mathcal{B}$ is defined by the formula
\[
\mathcal{A}\times^{\mathsf{RLD}}\mathcal{B}\eqdef\bigsqcap^{\mathsf{RLD}}\setcond{A\times B}{A\in\up\mathcal{A},B\in\up\mathcal{B}}.
\]
\end{defn}
\begin{obvious}
~
\begin{itemize}
\item $\uparrow^{U}A\times^{\mathsf{RLD}}\uparrow^{V}B=\uparrow^{\mathsf{RLD}(U,V)}(A\times B)$
for every sets $A\subseteq U$, $B\subseteq V$.
\item $\uparrow A\times^{\mathsf{RLD}}\uparrow B=\uparrow^{\mathsf{RLD}}(A\times B)$
for every typed sets~$A$,~$B$.\end{itemize}
\end{obvious}

\begin{thm}
$f\sqcap(\mathcal{A}\times^{\mathsf{RLD}}\mathcal{B})=\id_{\mathcal{B}}^{\mathsf{\mathsf{RLD}}}\circ f\circ\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}}$
for every reloid $f$ and $\mathcal{A}\in\mathscr{F}(\Src f)$, $\mathcal{B}\in\mathscr{F}(\Dst f)$.\end{thm}
\begin{proof}
~
\begin{align*}
f\sqcap(\mathcal{A}\times^{\mathsf{RLD}}\mathcal{B}) & =\\
f\sqcap(\mathcal{A}\times^{\mathsf{RLD}}\top^{\mathscr{F}(\Dst f)})\sqcap(\top^{\mathscr{F}(\Src f)}\times^{\mathsf{RLD}}\mathcal{B}) & =\\
f|_{\mathcal{A}}\sqcap(\top^{\mathscr{F}(\Src f)}\times^{\mathsf{RLD}}\mathcal{B}) & =\\
(f\circ\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}})\sqcap(\top^{\mathscr{F}(\Src f)}\times^{\mathsf{RLD}}\mathcal{B}) & =\\
((f\circ\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}})^{-1}\sqcap(\top^{\mathscr{F}(\Src f)}\times^{\mathsf{RLD}}\mathcal{B})^{-1})^{-1} & =\\
((\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}}\circ f^{-1})\sqcap(\mathcal{B}\times^{\mathsf{RLD}}\top^{\mathscr{F}(\Src f)}))^{-1} & =\\
(\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}}\circ f^{-1}\circ\id_{\mathcal{B}}^{\mathsf{\mathsf{RLD}}})^{-1} & =\\
\id_{\mathcal{B}}^{\mathsf{\mathsf{RLD}}}\circ f\circ\id_{\mathcal{A}}^{\mathsf{\mathsf{RLD}}}.
\end{align*}
\end{proof}
